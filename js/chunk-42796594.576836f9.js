(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42796594"],{1421:function(t,e,s){},"1d5a":function(t,e,s){},"27d1":function(t,e,s){},3099:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main_wrapper"},[s("div",{staticClass:"banner banner_one"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.bannerImg,expression:"bannerImg"}],attrs:{alt:""}}),s("div",{staticClass:"banner_info"},[s("p",{staticClass:"title"},[t._v(t._s(t.bannerContent))])])])])},a=[],i={name:"topBanner",props:{bannerImg:String,bannerContent:String}},n=i,r=(s("8320"),s("2877")),c=Object(r["a"])(n,o,a,!1,null,"6a835dd6",null);e["a"]=c.exports},"4ef0":function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"builder fixedBuilder"},[s("div",{staticClass:"main_wrapper",attrs:{id:"mainWrapper"}},[s("div",{staticClass:"clearfix",attrs:{id:"container"},on:{click:t.containerListenner,mousedown:t.containerMouseDown,mousemove:t.containerMouseMove,mouseup:t.containerMouseUp}}),s("div",{staticClass:"show_more clearfix",class:t.showMore?"":"show_more_close",on:{click:function(e){return t.showMoreFn()}}},[s("img",{attrs:{src:"/image/3dBuilder/arrow.png",alt:""}})]),t.showMore?s("div",{staticClass:"clearfix",attrs:{id:"shapes"}},[s("div",{staticClass:"shapes_wrapper"},[s("div",{staticClass:"shapes_options normal",on:{click:function(e){return t.showModule(0)}}},[t._v("基础模型 "),s("i",{staticClass:"iconfont arrow arrow_right"},[t._v("")])]),s("div",{staticClass:"shapes_options cartoon",on:{click:function(e){return t.showModule(1)}}},[t._v("卡通模型 "),s("i",{staticClass:"iconfont arrow arrow_right"},[t._v("")])])])]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.shapesListShow||t.cartoonStlShow,expression:"shapesListShow || cartoonStlShow"}],attrs:{id:"childWrapper"}},[t.shapesListShow?s("div",{staticClass:"child_wrapper normal_wrapper"},[s("div",{staticClass:"child_title",on:{click:function(e){return t.hideModule()}}},[s("i",{staticClass:"iconfont arrow"},[t._v("")]),t._v("基础模型")]),t._l(t.shapesList,(function(e,o){return s("div",{key:o,staticClass:"module shapes drag",class:e.title,on:{click:function(s){return t.selectModule(0,e.code,o,e.module)}}},["shape"==e.module?s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"0"}}):"stl"==e.module?s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"1"}}):"text"==e.module?s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"2"}}):t._e(),s("input",{staticClass:"this_code",attrs:{type:"hidden"},domProps:{value:e.code}}),s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:"/image/3dBuilder/3dPrinting/sprint_"+e.title+".png",expression:"'/image/3dBuilder/3dPrinting/sprint_'+item.title+'.png'",arg:"background-image"}],staticClass:"drag sprint",class:"sprint_"+e.title}),s("div",{staticClass:"name drag"},[t._v(t._s(e.name))])])}))],2):t._e(),t.cartoonStlShow?s("div",{staticClass:"child_wrapper cartoon_wrapper"},[s("div",{staticClass:"child_title",on:{click:function(e){return t.hideModule()}}},[s("i",{staticClass:"iconfont arrow"},[t._v("")]),t._v("卡通模型")]),t._l(t.cartoonStlList,(function(e,o){return s("div",{key:o,staticClass:"module lego drag",class:e.title,on:{click:function(s){return t.selectModule(1,e.code,o,e.module)}}},[s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"1"}}),s("input",{staticClass:"this_code",attrs:{type:"hidden"},domProps:{value:o}}),s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:"/image/3dBuilder/3dPrinting/sprint_"+e.title+".png",expression:"'/image/3dBuilder/3dPrinting/sprint_'+item.title+'.png'",arg:"background-image"}],staticClass:"drag sprint sprintY",class:"sprint_"+e.title}),s("div",{staticClass:"name drag"},[t._v(t._s(e.name))])])}))],2):t._e()]),s("div",{staticClass:"module_btns clearfix"},[s("div",{staticClass:"btn_main go_mainPage",on:{click:function(e){return t.hideSelf()}}},[t._m(0),s("div",{staticClass:"module_btn_name"},[t._v("Back")])]),s("div",{staticClass:"btn_main save_module save_stl",class:t.activeSave?"":"noActive_save",on:{click:function(e){return t.saveModuleShow(0)}}},[t._m(1),s("div",{staticClass:"module_btn_name"},[t._v("保存")])])]),s("div",{staticClass:"obj_control has_right_menu"},[t.controlBar?s("div",{staticClass:"obj_control_wrapper clearfix"},[s("div",{staticClass:"control_btn undo_control ",class:t.undoActive?"":"noActive_control",on:{click:function(e){return t.redoUndo(0)}}},[s("i",{staticClass:"iconfont"},[t._v("")]),s("div",{staticClass:"btn_name"},[t._v("撤回")])]),s("div",{staticClass:"control_btn redo_control ",class:t.redoActive?"":"noActive_control",on:{click:function(e){return t.redoUndo(1)}}},[s("i",{staticClass:"iconfont"},[t._v("")]),s("div",{staticClass:"btn_name"},[t._v("恢复")])]),s("div",{staticClass:"control_btn size_control",on:{click:function(e){return t.changeControls(0)}}},[t._m(2),s("div",{staticClass:"btn_name"},[t._v("修改大小")])]),s("div",{staticClass:"control_btn trans_control active_control",on:{click:function(e){return t.changeControls(1)}}},[t._m(3),s("div",{staticClass:"btn_name"},[t._v("移动")])]),s("div",{staticClass:"control_btn rotate_control",on:{click:function(e){return t.changeControls(2)}}},[t._m(4),s("div",{staticClass:"btn_name"},[t._v("旋转")])]),s("div",{staticClass:"control_btn zoomin_control",on:{click:function(e){return t.showChild(0)}}},[s("i",{staticClass:"iconfont"},[t._v("")]),s("div",{staticClass:"btn_name"},[t._v("放大缩小")]),t.showZoomOption?s("div",{staticClass:"zoom_options"},[s("div",{staticClass:"zoom_opt",on:{click:function(e){return t.zoomView(50)}}},[t._v("50%")]),s("div",{staticClass:"zoom_opt",on:{click:function(e){return t.zoomView(100)}}},[t._v("100%")]),s("div",{staticClass:"zoom_opt",on:{click:function(e){return t.zoomView(200)}}},[t._v("200%")])]):t._e()]),s("div",{staticClass:"control_btn delete_control",on:{click:function(e){return t.deletedSelected()}}},[s("i",{staticClass:"iconfont"},[t._v("")]),s("div",{staticClass:"btn_name"},[t._v("删除")])]),t.colorControl?s("div",{staticClass:"control_btn color_control_wrapper",on:{click:function(e){return t.showChild(1)}}},[s("div",{staticClass:"color_circle outside_color",class:t.isWhite?"white_color_circle":""}),s("div",{staticClass:"btn_name"},[t._v("颜色")]),t.showColorOption?s("div",{staticClass:"color_wrapper"},[s("div",{staticClass:"color_control yellow_control",on:{click:function(e){return t.changeCurrentColor(1)}}},[s("div",{staticClass:"color_circle"})]),s("div",{staticClass:"color_control white_control",on:{click:function(e){return t.changeCurrentColor(0)}}},[s("div",{staticClass:"color_circle"})])]):t._e()]):t._e()]):t._e()])]),s("div",{staticClass:"save_name_module_bg"}),s("div",{staticClass:"save_name_module"},[s("div",{staticClass:"save_name_title"},[t._v("命名")]),s("div",{staticClass:"save_name_tip"},[t._v("模型还没有名字，取个名字吧")]),s("input",{attrs:{type:"text",placeholder:"请输入模型名称",maxlength:"14",id:"save_name",oninput:"saveModuleName(this,'oninput')",onblur:"saveModuleName(this,'onblur')",onFocus:"saveModuleName(this,'onFocus')",onkeyup:"this.value=this.value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5]/g ,'')",blur:"saveModuleName(this,'blur')"}}),s("div",{staticClass:"save_name_verify"},[t._v("请输入模型名称")]),s("div",{staticClass:"btn_wrapper clearfix"},[s("img",{staticClass:"save_name_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_yes1.png"},on:{click:function(e){return t.exportMoudle(0)}}}),s("img",{staticClass:"imgBtn save_name_cancle",attrs:{src:"/image/3dBuilder/3dPrinting/btn_close.png"},on:{click:function(e){return t.saveModuleShow(1)}}})])]),s("div",{staticClass:"save_ask"},[s("div",{staticClass:"save_name_title"},[t._v("提示")]),s("div",{staticClass:"save_name_tip"},[t._v(" 模型进度还没有保存哦，此时离开会丢失进度，是否保存？ ")]),s("div",{staticClass:"btn_wrapper clearfix"},[s("img",{staticClass:"go_home_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_no.png"},on:{click:function(e){return t.goHomeSaveModule(0)}}}),s("img",{staticClass:"go_home_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_yes.png"},on:{click:function(e){return t.goHomeSaveModule(1)}}}),s("img",{staticClass:"imgBtn save_name_cancle",attrs:{src:"/image/3dBuilder/3dPrinting/btn_close.png"},on:{click:function(e){return t.hideGoHome()}}})])]),t._m(5),t.showTextWindow?s("div",{staticClass:"text_window"},[s("div",{staticClass:"text_title"},[t._v("生成3D文字")]),s("input",{attrs:{type:"text",placeholder:"请输入文字",maxlength:"10",id:"textContent"},on:{input:t.textInputFn,blur:t.textInputFn}}),s("div",{staticClass:"btn_wrapper clearfix"},[s("div",{staticClass:"btns btn_ok text_ok",class:t.inputCanConfirm?"":"btn_disable",on:{click:function(e){t.inputCanConfirm&&t.insertWord()}}},[t._v("确定")]),s("div",{staticClass:"btns btn_cancle text_cancle",on:{click:function(e){return t.showInput(1)}}},[t._v("取消")])])]):t._e(),t.controlType?s("div",{staticClass:"control_type",domProps:{textContent:t._s(t.statusTxt)}},[t._v("当前状态: 移动")]):t._e(),t.showLoading?s("div",{class:t.showMore?"hideShowMore":"",attrs:{id:"loading_data"}},[s("img",{attrs:{src:"/image/3dBuilder/loading.gif",alt:""}}),s("div",{staticClass:"processingbar"},[s("div",{staticClass:"barwidth",style:{width:t.progressingBar+"%"}})])]):t._e()])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn_child btn_home"},[s("i",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"btn_child btn_save_module"},[s("i",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"icon_wrapper"},[s("i",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"icon_wrapper"},[s("i",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"icon_wrapper"},[s("i",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"note"},[s("div",{staticClass:"select_module"},[t._v("选择一个模型，点击 箭头按 "),s("span",{staticClass:"red"},[t._v("X")]),t._v(","),s("span",{staticClass:"green"},[t._v("Y")]),t._v(","),s("span",{staticClass:"blue"},[t._v("Z")]),t._v("单向缩放,点击中心方块或 者双指，进行整体 缩放 ")])])}],i=s("8ef0"),n=i["a"],r=(s("58d6"),s("2877")),c=Object(r["a"])(n,o,a,!1,null,"28fdbf60",null);e["a"]=c.exports},5319:function(t,e,s){"use strict";var o=s("d784"),a=s("825a"),i=s("7b0b"),n=s("50c4"),r=s("a691"),c=s("1d80"),l=s("8aa5"),h=s("14c3"),d=Math.max,u=Math.min,m=Math.floor,p=/\$([$&'`]|\d\d?|<[^>]*>)/g,_=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};o("replace",2,(function(t,e,s,o){var v=o.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,f=o.REPLACE_KEEPS_$0,b=v?"$":"$0";return[function(s,o){var a=c(this),i=void 0==s?void 0:s[t];return void 0!==i?i.call(s,a,o):e.call(String(a),s,o)},function(t,o){if(!v&&f||"string"===typeof o&&-1===o.indexOf(b)){var i=s(e,t,this,o);if(i.done)return i.value}var c=a(t),m=String(this),p="function"===typeof o;p||(o=String(o));var _=c.global;if(_){var S=c.unicode;c.lastIndex=0}var O=[];while(1){var w=h(c,m);if(null===w)break;if(O.push(w),!_)break;var j=String(w[0]);""===j&&(c.lastIndex=l(m,n(c.lastIndex),S))}for(var I="",E=0,T=0;T<O.length;T++){w=O[T];for(var A=String(w[0]),x=d(u(r(w.index),m.length),0),y=[],D=1;D<w.length;D++)y.push(g(w[D]));var H=w.groups;if(p){var P=[A].concat(y,x,m);void 0!==H&&P.push(H);var M=String(o.apply(void 0,P))}else M=C(A,m,x,y,H,o);x>=E&&(I+=m.slice(E,x)+M,E=x+A.length)}return I+m.slice(E)}];function C(t,s,o,a,n,r){var c=o+t.length,l=a.length,h=_;return void 0!==n&&(n=i(n),h=p),e.call(r,h,(function(e,i){var r;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return s.slice(0,o);case"'":return s.slice(c);case"<":r=n[i.slice(1,-1)];break;default:var h=+i;if(0===h)return e;if(h>l){var d=m(h/10);return 0===d?e:d<=l?void 0===a[d-1]?i.charAt(1):a[d-1]+i.charAt(1):e}r=a[h-1]}return void 0===r?"":r}))}}))},"58d6":function(t,e,s){"use strict";var o=s("27d1"),a=s.n(o);a.a},"6a02":function(t,e,s){"use strict";(function(t){s("ac1f"),s("5319");var o=s("3099"),a=s("cf3d"),i=s("67ba"),n=s("4ef0");e["a"]={name:"projects",components:{topBanner:o["a"],projectTem:a["a"],threeDBuilder:i["default"],mobileThreeDBuilder:n["a"]},data:function(){return{projectsJson:{},menuArr:[],scrollingMenu:!1,activeMenuIndex:0,mobile:!1,showTD:!1,timer:""}},methods:{getProject:function(){var t="/mock/projects.json",e=this.$i18n.locale;"zh_cn"==e&&(t="/mock/projectsCN.json"),this.$ajax.get(t).then(this.getProjectSucc).catch((function(t){console.log("error:"+t)}))},getProjectSucc:function(t){if(console.log(t),200==t.data.code){var e=t.data.data;for(var s in this.projectsJson=e,e)this.menuArr.push(s)}},jumpToRelate:function(e,s){t("html,body").scrollTop(t("#"+e).offset().top),this.activeMenuIndex=s,this.menuScroll()},menuScroll:function(){var e=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset,s=t(".animation_menu").height(),o=t(".project_main").offset().top,a=o+t(".project_wrapper").height();if(e>=o&&e<=a-s){this.scrollingMenu=!0;var i=this.menuArr;for(var n in i){var r=t("#"+i[n].replace(/ /g,"")).offset().top;e>=r&&(this.activeMenuIndex=n)}t(".scrollMenu").css("top",e-o+40)}else e<o&&(this.scrollingMenu=!1,this.activeMenuIndex=0,t(".animation_menu").css("top","50px"))},showThreeD:function(){this.timer=(new Date).getTime(),this.showTD=!this.showTD}},mounted:function(){this.getProject(),window.addEventListener("scroll",this.menuScroll),this.mobile=/Android|webOS|iPhone|iPad|BlackBerry/i.test(navigator.userAgent)},destroyed:function(){window.addEventListener("scroll",this.menuScroll)}}}).call(this,s("1157"))},"813b":function(t,e,s){"use strict";var o=s("1421"),a=s.n(o);a.a},8320:function(t,e,s){"use strict";var o=s("1d5a"),a=s.n(o);a.a},"8ef0":function(t,e,s){"use strict";(function(t){s("7db0"),s("c975"),s("a434"),s("b0c0"),s("a9e3"),s("d3b7"),s("ddb0"),s("bf19"),s("96cf");var o=s("1da1"),a=(s("fd22"),s("5a89")),i=s("4721"),n=s("518e"),r=s("1fae");e["a"]={name:"ThreeDimensionalBuilder",data:function(){return{mobile:!1,WORK_SPACE_SIZE:200,CONTAIN_WIDTH:null,CONTAIN_HEIGHT:null,SHAPE_SIZE:20,LIMIT_SIZE:4,renderer:null,camera:null,cameraZoom:1,scene:null,plane:null,objects:[],shapesObj:[],gridHelper:null,gradGroundMesh:null,mouseHelper:null,mouseHelperMaterial:null,focusedTransformObj:null,deleteObjFlag:null,gradGroundMesh1:null,composer:null,renderPass:null,outlinePass:null,effectFXAA:null,controls:null,transformControl:null,container:null,orientationContr:null,controlsMoved:!1,shapesEventL:null,shapesMain:null,showMore:!0,showZoomOption:!1,showColorOption:!1,isWhite:!0,colorControl:!0,selectedDragObj:null,selectedDragObjFlag:null,dragObj:null,dragedFlag:null,maxW:null,maxH:null,movedDir:null,shapesList:[],cartoonStlList:[],shapesListShow:!1,cartoonStlShow:!1,controlBar:!1,redoActive:!1,undoActive:!1,stlGeoFlag:null,showTextWindow:!1,currentObj:null,textInput:"",textInput1:"",fontLoader:null,wordFont:null,wordColor:14540253,shootedFlag:!1,currentObjMesh:null,currentObjMaterial:null,currentModule:0,transformDragFlag:!1,twoPointTouchFlag:!1,mouse:null,raycaster:null,isShiftDown:!1,saveFlag:!1,activeSave:!1,allOperation:[],eachObjectInfo:{},eachRedoObjectInfo:{},redoOperation:[],selectedObjects:[],statusTxt:null,controlType:null,textTR:"当前状态:移动",textSC:"当前状态:改变大小",textRO:"当前状态:旋转",transformControlModeType:1,intersectsSelect:[],intersection:{intersects:!1,point:new a["W"],normal:new a["W"]},tcScale:null,tcScaleYPosition:null,tcScaleY:null,tcScaleYPositionFlag:null,tcX:null,tcY:null,tcZ:null,showLoading:!1,progressingBar:0,inputCanConfirm:!1}},methods:{init:function(){var t=this;t.container=document.getElementById("container"),t.renderer=new a["X"]({antialias:!0,alpha:!0}),t.renderer.setPixelRatio(window.devicePixelRatio?window.devicePixelRatio:1),t.renderer.setSize(t.CONTAIN_WIDTH,t.CONTAIN_HEIGHT),t.renderer.shadowMap.enabled=!0,t.renderer.autoClear=!1,t.renderer.setClearColor(0,0),t.container.appendChild(t.renderer.domElement),t.camera=new a["H"](45,t.CONTAIN_WIDTH/t.CONTAIN_HEIGHT,1,1e4),t.camera.position.set(170,145,255),t.camera.lookAt(0,0,0),t.scene=new a["M"];var e=new a["I"](t.WORK_SPACE_SIZE,t.WORK_SPACE_SIZE);e.rotateX(-Math.PI/2),t.plane=new a["y"](e,new a["z"]({color:15066335,visible:!0})),t.plane.name="plane",t.plane.receiveShadow=!0,t.plane.castShadow=!0,t.scene.add(t.plane),t.objects.push(t.plane),t.raycaster=new a["K"],t.mouse=new a["V"],t.grads();var s=new a["a"](6316128,1);t.scene.add(s);var o=new a["h"](16777215,1.3);o.position.set(1,.75,.5).normalize(),t.scene.add(o),t.orbitCont(),t.transformCont(),t.animate(),t.onWindowResize()},grads:function(){this.gridHelper=new a["r"](this.WORK_SPACE_SIZE,20,10066329,211392921),this.gridHelper.name="GridHelper",this.scene.add(this.gridHelper),this.gradGroundMesh=new a["y"](new a["b"](this.WORK_SPACE_SIZE,.8,this.WORK_SPACE_SIZE),new a["A"]({color:16777215})),this.gradGroundMesh.position.y=-.8,this.gradGroundMesh.name="GridHelper",this.gradGroundMesh.receiveShadow=!0,this.gradGroundMesh.castShadow=!0,this.scene.add(this.gradGroundMesh),this.gradGroundMesh1=new a["y"](new a["b"](this.WORK_SPACE_SIZE,3,this.WORK_SPACE_SIZE),new a["A"]({color:16762985})),this.gradGroundMesh1.position.y=-2.5,this.gradGroundMesh1.name="GridHelper",this.gradGroundMesh1.receiveShadow=!0,this.gradGroundMesh1.castShadow=!0,this.scene.add(this.gradGroundMesh1)},outline:function(){this.composer=new a["EffectComposer"](this.renderer);var t=new a["RenderPass"](this.scene,this.camera);this.composer.addPass(t),this.outlinePass=new a["OutlinePass"](new a["V"](this.CONTAIN_WIDTH-100,this.CONTAIN_HEIGHT),this.scene,this.camera),this.outlinePass.edgeStrength=4,this.outlinePass.edgeThickness=1,this.outlinePass.visibleEdgeColor.set("#00ff00"),this.outlinePass.hiddenEdgeColor.set("#00ff00"),this.outlinePass.edgeGlow=1,this.composer.addPass(this.outlinePass),this.effectFXAA=new a["ShaderPass"](a["FXAAShader"]),this.effectFXAA.uniforms["resolution"].value.set(1/this.CONTAIN_WIDTH,1/this.CONTAIN_HEIGHT)},orbitCont:function(){var t=this;t.controls=new i["a"](t.camera,t.renderer.domElement),t.controls.minDistance=10,t.controls.maxDistance=1300,t.controls.enableKeys=!0,t.controls.rotateSpeed=.3,t.controls.keys={LEFT:65,UP:87,RIGHT:68,BOTTOM:83},t.controls.enablePan=!1,t.controls.enableZoom=!1,t.controls.addEventListener("change",(function(){t.controlsMoved=!0,t.objects.length>1&&t.camera.position.y<0?(t.clearCache(t.gridHelper),t.scene.remove(t.gridHelper),t.clearCache(t.gradGroundMesh),t.scene.remove(t.gradGroundMesh),t.clearCache(t.gradGroundMesh1),t.scene.remove(t.gradGroundMesh1)):(t.clearCache(t.gridHelper),t.scene.remove(t.gridHelper),t.clearCache(t.gradGroundMesh),t.scene.remove(t.gradGroundMesh),t.clearCache(t.gradGroundMesh1),t.scene.remove(t.gradGroundMesh1),t.scene.add(t.gridHelper),t.scene.add(t.gradGroundMesh),t.scene.add(t.gradGroundMesh1))}))},transformCont:function(){var t=this;t.transformControl=new r["a"](this.camera,this.renderer.domElement),t.transformControl.name="transformControl",t.transformControl.size=1.5,t.scene.add(t.transformControl),t.transformControl.addEventListener("dragging-changed",(function(e){t.controls&&(t.controls.enabled=!e.value,t.transformDragFlag=!e.value)}),!1),t.transformControl.addEventListener("change",(function(){t.shootedFlag&&t.shapesController(0),t.showCurrentColor(),t.onAnimationStep()}),!1),t.transformControl.addEventListener("mouseDown",(function(){t.transformControlMove=!1,t.checkScalePosition(t.transformControl.object)}),!1),t.transformControl.addEventListener("objectChange",(function(){t.transformControlMove=!0}),!1),t.transformControl.addEventListener("mouseUp",(function(){t.transformControlMove&&t.allOperationAdd(),t.showCurrentColor(),window.focusedTransformObj&&(t.transformControl.object=window.focusedTransformObj)}),!1)},containerListenner:function(){this.showColorOption=!1,this.showZoomOption=!1,this.onDocumentMouseDown(event)},containerMouseDown:function(){var t=this;t.controlsMoved=!1,t.showColorOption=!1,t.showZoomOption=!1,t.controls.enabled=t.transformDragFlag,t.twoPointTouchFlag=!1,t.touchScale=""},containerMouseMove:function(){},containerMouseUp:function(){this.transformControl.object&&(window.focusedTransformObj=this.transformControl.object),this.controlsMoved||this.transformControlMove||setTimeout((function(){this.onDocumentMouseDown(event)}),100),this.tcScaleYPosition="",this.tcScaleYPositionFlag="",this.tcScaleY="",this.tcX="",this.tcY="",this.tcZ="",this.transformControlMove=!1},orientationCont:function(){this.orientationContr=new a["OrientationControls"](50),document.body.appendChild(this.orientationContr.element),this.orientationContr.element.addEventListener("click",(function(t){switch(t.target.id){case"front":this.camera.position.set(0,0,300);break;case"back":this.camera.position.set(0,0,-300);break;case"top":this.camera.position.set(0,300,0);break;case"bottom":this.camera.position.set(0,-300,0);break;case"left":this.camera.position.set(-300,0,0);break;case"right":this.camera.position.set(300,0,0);break}this.camera.lookAt(this.scene.position),this.camera.updateProjectionMatrix()}))},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},onWindowResize:function(){this.showMore?(this.camera.aspect=(this.CONTAIN_WIDTH-100)/this.CONTAIN_HEIGHT,this.renderer.setSize(this.CONTAIN_WIDTH-100,this.CONTAIN_HEIGHT)):(this.camera.aspect=this.CONTAIN_WIDTH/this.CONTAIN_HEIGHT,this.renderer.setSize(this.CONTAIN_WIDTH,this.CONTAIN_HEIGHT)),this.camera.updateProjectionMatrix()},clearCache:function(t){t.geometry.dispose(),t.material.dispose()},render:function(){this.renderer.render(this.scene,this.camera)},listModule:function(){var t="/mock/moduleList.json";this.$ajax.get(t).then(this.listModuleSucc).catch((function(t){console.log("error:"+t)}))},listModuleSucc:function(t){t&&t.data&&(this.shapesList=t.data.data.shapes,this.cartoonStlList=t.data.data.stl)},showModule:function(t){0==t?(this.shapesListShow=!0,this.cartoonStlShow=!1):1==t&&(this.shapesListShow=!1,this.cartoonStlShow=!0)},hideModule:function(){this.shapesListShow=!1,this.cartoonStlShow=!1},showMoreFn:function(){this.showMore?this.showMore=!1:this.showMore=!0,this.onWindowResize()},dropOffListerner:function(){console.log("dropOffListerner");var e=this;e.shapesMain.addEventListener("touchstart",(function(){e.showColorOption=!1,e.showColorOption=!1})),e.shapesEventL.addEventListener("touchstart",(function(s){e.showColorOption=!1,e.showColorOption=!1,e.selectedDragObj=t(s.target),e.selectedDragObj.hasClass("drag")&&(t(".active_shape").removeClass("active_shape"),e.selectedDragObj.hasClass("name")?(e.dragObj=t(e.selectedDragObj).parents(".module").find(".sprint").clone(),t(e.selectedDragObj).parents(".module").addClass("active_shape"),e.selectedDragObjFlag=!0):e.selectedDragObj.hasClass("sprint")?(e.dragObj=e.selectedDragObj.clone(),t(e.selectedDragObj).parents(".module").addClass("active_shape"),e.selectedDragObjFlag=!0):e.selectedDragObj.hasClass("module")&&(e.dragObj=t(e.selectedDragObj).find(".sprint").clone(),t(e.selectedDragObj).addClass("active_shape"),e.selectedDragObjFlag=!1),e.dragObj.addClass("startDrag"),e.maxW=t(".builder .main_wrapper").width()-e.selectedDragObj[0].offsetWidth,e.maxH=t(".builder .main_wrapper").height()-e.selectedDragObj[0].offsetHeight)}),!1),e.shapesEventL.addEventListener("touchmove",(function(s){e.dragedFlag=!0;var o=s||window.event,a=o.targetTouches[0],i=window.innerWidth;if(e.movedDir=i-a.clientX,e.dragObj&&e.movedDir>100){t("body").append(e.dragObj);var n=a.clientX-50,r=a.clientY-50;n<0?n=0:n>=e.maxW&&(n=e.maxW),r<0||r>=e.maxH&&(r=e.maxH),e.dragObj[0].style.left=n+25+"px",e.dragObj[0].style.top=r+"px"}}),!1),e.shapesEventL.addEventListener("touchend",(function(s){var o,a,i;e.dragObj&&e.dragedFlag&&e.movedDir>100?(e.selectedDragObjFlag?(o=Number(t(e.selectedDragObj).parents(".module").find(".this_code").val()),a=Number(t(e.selectedDragObj).parents(".module").find(".this_module").val()),i=Number(t(e.selectedDragObj).parents(".module").find(".this_url").val())):0==e.selectedDragObjFlag&&(o=Number(t(e.selectedDragObj).find(".this_code").val()),a=Number(t(e.selectedDragObj).find(".this_module").val()),i=Number(t(e.selectedDragObj).find(".this_url").val())),0==a?e.changeShapes(o):1==a?e.loadSTL(o):2==a?e.showInput(0):3==a&&e.loadLocalSTL(i),t(e.dragObj).remove(),setTimeout((function(){e.onDocumentMouseDown(s)}),100)):t(e.dragObj).remove();e.dragedFlag=!1,t(".active_shape").removeClass("active_shape")}),!1),e.shapesMain.addEventListener("mousedown",(function(){e.showColorOption=!1,e.showColorOption=!1})),e.shapesEventL.addEventListener("mousedown",(function(s){console.log(123),e.showColorOption=!1,e.showColorOption=!1,e.selectedDragObj=t(s.target),e.selectedDragObj.hasClass("drag")&&(t(".active_shape").removeClass("active_shape"),e.selectedDragObj.hasClass("name")?(e.dragObj=t(e.selectedDragObj).parents(".module").find(".sprint").clone(),t(e.selectedDragObj).parents(".module").addClass("active_shape"),e.selectedDragObjFlag=!0):e.selectedDragObj.hasClass("sprint")?(e.dragObj=e.selectedDragObj.clone(),t(e.selectedDragObj).parents(".module").addClass("active_shape"),e.selectedDragObjFlag=!0):e.selectedDragObj.hasClass("module")&&(e.dragObj=t(e.selectedDragObj).find(".sprint").clone(),t(e.selectedDragObj).addClass("active_shape"),e.selectedDragObjFlag=!1),e.dragObj.addClass("startDrag"),e.maxW=t(".builder .main_wrapper").width()-e.selectedDragObj[0].offsetWidth,e.maxH=t(".builder .main_wrapper").height()-e.selectedDragObj[0].offsetHeight)}),!1),e.shapesEventL.addEventListener("mousemove",(function(s){e.dragedFlag=!0;var o=s||window.event,a=o.targetTouches[0],i=window.innerWidth;if(e.movedDir=i-a.clientX,e.dragObj&&e.movedDir>100){t("body").append(e.dragObj);var n=a.clientX-50,r=a.clientY-50;n<0?n=0:n>=e.maxW&&(n=e.maxW),r<0||r>=e.maxH&&(r=e.maxH),e.dragObj[0].style.left=n+25+"px",e.dragObj[0].style.top=r+"px"}}),!1),e.shapesEventL.addEventListener("mouseup",(function(s){var o,a,i;e.dragObj&&e.dragedFlag&&e.movedDir>100?(e.selectedDragObjFlag?(o=Number(t(e.selectedDragObj).parents(".module").find(".this_code").val()),a=Number(t(e.selectedDragObj).parents(".module").find(".this_module").val()),i=Number(t(e.selectedDragObj).parents(".module").find(".this_url").val())):0==e.selectedDragObjFlag&&(o=Number(t(e.selectedDragObj).find(".this_code").val()),a=Number(t(e.selectedDragObj).find(".this_module").val()),i=Number(t(e.selectedDragObj).find(".this_url").val())),0==a?e.changeShapes(o):1==a?e.loadSTL(o):2==a?e.showInput(0):3==a&&e.loadLocalSTL(i),t(e.dragObj).remove(),setTimeout((function(){e.onDocumentMouseDown(s)}),100)):t(e.dragObj).remove();e.dragedFlag=!1,t(".active_shape").removeClass("active_shape")}),!1)},dragImg:function(e){var s=this;s.showColorOption=!1,s.showColorOption=!1,s.selectedDragObj=t(e.target),s.selectedDragObj.hasClass("drag")&&(t(".active_shape").removeClass("active_shape"),s.selectedDragObj.hasClass("name")?(s.dragObj=t(s.selectedDragObj).parents(".module").find(".sprint").clone(),t(s.selectedDragObj).parents(".module").addClass("active_shape"),s.selectedDragObjFlag=!0):s.selectedDragObj.hasClass("sprint")?(s.dragObj=s.selectedDragObj.clone(),t(s.selectedDragObj).parents(".module").addClass("active_shape"),s.selectedDragObjFlag=!0):s.selectedDragObj.hasClass("module")&&(s.dragObj=t(s.selectedDragObj).find(".sprint").clone(),t(s.selectedDragObj).addClass("active_shape"),s.selectedDragObjFlag=!1),s.dragObj.addClass("startDrag"),s.maxW=t(".builder .main_wrapper").width()-s.selectedDragObj[0].offsetWidth,s.maxH=t(".builder .main_wrapper").height()-s.selectedDragObj[0].offsetHeight,console.log())},moveImg:function(e){var s=this;s.dragedFlag=!0;var o=e||window.event,a=s.CONTAIN_WIDTH;if(s.movedDir=a-o.clientX,console.log("123"),s.dragObj&&s.movedDir<100){t("body").append(s.dragObj);var i=o.clientX-50,n=o.clientY-50;i<0?i=0:i>=s.maxW&&(i=s.maxW),n<0||n>=s.maxH&&(n=s.maxH),s.dragObj[0].style.left=i+25+"px",s.dragObj[0].style.top=n+"px"}},upImg:function(e){var s,o,a,i=this;i.dragObj&&i.dragedFlag&&i.movedDir>100?(i.selectedDragObjFlag?(s=Number(t(i.selectedDragObj).parents(".module").find(".this_code").val()),o=Number(t(i.selectedDragObj).parents(".module").find(".this_module").val()),a=Number(t(i.selectedDragObj).parents(".module").find(".this_url").val())):0==i.selectedDragObjFlag&&(s=Number(t(i.selectedDragObj).find(".this_code").val()),o=Number(t(i.selectedDragObj).find(".this_module").val()),a=Number(t(i.selectedDragObj).find(".this_url").val())),0==o?i.changeShapes(s):1==o?i.loadSTL(s):2==o?i.showInput(0):3==o&&i.loadLocalSTL(a),t(i.dragObj).remove(),setTimeout((function(){i.onDocumentMouseDown(e)}),100)):t(i.dragObj).remove();i.dragedFlag=!1,t(".active_shape").removeClass("active_shape")},selectModule:function(e,s,o,a){var i;console.log("selectModule::"+a),0==e&&"text"==a?e=2:0==e&&"stl"==a&&(e=1),t(".active_shape").removeClass("active_shape"),0==e?(i=t(".normal_wrapper").find(".module:eq("+o+")"),this.stlGeoFlag=0,this.changeShapes(s)):1==e?(i=t(".cartoon_wrapper").find(".module:eq("+o+")"),this.stlGeoFlag=1,this.loadSTL(s,i)):2==e&&(i=t(".normal_wrapper").find(".module:eq("+o+")"),this.stlGeoFlag=1,this.showInput(0)),i.addClass("active_shape")},showChild:function(t){1==t?this.showColorOption=!0:0==t&&(this.showZoomOption=!0)},zoomView:function(t){this.cameraZoom&&(this.cameraZoom=t/100,this.camera.zoom=this.cameraZoom,this.camera.lookAt(this.scene.position),this.camera.updateProjectionMatrix())},changeShapes:function(t){switch(this.stlGeoFlag=0,this.showInput(1),this.currentModule=0,this.shootedFlag=!1,t){case 0:this.currentObj=new a["b"](this.SHAPE_SIZE,this.SHAPE_SIZE,this.SHAPE_SIZE);break;case 1:this.currentObj=new a["g"](this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,32);break;case 2:this.currentObj=new a["f"](this.SHAPE_SIZE/2,this.SHAPE_SIZE,32);break;case 3:this.currentObj=new a["P"](this.SHAPE_SIZE/2,32,32);break;case 4:this.currentObj=new a["U"](10,2.5,16,100);break;case 5:this.currentObj=new a["g"](this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,5);break;case 6:this.currentObj=new a["f"](this.SHAPE_SIZE/2,this.SHAPE_SIZE,4);break;case 7:var e=this.SHAPE_SIZE/2,s=this.SHAPE_SIZE/3,o=this.SHAPE_SIZE,i=new a["O"];i.moveTo(2*e,e),i.absarc(e,e,e,0,2*Math.PI,!1);var n=new a["G"];n.moveTo(e+s,e),n.absarc(e,e,s,0,2*Math.PI,!0),i.holes.push(n);var r=new a["m"](i,{amount:o,bevelEnabled:!1,steps:1,curveSegments:60});r.center(),r.rotateX(-.5*Math.PI),this.currentObj=r;break;case 8:this.currentObj=new a["g"](this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,3);break;default:this.currentObj=new a["b"](this.SHAPE_SIZE,this.SHAPE_SIZE,this.SHAPE_SIZE)}this.currentObjMesh=new a["y"](this.currentObj,this.currentObjMaterial)},showInput:function(t){0===t?(this.currentObj=null,this.showTextWindow=!0):(this.showTextWindow=!1,this.inputCanConfirm=!1,this.textInput="")},textInputFn:function(e){var s=e.target;this.textInput=t(s).val();var o=t(s).val().length;this.inputCanConfirm=o>0},insertWord:function(){var t=this;t.showLoading=!0,t.showInput(1),this.fontLoader.load("/font/SimHei_Regular.json",(function(e){t.wordFont=e,t.createText(),t.showLoading=!1}),(function(e){t.progressingBar=e.loaded/e.total*100}),(function(t){console.log("An error happened :"+t)}))},createText:function(){var t,e,s,o=this.textInput1,i=this,n=o;switch(n.length){case 3:s=50;break;case 4:s=45;break;case 5:s=40;break;case 6:s=35;break;case 7:s=30;break;default:s=20}var r=new a["S"](n,{font:i.wordFont,size:s,height:10,curveSegments:22,bevelEnabled:!1});r.computeBoundingBox(),r.computeVertexNormals();var c=(new a["d"]).fromGeometry(r);c.computeBoundingBox(),t=-.5*(c.boundingBox.max.x-c.boundingBox.min.x),c.translate(t,-25,0),c.rotateX(-Math.PI/2);var l=new a["B"]({color:i.wordColor,flatShading:!0});e=new a["y"](c,l),e.name="shapes",e.receiveShadow=!0,e.castShadow=!0,i.scene.add(e),i.objects.push(e),i.shapesObj.push(e),this.undoActive=!0,i.activeSave=!0,i.transformControl.object=e,i.focusedTransformObj=i.transformControl.object,console.log(e),i.cleanSelectedObject(e),i.createObjForOperation(e,"add"),i.eachObjSetps(e,0),i.shapesController(),i.transformControl.attach(i.focusedTransformObj),i.resetSomeThing()},loadSTL:function(e,s){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function o(){var i,r,c;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:i=a,i.showInput(1),t(".active_shape").removeClass("active_shape"),t(s).addClass("active_shape"),i.currentModule=0,i.showLoading=!0,i.shootedFlag=!1,o.t0=e,o.next=0===o.t0?10:1===o.t0?12:2===o.t0?14:3===o.t0?16:4===o.t0?18:5===o.t0?20:6===o.t0?22:7===o.t0?24:8===o.t0?26:9===o.t0?28:10===o.t0?30:11===o.t0?32:34;break;case 10:return r="/models/stl/ascii/standing.stl",o.abrupt("break",35);case 12:return r="/models/stl/ascii/climbing.stl",o.abrupt("break",35);case 14:return r="/models/stl/ascii/lying.stl",o.abrupt("break",35);case 16:return r="/models/stl/ascii/sitting.stl",o.abrupt("break",35);case 18:return r="/models/stl/ascii/tyrannosaurusRex.stl",o.abrupt("break",35);case 20:return r="/models/stl/ascii/pokemon/bulbasaur_starter_1gen_flowalistik.stl",o.abrupt("break",35);case 22:return r="/models/stl/ascii/pokemon/charmander_starter_1gen_flowalistik.stl",o.abrupt("break",35);case 24:return r="/models/stl/ascii/pokemon/chikorita_starter_2gen_flowalistik.stl",o.abrupt("break",35);case 26:return r="/models/stl/ascii/pokemon/pikachu_1gen_flowalistik.stl",o.abrupt("break",35);case 28:return r="/models/stl/ascii/pokemon/squirtle_starter_1gen_flowalistik.stl",o.abrupt("break",35);case 30:return r="/models/stl/ascii/pokemon/totodile_starter_2gen_flowalistik.stl",o.abrupt("break",35);case 32:return r="/models/stl/ascii/five-point-star.stl",o.abrupt("break",35);case 34:r="/models/stl/ascii/tyrannosaurusRex.stl";case 35:return c=new n["a"],o.next=38,c.load(r,(function(t){i.currentObj=t,i.showLoading=!1}),(function(t){i.progressingBar=t.loaded/t.total*100}));case 38:case"end":return o.stop()}}),o)})))()},onDocumentMouseDown:function(){if(this.shootedFlag)this.checkIntersection(event);else{event.preventDefault();var t=!this.showMore,e=null;t?"touchend"==event.type?(e=event.changedTouches[0],this.mouse.set(e.clientX/this.CONTAIN_WIDTH*2-1,-e.clientY/this.CONTAIN_HEIGHT*2+1)):this.mouse.set(event.clientX/this.CONTAIN_WIDTH*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1):"touchend"==event.type?(e=event.changedTouches[0],this.mouse.set(e.clientX/(this.CONTAIN_WIDTH-100)*2-1,-e.clientY/this.CONTAIN_HEIGHT*2+1)):this.mouse.set(event.clientX/(this.CONTAIN_WIDTH-100)*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1),this.raycaster.setFromCamera(this.mouse,this.camera);var s=this.raycaster.intersectObjects(this.objects);if(s.length>0){var o=s[0];if(this.isShiftDown)o.object!==this.plane&&(this.scene.remove(o.object),this.objects.splice(this.objects.indexOf(o.object),1));else if(this.currentObj){var i=this.currentObjMaterial.clone(),n=new a["y"](this.currentObj,i);n.position.copy(o.point).add(o.face.normal),0==this.stlGeoFlag?(n.position.divideScalar(this.SHAPE_SIZE).floor().multiplyScalar(this.SHAPE_SIZE).addScalar(this.SHAPE_SIZE/2),n.name="shapes"):1==this.stlGeoFlag?(n.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25),n.name="stl"):2==this.stlGeoFlag&&(n.position.divideScalar(50).floor().multiplyScalar(50),n.name="stlLocal",n.rotation.set(-Math.PI/2,0,0)),n.receiveShadow=!0,n.castShadow=!0,this.scene.add(n),this.objects.push(n),this.shapesObj.push(n),this.undoActive=!0,this.activeSave=!0,this.createObjForOperation(n,"add"),this.eachObjSetps(n,0),this.shapesController(),this.transformControl.object=n,this.transformControl.attach(this.transformControl.object),this.cleanSelectedObject(n),this.showCurrentColor(),this.resetSomeThing()}this.shootedFlag=!0,this.render()}}},onDocumentMouseMove:function(){event.preventDefault(),this.mouse.set(event.clientX/this.CONTAIN_WIDTH*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1),this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.objects);if(t.length>0){var e=t[0];this.mouseHelper.position.copy(e.point).add(e.face.normal),this.mouseHelper.position.divideScalar(this.SHAPE_SIZE).floor().multiplyScalar(this.SHAPE_SIZE).addScalar(this.SHAPE_SIZE/2)}this.render()},createObjForOperation:function(t,e){window.deleteObjFlag=!1,this.saveFlag=!1,this.allOperation.length>=5&&this.allOperation.shift();var s={};s["uuid"]=t.uuid,s["position"]=t.position.clone(),s["rotation"]=t.rotation.clone(),s["quaternion"]=t.quaternion.clone(),s["scale"]=t.scale.clone(),s["color"]=t.material.color.clone(),s["operation"]=e,s["mesh"]=t,this.allOperation.push(s)},eachObjSetps:function(t,e){var s,o={};0===e?(this.eachObjectInfo[t.uuid]||(this.eachObjectInfo[t.uuid]=[]),o["uuid"]=t.uuid,o["position"]=t.position.clone(),o["rotation"]=t.rotation.clone(),o["quaternion"]=t.quaternion.clone(),o["scale"]=t.scale.clone(),o["color"]=t.material.color.clone(),o["mesh"]=t,o["time"]=Date.parse(new Date),this.eachObjectInfo[t.uuid].length?o["index"]=this.eachObjectInfo[t.uuid].length:o["index"]=0,s=this.eachObjectInfo[t.uuid],s.push(o)):2===e?(this.eachObjectInfo[t.uuid]||(this.eachObjectInfo[t.uuid]=[]),o["uuid"]=t.uuid,o["position"]=t.position.clone(),o["rotation"]=t.rotation.clone(),o["quaternion"]=t.quaternion.clone(),o["scale"]=t.scale.clone(),o["color"]=t.color.clone(),o["mesh"]=t.mesh,o["time"]=Date.parse(new Date),this.eachObjectInfo[t.uuid].length?o["index"]=this.eachObjectInfo[t.uuid].length:o["index"]=0,s=this.eachObjectInfo[t.uuid],s.push(o)):1===e&&(this.eachRedoObjectInfo[t.uuid]||(this.eachRedoObjectInfo[t.uuid]=[]),o["uuid"]=t.uuid,o["position"]=t.position.clone(),o["rotation"]=t.rotation.clone(),o["quaternion"]=t.quaternion.clone(),o["scale"]=t.scale.clone(),o["color"]=t.color.clone(),o["mesh"]=t.mesh,o["time"]=Date.parse(new Date),s=this.eachRedoObjectInfo[t.uuid],s.push(o))},shapesController:function(){this.showMore&&t(".obj_control").css({width:this.CONTAIN_WIDTH-100}),this.controlBar=!0},addSelectedObject:function(t){this.selectedObjects=[],this.selectedObjects.push(t)},cleanSelectedObject:function(t){t&&this.addSelectedObject(t)},showCurrentColor:function(){if(this.isWhite=!1,this.transformControl.object){var t=this.transformControl.object.material.color.toJSON();switch(this.isWhite="14540253"==t,this.cleanSelectedObject(this.transformControl.object),this.transformControlModeType){case 0:this.statusTxt=this.textSC;break;case 1:this.statusTxt=this.textTR;break;case 2:this.statusTxt=this.textRO;break}this.controlType=!0}else this.controlType=!1},resetSomeThing:function(){t(".active_shape").removeClass("active_shape"),this.currentObjMaterial=new a["A"]({color:14540253})},checkIntersection:function(t){var e,s;t.changedTouches?(e=t.changedTouches[0].pageX,s=t.changedTouches[0].pageY):(e=t.clientX,s=t.clientY),this.mouse.x=e/this.CONTAIN_WIDTH*2-1,this.mouse.y=-s/this.CONTAIN_HEIGHT*2+1;var o=this.showMore;if(o&&(this.mouse.x=e/(this.CONTAIN_WIDTH-100)*2-1,this.mouse.y=-s/this.CONTAIN_HEIGHT*2+1),this.plane){var a;if(this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.intersectObject(this.plane,!1,this.intersectsSelect),this.intersectsSelect.length>0){var i=this.intersectsSelect[0].point;this.intersection.point.copy(i);var n=this.intersectsSelect[0].face.normal.clone();n.transformDirection(this.plane.matrixWorld),n.multiplyScalar(10),n.add(this.intersectsSelect[0].point),this.intersection.normal.copy(this.intersectsSelect[0].face.normal),a=this.raycaster.intersectObjects(this.scene.children),a.length>1&&(!a||"shapes"!=a[0].object.name&&"stl"!=a[0].object.name&&"stlLocal"!=a[0].object.name?"plane"==a[0].object.name&&(this.transformControl.detach(),this.transformControl.attach(a[0].object)):(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(a[0].object)),this.colorControl=!0),this.intersection.intersects=!0,this.intersectsSelect.length=0}else this.intersection.intersects=!1,a=this.raycaster.intersectObjects(this.scene.children),a.length>0&&(!a||"shapes"!=a[0].object.name&&"stl"!=a[0].object.name&&"stlLocal"!=a[0].object.name?"plane"==a[0].object.name&&(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(a[0].object)):(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(a[0].object)));this.render()}},hideSelf:function(){this.$parent.showThreeD()},allOperationAdd:function(){window.focusedTransformObj&&(this.createObjForOperation(this.transformControl.object,"transform"),this.eachObjSetps(this.transformControl.object,0)),this.allOperation.length>0?this.undoActive=!0:this.undoActive=!1},checkScalePosition:function(t){this.tcScale=t.scale.clone(),this.tcScaleYPosition=t.position.clone().y,this.tcScaleY=t.scale.clone().y,"shapes"==t.name?this.tcScaleYPosition==this.SHAPE_SIZE*t.scale.y/2?this.tcScaleYPositionFlag=!0:this.tcScaleYPositionFlag=!1:"stl"==t.name&&(this.tcScaleYPosition==t.geometry.boundingSphere.radius?this.tcScaleYPositionFlag=!0:this.tcScaleYPositionFlag=!1)},onAnimationStep:function(){if(this.transformControl.object){var t=this.SHAPE_SIZE,e=this.LIMIT_SIZE,s=.1,o=this.transformControl.getMode(),a=this.transformControl.object;switch(o){case"scale":"stl"==a.name&&(this.LIMIT_SIZE=2.22),a.scale.clampScalar(s,this.LIMIT_SIZE),this.checkAxis("scale",a);break;case"translate":"X"==this.transformControl.axis?a.position.x>=0&&a.position.x+this.SHAPE_SIZE*a.scale.x/2>=this.WORK_SPACE_SIZE/2?a.position.x=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*a.scale.x/2:a.position.x<0&&a.position.x-this.SHAPE_SIZE*a.scale.x/2<=-this.WORK_SPACE_SIZE/2&&(a.position.x=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*a.scale.x/2):"Z"==this.transformControl.axis?a.position.z>=0&&a.position.z+this.SHAPE_SIZE*a.scale.z/2>=this.WORK_SPACE_SIZE/2?a.position.z=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*a.scale.z/2:a.position.z<0&&a.position.z-this.SHAPE_SIZE*a.scale.z/2<=-this.WORK_SPACE_SIZE/2&&(a.position.z=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*a.scale.z/2):"Y"==this.transformControl.axis&&(a.position.y>=0&&a.position.y+this.SHAPE_SIZE*a.scale.y/2>=this.WORK_SPACE_SIZE?a.position.y=this.WORK_SPACE_SIZE-this.SHAPE_SIZE*a.scale.y/2:"stl"==a.name?a.position.y<a.geometry.boundingSphere.radius*a.scale.y&&(a.position.y=this.SHAPE_SIZE*a.scale.y):"stlLocal"==a.name?a.position.y<0&&(a.position.y=0):a.position.y<this.SHAPE_SIZE*a.scale.y/2&&(a.position.y=this.SHAPE_SIZE*a.scale.y/2));break;case"rotate":break}this.SHAPE_SIZE=t,this.LIMIT_SIZE=e}},checkAxis:function(t,e){"scale"===t?(e.position.x>=0&&e.position.x+this.SHAPE_SIZE*e.scale.x/2>=this.WORK_SPACE_SIZE/2?e.position.x=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*e.scale.x/2:e.position.x<0&&e.position.x-this.SHAPE_SIZE*e.scale.x/2<=-this.WORK_SPACE_SIZE/2&&(e.position.x=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*e.scale.x/2),e.position.z>=0&&e.position.z+this.SHAPE_SIZE*e.scale.z/2>=this.WORK_SPACE_SIZE/2?e.position.z=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*e.scale.z/2:e.position.z<0&&e.position.z-this.SHAPE_SIZE*e.scale.z/2<=-this.WORK_SPACE_SIZE/2&&(e.position.z=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*e.scale.z/2),e.position.y>=0&&e.position.y<=this.SHAPE_SIZE*e.scale.y/2?e.position.y=this.SHAPE_SIZE*e.scale.y/2:e.position.y>=0&&this.tcScaleYPositionFlag?"stl"==e.name?e.geometry.boundingSphere&&(this.tcScaleYPosition==e.geometry.boundingSphere.radius*e.scale.y/2?e.position.y=e.geometry.boundingSphere.radius*e.scale.y:e.position.y=this.SHAPE_SIZE*e.scale.y/2):e.position.y=this.SHAPE_SIZE*e.scale.y/2:e.position.y<0&&(e.position.y=this.SHAPE_SIZE*e.scale.y/2)):"rotate"===t&&console.log("check for retate")},changeControls:function(e){if(!window.deleteObjFlag){this.showColorOption=!1,this.showZoomOption=!1;var s=event.target;switch(t(s).hasClass("control_btn")||(s=t(s).closest(".control_btn")),0==this.transformControlModeType&&0==e||1==this.transformControlModeType&&1==e||2==this.transformControlModeType&&2==e||3==this.transformControlModeType&&3==e?s.toggleClass("active_control"):(t(".active_control").removeClass("active_control"),s.addClass("active_control")),s.hasClass("active_control")?this.transformControl.attach(this.transformControl.object):this.transformControl.detach(this.transformControl.object),e){case 0:this.transformControl.setMode("scale"),this.statusTxt=this.textSC,this.transformControlModeType=0;break;case 1:this.transformControl.setMode("translate"),this.statusTxt=this.textTR,this.transformControlModeType=1;break;case 2:this.transformControl.setMode("rotate"),this.statusTxt=this.textRO,this.transformControlModeType=2;break;default:this.transformControl.setMode("translate"),this.statusTxt=this.textTR,this.transformControlModeType=1}console.log(this.transformControl.object),this.transformControl.object?this.colorControl=!0:this.colorControl=!1}},deletedSelected:function(){this.showColorOption=!1,this.showZoomOption=!1,window.focusedTransformObj&&this.transformControl.object&&(this.createObjForOperation(this.transformControl.object,"delete"),this.eachObjSetps(this.transformControl.object,0),this.scene.remove(this.transformControl.object),this.objects.splice(this.objects.indexOf(this.transformControl.object),1),t(".active_control").removeClass("active_control"),this.colorControl=!1,window.deleteObjFlag=!0),this.transformControl.detach(),this.shapesController(0),this.render(),this.objects.length>1?this.activeSave=!0:(this.activeSave=!1,this.controlBar=!1)},changeCurrentColor:function(t){this.isWhite=!1,this.transformControl.object&&(0==t?(this.transformControl.object.material.color.set("#dddddd"),this.isWhite=!0):(this.transformControl.object.material.color.set("#f2f545"),this.isWhite=!1),this.createObjForOperation(this.transformControl.object,"transform"),this.eachObjSetps(this.transformControl.object,0))},redoUndo:function(t){this.showColorOption=!1,this.showZoomOption=!1;var e=!1,s=!1,o=!1;if(0===t){if(this.allOperation.length>0){var a=this.allOperation[this.allOperation.length-1];if(this.redoOperation.push(a),"transform"===a.operation?e=!0:"delete"===a.operation?s=!0:"add"===a.operation&&(o=!0),o)a.mesh&&(this.eachObjSetps(a,1),this.scene.remove(a.mesh),this.objects.splice(this.objects.indexOf(a.mesh),1));else if(s)a.mesh&&(this.eachObjSetps(a,1),this.scene.add(a.mesh),this.objects.push(a.mesh));else if(e){var i=this.eachObjectInfo[a.uuid];i&&(i.length>1?this.redoProcess(i[i.length-2]):this.redoProcess(i[i.length-1]),this.eachObjSetps(this.eachObjectInfo[a.uuid].pop(),1))}this.allOperation.pop()}}else if(1===t&&this.redoOperation.length>0){var n=this.redoOperation[this.redoOperation.length-1];if(this.allOperation.push(n),"transform"===n.operation?e=!0:"delete"===n.operation?s=!0:"add"===n.operation&&(o=!0),o)n.mesh&&(this.eachObjSetps(n,2),this.scene.add(n.mesh),this.objects.push(n.mesh));else if(s)n.mesh&&(this.eachObjSetps(n,2),this.scene.remove(n.mesh),this.objects.splice(this.objects.indexOf(n.mesh),1));else if(e){var r=this.eachRedoObjectInfo[n.uuid];r&&(r.length>1?this.redoProcess(r[r.length-2]):this.redoProcess(r[r.length-1]),this.eachObjSetps(this.eachRedoObjectInfo[n.uuid].pop(),2))}this.redoOperation.pop()}this.transformControl.detach(),this.colorControl=!1,this.render(),this.allOperation.length>0?this.undoActive=!0:this.undoActive=!1,this.redoOperation.length>0?this.redoActive=!0:this.redoActive=!1,this.objects.length>1?this.activeSave=!0:this.activeSave=!1},redoProcess:function(t){t.mesh.position.copy(t.position),t.mesh.rotation._x=t.rotation._x,t.mesh.rotation._y=t.rotation._y,t.mesh.rotation._z=t.rotation._z,t.mesh.quaternion._x=t.quaternion._x,t.mesh.quaternion._y=t.quaternion._y,t.mesh.quaternion._z=t.quaternion._z,t.mesh.scale.set(t.scale.x,t.scale.y,t.scale.z),t.mesh.material.color.set(t.color)}},mounted:function(){this.mobile=/Android|webOS|iPhone|iPad|BlackBerry/i.test(navigator.userAgent),this.container=document.getElementById("container"),this.shapesEventL=document.getElementById("childWrapper"),this.shapesMain=document.getElementById("shapes"),this.currentObjMaterial=new a["A"]({color:14540253}),this.fontLoader=new a["q"],this.mouseHelperMaterial=this.currentObjMaterial,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight,this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,window.focusedTransformObj=this.focusedTransformObj,window.deleteObjFlag=this.deleteObjFlag,this.init(),this.listModule();var t=this;window.onresize=function(){t.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,t.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight,t.onWindowResize()}},destroyed:function(){},watch:{CONTAIN_WIDTH:function(t){t&&(this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight)},CONTAIN_HEIGHT:function(t){t&&(this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight)},focusedTransformObj:function(t){t&&(console.log("change the focusedTransformObj"),window.focusedTransformObj=this.focusedTransformObj)},textInput:function(t,e){t&&(console.log("changed textInput"),console.log("oldVal:"+e),console.log("newVal:"+t),this.textInput1=t)}}}}).call(this,s("1157"))},9095:function(t,e,s){"use strict";var o=s("a5c5"),a=s.n(o);a.a},a5c5:function(t,e,s){},c42e:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project_wrapper clearfix"},[s("div",{staticClass:"project_banner"},[s("topBanner",{attrs:{bannerImg:"/image/banner2.png",bannerContent:t.$t("projects.bannerInfo")}})],1),t.showTD&&!t.mobile?s("threeDBuilder",{key:t.timer}):t._e(),t.showTD&&t.mobile?s("mobileThreeDBuilder",{key:t.timer}):t._e(),s("div",{staticClass:"project_main clearfix"},[t._l(t.projectsJson,(function(e,o,a){return s("div",{key:a,staticClass:"each_career clearfix"},[s("h1",{staticClass:"company_name",attrs:{id:o.replace(/ /g,"")}},[s("p",{staticClass:"jobTitle"},[t._v(t._s(e.jobtitle))]),s("p",{staticClass:"jobCompany"},[t._v("-- "+t._s(e.companyName))]),s("p",{staticClass:"jobduration"},[t._v("-- "+t._s(e.startDate)+" - "+t._s(e.endDate)+" ("+t._s(e.duration)+") ")])]),t._l(e.projects,(function(e){return s("projectTem",{key:e.id,attrs:{bgImg:e.img,titleInf:e.title,desc:e.desc,tags:e.tags,link:e.url,code:e.code,showTD:t.showTD}})}))],2)})),t.mobile?t._e():s("div",{staticClass:"animation_menu",class:t.scrollingMenu?"scrollMenu":""},t._l(t.menuArr,(function(e,o){return s("div",{key:o,staticClass:"each_company_menu",class:t.activeMenuIndex==o?"active_menu":"",on:{click:function(s){t.jumpToRelate(e.replace(/ /g,""),o)}}},[t._v(t._s(e)+" ")])})),0)],2)],1)},a=[],i=s("6a02"),n=i["a"],r=(s("9095"),s("2877")),c=Object(r["a"])(n,o,a,!1,null,"01158778",null);e["default"]=c.exports},cf3d:function(t,e,s){"use strict";var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"each_content"},["3"!=t.code?s("a",{attrs:{href:t.link}},[s("div",{staticClass:"each_wrapper"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.bgImg,expression:"bgImg"}],key:t.bgImg,staticClass:"each_img",attrs:{alt:""}}),s("div",{staticClass:"info_wrapper"},[s("div",{staticClass:"thisTitle"},[t._v(t._s(t.titleInf))]),s("div",{staticClass:"thisDes"},[t._v(t._s(t.desc))]),s("div",{staticClass:"thisTags"},[s("div",{staticClass:"subTitle"},[t._v("Tags:")]),t._v(" "+t._s(t.tags)+" ")])])])]):"3"==t.code?s("div",{staticClass:"threed",on:{click:t.show3Dbuilder}},[s("div",{staticClass:"tip"},[t._v(t._s(t.$t("projects.tip")))]),s("div",{staticClass:"each_wrapper"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.bgImg,expression:"bgImg"}],key:t.bgImg,staticClass:"each_img",attrs:{alt:""}}),s("div",{staticClass:"info_wrapper"},[s("div",{staticClass:"thisTitle"},[t._v(t._s(t.titleInf))]),s("div",{staticClass:"thisDes"},[t._v(t._s(t.desc))]),s("div",{staticClass:"thisTags"},[s("div",{staticClass:"subTitle"},[t._v("Tags:")]),t._v(" "+t._s(t.tags)+" ")])])])]):t._e()])},a=[],i=(s("a9e3"),{name:"projectTem",props:{bgImg:String,titleInf:String,desc:String,tags:String,link:String,code:Number},methods:{show3Dbuilder:function(){this.$parent.showThreeD()}}}),n=i,r=(s("813b"),s("2877")),c=Object(r["a"])(n,o,a,!1,null,"79adcfe0",null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-42796594.576836f9.js.map
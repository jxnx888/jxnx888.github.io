(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-407640df"],{"0d3b":function(e,t,s){var n=s("d039"),o=s("b622"),i=s("c430"),a=o("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,s="";return e.pathname="c%20d",t.forEach((function(e,n){t["delete"]("b"),s+=n+e})),i&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==s||"x"!==new URL("http://x",void 0).host}))},1276:function(e,t,s){"use strict";var n=s("d784"),o=s("44e74"),i=s("825a"),a=s("1d80"),r=s("4840"),l=s("8aa5"),c=s("50c4"),h=s("14c3"),d=s("9263"),u=s("d039"),p=[].push,m=Math.min,f=4294967295,v=!u((function(){return!RegExp(f,"y")}));n("split",2,(function(e,t,s){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,s){var n=String(a(this)),i=void 0===s?f:s>>>0;if(0===i)return[];if(void 0===e)return[n];if(!o(e))return t.call(n,e,i);var r,l,c,h=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,v=new RegExp(e.source,u+"g");while(r=d.call(v,n)){if(l=v.lastIndex,l>m&&(h.push(n.slice(m,r.index)),r.length>1&&r.index<n.length&&p.apply(h,r.slice(1)),c=r[0].length,m=l,h.length>=i))break;v.lastIndex===r.index&&v.lastIndex++}return m===n.length?!c&&v.test("")||h.push(""):h.push(n.slice(m)),h.length>i?h.slice(0,i):h}:"0".split(void 0,0).length?function(e,s){return void 0===e&&0===s?[]:t.call(this,e,s)}:t,[function(t,s){var o=a(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,o,s):n.call(String(o),t,s)},function(e,o){var a=s(n,e,this,o,n!==t);if(a.done)return a.value;var d=i(e),u=String(this),p=r(d,RegExp),g=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),_=new p(v?d:"^(?:"+d.source+")",b),w=void 0===o?f:o>>>0;if(0===w)return[];if(0===u.length)return null===h(_,u)?[u]:[];var C=0,S=0,O=[];while(S<u.length){_.lastIndex=v?S:0;var y,j=h(_,v?u:u.slice(S));if(null===j||(y=m(c(_.lastIndex+(v?0:S)),u.length))===C)S=l(u,S,g);else{if(O.push(u.slice(C,S)),O.length===w)return O;for(var I=1;I<=j.length-1;I++)if(O.push(j[I]),O.length===w)return O;S=C=y}}return O.push(u.slice(C)),O}]}),!v)},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14c3":function(e,t,s){var n=s("c6b6"),o=s("9263");e.exports=function(e,t){var s=e.exec;if("function"===typeof s){var i=s.call(e,t);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},"1da1":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));s("d3b7");function n(e,t,s,n,o,i,a){try{var r=e[i](a),l=r.value}catch(c){return void s(c)}r.done?t(l):Promise.resolve(l).then(n,o)}function o(e){return function(){var t=this,s=arguments;return new Promise((function(o,i){var a=e.apply(t,s);function r(e){n(a,o,i,r,l,"next",e)}function l(e){n(a,o,i,r,l,"throw",e)}r(void 0)}))}}},"2b3d":function(e,t,s){"use strict";s("3ca3");var n,o=s("23e7"),i=s("83ab"),a=s("0d3b"),r=s("da84"),l=s("37e8"),c=s("6eeb"),h=s("19aa"),d=s("5135"),u=s("60da"),p=s("4df4"),m=s("6547").codeAt,f=s("5fb2"),v=s("d44e"),g=s("9861"),b=s("69f3"),_=r.URL,w=g.URLSearchParams,C=g.getState,S=b.set,O=b.getterFor("URL"),y=Math.floor,j=Math.pow,I="Invalid authority",E="Invalid scheme",x="Invalid host",A="Invalid port",T=/[A-Za-z]/,M=/[\d+-.A-Za-z]/,P=/\d/,k=/^(0x|0X)/,H=/^[0-7]+$/,D=/^\d+$/,N=/^[\dA-Fa-f]+$/,Z=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,L=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,F=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,W=/[\u0009\u000A\u000D]/g,R=function(e,t){var s,n,o;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return x;if(s=G(t.slice(1,-1)),!s)return x;e.host=s}else if(V(e)){if(t=f(t),Z.test(t))return x;if(s=z(t),null===s)return x;e.host=s}else{if(L.test(t))return x;for(s="",n=p(t),o=0;o<n.length;o++)s+=Q(n[o],X);e.host=s}},z=function(e){var t,s,n,o,i,a,r,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),t=l.length,t>4)return e;for(s=[],n=0;n<t;n++){if(o=l[n],""==o)return e;if(i=10,o.length>1&&"0"==o.charAt(0)&&(i=k.test(o)?16:8,o=o.slice(8==i?1:2)),""===o)a=0;else{if(!(10==i?D:8==i?H:N).test(o))return e;a=parseInt(o,i)}s.push(a)}for(n=0;n<t;n++)if(a=s[n],n==t-1){if(a>=j(256,5-t))return null}else if(a>255)return null;for(r=s.pop(),n=0;n<s.length;n++)r+=s[n]*j(256,3-n);return r},G=function(e){var t,s,n,o,i,a,r,l=[0,0,0,0,0,0,0,0],c=0,h=null,d=0,u=function(){return e.charAt(d)};if(":"==u()){if(":"!=e.charAt(1))return;d+=2,c++,h=c}while(u()){if(8==c)return;if(":"!=u()){t=s=0;while(s<4&&N.test(u()))t=16*t+parseInt(u(),16),d++,s++;if("."==u()){if(0==s)return;if(d-=s,c>6)return;n=0;while(u()){if(o=null,n>0){if(!("."==u()&&n<4))return;d++}if(!P.test(u()))return;while(P.test(u())){if(i=parseInt(u(),10),null===o)o=i;else{if(0==o)return;o=10*o+i}if(o>255)return;d++}l[c]=256*l[c]+o,n++,2!=n&&4!=n||c++}if(4!=n)return;break}if(":"==u()){if(d++,!u())return}else if(u())return;l[c++]=t}else{if(null!==h)return;d++,c++,h=c}}if(null!==h){a=c-h,c=7;while(0!=c&&a>0)r=l[c],l[c--]=l[h+a-1],l[h+--a]=r}else if(8!=c)return;return l},B=function(e){for(var t=null,s=1,n=null,o=0,i=0;i<8;i++)0!==e[i]?(o>s&&(t=n,s=o),n=null,o=0):(null===n&&(n=i),++o);return o>s&&(t=n,s=o),t},Y=function(e){var t,s,n,o;if("number"==typeof e){for(t=[],s=0;s<4;s++)t.unshift(e%256),e=y(e/256);return t.join(".")}if("object"==typeof e){for(t="",n=B(e),s=0;s<8;s++)o&&0===e[s]||(o&&(o=!1),n===s?(t+=s?":":"::",o=!0):(t+=e[s].toString(16),s<7&&(t+=":")));return"["+t+"]"}return e},X={},q=u({},X,{" ":1,'"':1,"<":1,">":1,"`":1}),U=u({},q,{"#":1,"?":1,"{":1,"}":1}),K=u({},U,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Q=function(e,t){var s=m(e,0);return s>32&&s<127&&!d(t,e)?e:encodeURIComponent(e)},$={ftp:21,file:null,http:80,https:443,ws:80,wss:443},V=function(e){return d($,e.scheme)},J=function(e){return""!=e.username||""!=e.password},ee=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},te=function(e,t){var s;return 2==e.length&&T.test(e.charAt(0))&&(":"==(s=e.charAt(1))||!t&&"|"==s)},se=function(e){var t;return e.length>1&&te(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},ne=function(e){var t=e.path,s=t.length;!s||"file"==e.scheme&&1==s&&te(t[0],!0)||t.pop()},oe=function(e){return"."===e||"%2e"===e.toLowerCase()},ie=function(e){return e=e.toLowerCase(),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},ae={},re={},le={},ce={},he={},de={},ue={},pe={},me={},fe={},ve={},ge={},be={},_e={},we={},Ce={},Se={},Oe={},ye={},je={},Ie={},Ee=function(e,t,s,o){var i,a,r,l,c=s||ae,h=0,u="",m=!1,f=!1,v=!1;s||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(F,"")),t=t.replace(W,""),i=p(t);while(h<=i.length){switch(a=i[h],c){case ae:if(!a||!T.test(a)){if(s)return E;c=le;continue}u+=a.toLowerCase(),c=re;break;case re:if(a&&(M.test(a)||"+"==a||"-"==a||"."==a))u+=a.toLowerCase();else{if(":"!=a){if(s)return E;u="",c=le,h=0;continue}if(s&&(V(e)!=d($,u)||"file"==u&&(J(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=u,s)return void(V(e)&&$[e.scheme]==e.port&&(e.port=null));u="","file"==e.scheme?c=_e:V(e)&&o&&o.scheme==e.scheme?c=ce:V(e)?c=pe:"/"==i[h+1]?(c=he,h++):(e.cannotBeABaseURL=!0,e.path.push(""),c=ye)}break;case le:if(!o||o.cannotBeABaseURL&&"#"!=a)return E;if(o.cannotBeABaseURL&&"#"==a){e.scheme=o.scheme,e.path=o.path.slice(),e.query=o.query,e.fragment="",e.cannotBeABaseURL=!0,c=Ie;break}c="file"==o.scheme?_e:de;continue;case ce:if("/"!=a||"/"!=i[h+1]){c=de;continue}c=me,h++;break;case he:if("/"==a){c=fe;break}c=Oe;continue;case de:if(e.scheme=o.scheme,a==n)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query;else if("/"==a||"\\"==a&&V(e))c=ue;else if("?"==a)e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query="",c=je;else{if("#"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.path.pop(),c=Oe;continue}e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,e.path=o.path.slice(),e.query=o.query,e.fragment="",c=Ie}break;case ue:if(!V(e)||"/"!=a&&"\\"!=a){if("/"!=a){e.username=o.username,e.password=o.password,e.host=o.host,e.port=o.port,c=Oe;continue}c=fe}else c=me;break;case pe:if(c=me,"/"!=a||"/"!=u.charAt(h+1))continue;h++;break;case me:if("/"!=a&&"\\"!=a){c=fe;continue}break;case fe:if("@"==a){m&&(u="%40"+u),m=!0,r=p(u);for(var g=0;g<r.length;g++){var b=r[g];if(":"!=b||v){var _=Q(b,K);v?e.password+=_:e.username+=_}else v=!0}u=""}else if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&V(e)){if(m&&""==u)return I;h-=p(u).length+1,u="",c=ve}else u+=a;break;case ve:case ge:if(s&&"file"==e.scheme){c=Ce;continue}if(":"!=a||f){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&V(e)){if(V(e)&&""==u)return x;if(s&&""==u&&(J(e)||null!==e.port))return;if(l=R(e,u),l)return l;if(u="",c=Se,s)return;continue}"["==a?f=!0:"]"==a&&(f=!1),u+=a}else{if(""==u)return x;if(l=R(e,u),l)return l;if(u="",c=be,s==ge)return}break;case be:if(!P.test(a)){if(a==n||"/"==a||"?"==a||"#"==a||"\\"==a&&V(e)||s){if(""!=u){var w=parseInt(u,10);if(w>65535)return A;e.port=V(e)&&w===$[e.scheme]?null:w,u=""}if(s)return;c=Se;continue}return A}u+=a;break;case _e:if(e.scheme="file","/"==a||"\\"==a)c=we;else{if(!o||"file"!=o.scheme){c=Oe;continue}if(a==n)e.host=o.host,e.path=o.path.slice(),e.query=o.query;else if("?"==a)e.host=o.host,e.path=o.path.slice(),e.query="",c=je;else{if("#"!=a){se(i.slice(h).join(""))||(e.host=o.host,e.path=o.path.slice(),ne(e)),c=Oe;continue}e.host=o.host,e.path=o.path.slice(),e.query=o.query,e.fragment="",c=Ie}}break;case we:if("/"==a||"\\"==a){c=Ce;break}o&&"file"==o.scheme&&!se(i.slice(h).join(""))&&(te(o.path[0],!0)?e.path.push(o.path[0]):e.host=o.host),c=Oe;continue;case Ce:if(a==n||"/"==a||"\\"==a||"?"==a||"#"==a){if(!s&&te(u))c=Oe;else if(""==u){if(e.host="",s)return;c=Se}else{if(l=R(e,u),l)return l;if("localhost"==e.host&&(e.host=""),s)return;u="",c=Se}continue}u+=a;break;case Se:if(V(e)){if(c=Oe,"/"!=a&&"\\"!=a)continue}else if(s||"?"!=a)if(s||"#"!=a){if(a!=n&&(c=Oe,"/"!=a))continue}else e.fragment="",c=Ie;else e.query="",c=je;break;case Oe:if(a==n||"/"==a||"\\"==a&&V(e)||!s&&("?"==a||"#"==a)){if(ie(u)?(ne(e),"/"==a||"\\"==a&&V(e)||e.path.push("")):oe(u)?"/"==a||"\\"==a&&V(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&te(u)&&(e.host&&(e.host=""),u=u.charAt(0)+":"),e.path.push(u)),u="","file"==e.scheme&&(a==n||"?"==a||"#"==a))while(e.path.length>1&&""===e.path[0])e.path.shift();"?"==a?(e.query="",c=je):"#"==a&&(e.fragment="",c=Ie)}else u+=Q(a,U);break;case ye:"?"==a?(e.query="",c=je):"#"==a?(e.fragment="",c=Ie):a!=n&&(e.path[0]+=Q(a,X));break;case je:s||"#"!=a?a!=n&&("'"==a&&V(e)?e.query+="%27":e.query+="#"==a?"%23":Q(a,X)):(e.fragment="",c=Ie);break;case Ie:a!=n&&(e.fragment+=Q(a,q));break}h++}},xe=function(e){var t,s,n=h(this,xe,"URL"),o=arguments.length>1?arguments[1]:void 0,a=String(e),r=S(n,{type:"URL"});if(void 0!==o)if(o instanceof xe)t=O(o);else if(s=Ee(t={},String(o)),s)throw TypeError(s);if(s=Ee(r,a,null,t),s)throw TypeError(s);var l=r.searchParams=new w,c=C(l);c.updateSearchParams(r.query),c.updateURL=function(){r.query=String(l)||null},i||(n.href=Te.call(n),n.origin=Me.call(n),n.protocol=Pe.call(n),n.username=ke.call(n),n.password=He.call(n),n.host=De.call(n),n.hostname=Ne.call(n),n.port=Ze.call(n),n.pathname=Le.call(n),n.search=Fe.call(n),n.searchParams=We.call(n),n.hash=Re.call(n))},Ae=xe.prototype,Te=function(){var e=O(this),t=e.scheme,s=e.username,n=e.password,o=e.host,i=e.port,a=e.path,r=e.query,l=e.fragment,c=t+":";return null!==o?(c+="//",J(e)&&(c+=s+(n?":"+n:"")+"@"),c+=Y(o),null!==i&&(c+=":"+i)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==r&&(c+="?"+r),null!==l&&(c+="#"+l),c},Me=function(){var e=O(this),t=e.scheme,s=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(n){return"null"}return"file"!=t&&V(e)?t+"://"+Y(e.host)+(null!==s?":"+s:""):"null"},Pe=function(){return O(this).scheme+":"},ke=function(){return O(this).username},He=function(){return O(this).password},De=function(){var e=O(this),t=e.host,s=e.port;return null===t?"":null===s?Y(t):Y(t)+":"+s},Ne=function(){var e=O(this).host;return null===e?"":Y(e)},Ze=function(){var e=O(this).port;return null===e?"":String(e)},Le=function(){var e=O(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Fe=function(){var e=O(this).query;return e?"?"+e:""},We=function(){return O(this).searchParams},Re=function(){var e=O(this).fragment;return e?"#"+e:""},ze=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(i&&l(Ae,{href:ze(Te,(function(e){var t=O(this),s=String(e),n=Ee(t,s);if(n)throw TypeError(n);C(t.searchParams).updateSearchParams(t.query)})),origin:ze(Me),protocol:ze(Pe,(function(e){var t=O(this);Ee(t,String(e)+":",ae)})),username:ze(ke,(function(e){var t=O(this),s=p(String(e));if(!ee(t)){t.username="";for(var n=0;n<s.length;n++)t.username+=Q(s[n],K)}})),password:ze(He,(function(e){var t=O(this),s=p(String(e));if(!ee(t)){t.password="";for(var n=0;n<s.length;n++)t.password+=Q(s[n],K)}})),host:ze(De,(function(e){var t=O(this);t.cannotBeABaseURL||Ee(t,String(e),ve)})),hostname:ze(Ne,(function(e){var t=O(this);t.cannotBeABaseURL||Ee(t,String(e),ge)})),port:ze(Ze,(function(e){var t=O(this);ee(t)||(e=String(e),""==e?t.port=null:Ee(t,e,be))})),pathname:ze(Le,(function(e){var t=O(this);t.cannotBeABaseURL||(t.path=[],Ee(t,e+"",Se))})),search:ze(Fe,(function(e){var t=O(this);e=String(e),""==e?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ee(t,e,je)),C(t.searchParams).updateSearchParams(t.query)})),searchParams:ze(We),hash:ze(Re,(function(e){var t=O(this);e=String(e),""!=e?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ee(t,e,Ie)):t.fragment=null}))}),c(Ae,"toJSON",(function(){return Te.call(this)}),{enumerable:!0}),c(Ae,"toString",(function(){return Te.call(this)}),{enumerable:!0}),_){var Ge=_.createObjectURL,Be=_.revokeObjectURL;Ge&&c(xe,"createObjectURL",(function(e){return Ge.apply(_,arguments)})),Be&&c(xe,"revokeObjectURL",(function(e){return Be.apply(_,arguments)}))}v(xe,"URL"),o({global:!0,forced:!a,sham:!i},{URL:xe})},"2cc9":function(e,t,s){"use strict";var n=s("f49a"),o=s.n(n);o.a},3099:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main_wrapper"},[s("div",{staticClass:"banner banner_one"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bannerImg,expression:"bannerImg"}],attrs:{alt:""}}),s("div",{staticClass:"banner_info"},[s("p",{staticClass:"title"},[e._v(e._s(e.bannerContent))])])])])},o=[],i={name:"topBanner",props:{bannerImg:String,bannerContent:String}},a=i,r=(s("8d33"),s("2877")),l=Object(r["a"])(a,n,o,!1,null,"6f3ccc9a",null);t["a"]=l.exports},"316e":function(e,t,s){"use strict";var n=s("6c00"),o=s.n(n);o.a},"390b":function(e,t,s){"use strict";var n=s("9b74"),o=s.n(n);o.a},"3ca3":function(e,t,s){"use strict";var n=s("6547").charAt,o=s("69f3"),i=s("7dd0"),a="String Iterator",r=o.set,l=o.getterFor(a);i(String,"String",(function(e){r(this,{type:a,string:String(e),index:0})}),(function(){var e,t=l(this),s=t.string,o=t.index;return o>=s.length?{value:void 0,done:!0}:(e=n(s,o),t.index+=e.length,{value:e,done:!1})}))},"3ec3":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"builder fixedBuilder"},[s("div",{staticClass:"main_wrapper",attrs:{id:"mainWrapper"}},[s("div",{staticClass:"clearfix",attrs:{id:"container"},on:{click:e.containerListenner,mousedown:e.containerMouseDown,mousemove:e.containerMouseMove,mouseup:e.containerMouseUp}}),s("div",{staticClass:"show_more clearfix",class:e.showMore?"":"show_more_close",on:{click:function(t){return e.showMoreFn()}}},[s("img",{attrs:{src:"/image/3dBuilder/arrow.png",alt:""}})]),e.showMore?s("div",{staticClass:"clearfix",attrs:{id:"shapes"}},[s("div",{staticClass:"shapes_wrapper"},[s("div",{staticClass:"shapes_options normal",on:{click:function(t){return e.showModule(0)}}},[e._v("基础模型 "),s("i",{staticClass:"iconfont arrow arrow_right"},[e._v("")])]),s("div",{staticClass:"shapes_options cartoon",on:{click:function(t){return e.showModule(1)}}},[e._v("卡通模型 "),s("i",{staticClass:"iconfont arrow arrow_right"},[e._v("")])])])]):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.shapesListShow||e.cartoonStlShow,expression:"shapesListShow || cartoonStlShow"}],attrs:{id:"childWrapper"}},[e.shapesListShow?s("div",{staticClass:"child_wrapper normal_wrapper"},[s("div",{staticClass:"child_title",on:{click:function(t){return e.hideModule()}}},[s("i",{staticClass:"iconfont arrow"},[e._v("")]),e._v("基础模型")]),e._l(e.shapesList,(function(t,n){return s("div",{key:n,staticClass:"module shapes drag",class:t.title,on:{click:function(s){return e.selectModule(0,t.code,n,t.module)}}},["shape"==t.module?s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"0"}}):"stl"==t.module?s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"1"}}):"text"==t.module?s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"2"}}):e._e(),s("input",{staticClass:"this_code",attrs:{type:"hidden"},domProps:{value:t.code}}),s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:"/image/3dBuilder/3dPrinting/sprint_"+t.title+".png",expression:"'/image/3dBuilder/3dPrinting/sprint_'+item.title+'.png'",arg:"background-image"}],staticClass:"drag sprint",class:"sprint_"+t.title}),s("div",{staticClass:"name drag"},[e._v(e._s(t.name))])])}))],2):e._e(),e.cartoonStlShow?s("div",{staticClass:"child_wrapper cartoon_wrapper"},[s("div",{staticClass:"child_title",on:{click:function(t){return e.hideModule()}}},[s("i",{staticClass:"iconfont arrow"},[e._v("")]),e._v("卡通模型")]),e._l(e.cartoonStlList,(function(t,n){return s("div",{key:n,staticClass:"module lego drag",class:t.title,on:{click:function(s){return e.selectModule(1,t.code,n,t.module)}}},[s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"1"}}),s("input",{staticClass:"this_code",attrs:{type:"hidden"},domProps:{value:n}}),s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:"/image/3dBuilder/3dPrinting/sprint_"+t.title+".png",expression:"'/image/3dBuilder/3dPrinting/sprint_'+item.title+'.png'",arg:"background-image"}],staticClass:"drag sprint sprintY",class:"sprint_"+t.title}),s("div",{staticClass:"name drag"},[e._v(e._s(t.name))])])}))],2):e._e()]),s("div",{staticClass:"module_btns clearfix"},[s("div",{staticClass:"btn_main go_mainPage",on:{click:function(t){return e.leaveBuilder()}}},[e._m(0),s("div",{staticClass:"module_btn_name"},[e._v("Back")])]),s("div",{staticClass:"btn_main save_module save_stl",class:e.activeSave?"":"noActive_save",on:{click:function(t){return e.saveModuleShow(0)}}},[e._m(1),s("div",{staticClass:"module_btn_name"},[e._v("保存")])])]),s("div",{staticClass:"obj_control has_right_menu"},[e.controlBar?s("div",{staticClass:"obj_control_wrapper clearfix"},[s("div",{staticClass:"control_btn undo_control ",class:e.undoActive?"":"noActive_control",on:{click:function(t){return e.redoUndo(0)}}},[s("i",{staticClass:"iconfont"},[e._v("")]),s("div",{staticClass:"btn_name"},[e._v("撤回")])]),s("div",{staticClass:"control_btn redo_control ",class:e.redoActive?"":"noActive_control",on:{click:function(t){return e.redoUndo(1)}}},[s("i",{staticClass:"iconfont"},[e._v("")]),s("div",{staticClass:"btn_name"},[e._v("恢复")])]),s("div",{staticClass:"control_btn size_control",on:{click:function(t){return e.changeControls(0)}}},[e._m(2),s("div",{staticClass:"btn_name"},[e._v("修改大小")])]),s("div",{staticClass:"control_btn trans_control active_control",on:{click:function(t){return e.changeControls(1)}}},[e._m(3),s("div",{staticClass:"btn_name"},[e._v("移动")])]),s("div",{staticClass:"control_btn rotate_control",on:{click:function(t){return e.changeControls(2)}}},[e._m(4),s("div",{staticClass:"btn_name"},[e._v("旋转")])]),s("div",{staticClass:"control_btn zoomin_control",on:{click:function(t){return e.showChild(0)}}},[s("i",{staticClass:"iconfont"},[e._v("")]),s("div",{staticClass:"btn_name"},[e._v("放大缩小")]),e.showZoomOption?s("div",{staticClass:"zoom_options"},[s("div",{staticClass:"zoom_opt",on:{click:function(t){return e.zoomView(50)}}},[e._v("50%")]),s("div",{staticClass:"zoom_opt",on:{click:function(t){return e.zoomView(100)}}},[e._v("100%")]),s("div",{staticClass:"zoom_opt",on:{click:function(t){return e.zoomView(200)}}},[e._v("200%")])]):e._e()]),s("div",{staticClass:"control_btn delete_control",on:{click:function(t){return e.deletedSelected()}}},[s("i",{staticClass:"iconfont"},[e._v("")]),s("div",{staticClass:"btn_name"},[e._v("删除")])]),e.colorControl?s("div",{staticClass:"control_btn color_control_wrapper",on:{click:function(t){return e.showChild(1)}}},[s("div",{staticClass:"color_circle outside_color",class:e.isWhite?"white_color_circle":""}),s("div",{staticClass:"btn_name"},[e._v("颜色")]),e.showColorOption?s("div",{staticClass:"color_wrapper"},[s("div",{staticClass:"color_control yellow_control",on:{click:function(t){return e.changeCurrentColor(1)}}},[s("div",{staticClass:"color_circle"})]),s("div",{staticClass:"color_control white_control",on:{click:function(t){return e.changeCurrentColor(0)}}},[s("div",{staticClass:"color_circle"})])]):e._e()]):e._e()]):e._e()])]),e.saveNmaeWindow?s("div",{staticClass:"save_name_module_bg"}):e._e(),e.saveNmaeWindow?s("div",{staticClass:"save_name_module"},[s("div",{staticClass:"save_name_title"},[e._v("命名")]),s("div",{staticClass:"save_name_tip"},[e._v("模型还没有名字，取个名字吧")]),s("input",{attrs:{type:"text",placeholder:"请输入模型名称",maxlength:"14",id:"save_name",oninput:"saveModuleName(this,'oninput')",onblur:"saveModuleName(this,'onblur')",onFocus:"saveModuleName(this,'onFocus')",onkeyup:"this.value=this.value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5]/g ,'')",blur:"saveModuleName(this,'blur')"},domProps:{value:this.getTimeStr()}}),s("div",{staticClass:"save_name_verify"},[e._v("请输入模型名称")]),s("div",{staticClass:"btn_wrapper clearfix"},[s("img",{staticClass:"save_name_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_yes1.png"},on:{click:function(t){e.activeSave&&e.exportMoudle(0)}}}),s("img",{staticClass:"imgBtn save_name_cancle",attrs:{src:"/image/3dBuilder/3dPrinting/btn_close.png"},on:{click:function(t){return e.saveModuleShow(1)}}})])]):e._e(),e.notSaveNote?s("div",{staticClass:"save_ask_module_bg"}):e._e(),e.notSaveNote?s("div",{staticClass:"save_ask"},[s("div",{staticClass:"save_name_title"},[e._v("提示")]),s("div",{staticClass:"save_name_tip"},[e._v(" 模型进度还没有保存哦，此时离开会丢失进度，是否保存？ ")]),s("div",{staticClass:"btn_wrapper clearfix"},[s("img",{staticClass:"go_home_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_no.png"},on:{click:function(t){return e.goHomeSaveModule(0)}}}),s("img",{staticClass:"go_home_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_yes.png"},on:{click:function(t){return e.goHomeSaveModule(1)}}}),s("img",{staticClass:"imgBtn save_name_cancle",attrs:{src:"/image/3dBuilder/3dPrinting/btn_close.png"},on:{click:function(t){return e.hideAskWindow()}}})])]):e._e(),e._m(5),e.showTextWindow?s("div",{staticClass:"text_window"},[s("div",{staticClass:"text_title"},[e._v("生成3D文字")]),s("input",{attrs:{type:"text",placeholder:"请输入文字",maxlength:"10",id:"textContent"},on:{input:e.textInputFn,blur:e.textInputFn}}),s("div",{staticClass:"btn_wrapper clearfix"},[s("div",{staticClass:"btns btn_ok text_ok",class:e.inputCanConfirm?"":"btn_disable",on:{click:function(t){e.inputCanConfirm&&e.insertWord()}}},[e._v("确定")]),s("div",{staticClass:"btns btn_cancle text_cancle",on:{click:function(t){return e.showInput(1)}}},[e._v("取消")])])]):e._e(),e.controlType?s("div",{staticClass:"control_type",domProps:{textContent:e._s(e.statusTxt)}},[e._v("当前状态: 移动")]):e._e(),e.showLoading?s("div",{class:e.showMore?"hideShowMore":"",attrs:{id:"loading_data"}},[s("img",{attrs:{src:"/image/3dBuilder/loading.gif",alt:""}}),s("div",{staticClass:"processingbar"},[s("div",{staticClass:"barwidth",style:{width:e.progressingBar+"%"}})])]):e._e()])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn_child btn_home"},[s("i",{staticClass:"iconfont"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn_child btn_save_module"},[s("i",{staticClass:"iconfont"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon_wrapper"},[s("i",{staticClass:"iconfont"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon_wrapper"},[s("i",{staticClass:"iconfont"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon_wrapper"},[s("i",{staticClass:"iconfont"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"note"},[s("div",{staticClass:"select_module"},[e._v("选择一个模型，点击 箭头按 "),s("span",{staticClass:"red"},[e._v("X")]),e._v(","),s("span",{staticClass:"green"},[e._v("Y")]),e._v(","),s("span",{staticClass:"blue"},[e._v("Z")]),e._v("单向缩放,点击中心方块或 者双指，进行整体 缩放 ")])])}],i=s("db12"),a=i["a"],r=(s("e9cf"),s("2877")),l=Object(r["a"])(a,n,o,!1,null,"6b2767b6",null);t["a"]=l.exports},"44e7":function(e,t,s){},"45fc":function(e,t,s){"use strict";var n=s("23e7"),o=s("b727").some,i=s("a640"),a=s("ae40"),r=i("some"),l=a("some");n({target:"Array",proto:!0,forced:!r||!l},{some:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},"4c53":function(e,t,s){"use strict";var n=s("23e7"),o=s("857a"),i=s("af03");n({target:"String",proto:!0,forced:i("sub")},{sub:function(){return o(this,"sub","","")}})},"4df4":function(e,t,s){"use strict";var n=s("0366"),o=s("7b0b"),i=s("9bdd"),a=s("e95a"),r=s("50c4"),l=s("8418"),c=s("35a1");e.exports=function(e){var t,s,h,d,u,p,m=o(e),f="function"==typeof this?this:Array,v=arguments.length,g=v>1?arguments[1]:void 0,b=void 0!==g,_=c(m),w=0;if(b&&(g=n(g,v>2?arguments[2]:void 0,2)),void 0==_||f==Array&&a(_))for(t=r(m.length),s=new f(t);t>w;w++)p=b?g(m[w],w):m[w],l(s,w,p);else for(d=_.call(m),u=d.next,s=new f;!(h=u.call(d)).done;w++)p=b?i(d,g,[h.value,w],!0):h.value,l(s,w,p);return s.length=w,s}},5319:function(e,t,s){"use strict";var n=s("d784"),o=s("825a"),i=s("7b0b"),a=s("50c4"),r=s("a691"),l=s("1d80"),c=s("8aa5"),h=s("14c3"),d=Math.max,u=Math.min,p=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,f=/\$([$&'`]|\d\d?)/g,v=function(e){return void 0===e?e:String(e)};n("replace",2,(function(e,t,s,n){var g=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,b=n.REPLACE_KEEPS_$0,_=g?"$":"$0";return[function(s,n){var o=l(this),i=void 0==s?void 0:s[e];return void 0!==i?i.call(s,o,n):t.call(String(o),s,n)},function(e,n){if(!g&&b||"string"===typeof n&&-1===n.indexOf(_)){var i=s(t,e,this,n);if(i.done)return i.value}var l=o(e),p=String(this),m="function"===typeof n;m||(n=String(n));var f=l.global;if(f){var C=l.unicode;l.lastIndex=0}var S=[];while(1){var O=h(l,p);if(null===O)break;if(S.push(O),!f)break;var y=String(O[0]);""===y&&(l.lastIndex=c(p,a(l.lastIndex),C))}for(var j="",I=0,E=0;E<S.length;E++){O=S[E];for(var x=String(O[0]),A=d(u(r(O.index),p.length),0),T=[],M=1;M<O.length;M++)T.push(v(O[M]));var P=O.groups;if(m){var k=[x].concat(T,A,p);void 0!==P&&k.push(P);var H=String(n.apply(void 0,k))}else H=w(x,p,A,T,P,n);A>=I&&(j+=p.slice(I,A)+H,I=A+x.length)}return j+p.slice(I)}];function w(e,s,n,o,a,r){var l=n+e.length,c=o.length,h=f;return void 0!==a&&(a=i(a),h=m),t.call(r,h,(function(t,i){var r;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return s.slice(0,n);case"'":return s.slice(l);case"<":r=a[i.slice(1,-1)];break;default:var h=+i;if(0===h)return t;if(h>c){var d=p(h/10);return 0===d?t:d<=c?void 0===o[d-1]?i.charAt(1):o[d-1]+i.charAt(1):t}r=o[h-1]}return void 0===r?"":r}))}}))},"5b55":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return o}));s("99af"),s("c975"),s("45fc"),s("b0c0"),s("ac1f"),s("841c"),s("1276"),s("4c53");var n=s("5a89"),o=function(t,s){void 0===s&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),s=document),n["E"].call(this),this.visible=!1,this.domElement=s;var o=new i;this.add(o);var r=new a;this.add(r);var l=this;B("camera",t),B("object",void 0),B("enabled",!0),B("axis",null),B("mode","translate"),B("translationSnap",null),B("rotationSnap",null),B("scaleSnap",null),B("space","world"),B("size",1),B("dragging",!1),B("showX",!0),B("showY",!0),B("showZ",!0);var c={type:"change"},h={type:"mouseDown"},d={type:"mouseUp",mode:l.mode},u={type:"objectChange"},p=new n["N"];function m(e,t,s){for(var n=t.intersectObject(e,!0),o=0;o<n.length;o++)if(n[o].object.visible||s)return n[o];return!1}var f=new n["bb"],v=new n["bb"],g=new n["M"],b={X:new n["bb"](1,0,0),Y:new n["bb"](0,1,0),Z:new n["bb"](0,0,1)},_=new n["bb"],w=new n["bb"],C=new n["bb"],S=new n["bb"],O=new n["bb"],y=new n["bb"],j=0,I=new n["bb"],E=new n["M"],x=new n["bb"],A=new n["bb"],T=new n["M"],M=new n["M"],P=new n["bb"],k=new n["bb"],H=new n["M"],D=new n["bb"],N=new n["bb"],Z=new n["M"],L=new n["M"],F=new n["bb"],W=new n["bb"],R=new n["bb"],z=new n["M"],G=new n["bb"];function B(e,t){var s=t;Object.defineProperty(l,e,{get:function(){return void 0!==s?s:t},set:function(t){s!==t&&(s=t,r[e]=t,o[e]=t,l.dispatchEvent({type:e+"-changed",value:t}),l.dispatchEvent(c))}}),l[e]=t,r[e]=t,o[e]=t}function Y(e){if(l.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var t=e.changedTouches?e.changedTouches[0]:e,n=s.getBoundingClientRect();return{x:(t.clientX-n.left)/n.width*2-1,y:-(t.clientY-n.top)/n.height*2+1,button:e.button}}function X(e){if(l.enabled)switch(e.pointerType){case"mouse":case"pen":l.pointerHover(Y(e));break}}function q(e){l.enabled&&(l.domElement.style.touchAction="none",l.domElement.ownerDocument.addEventListener("pointermove",U,!1),l.pointerHover(Y(e)),l.pointerDown(Y(e)))}function U(e){l.enabled&&l.pointerMove(Y(e))}function K(e){l.enabled&&(l.domElement.style.touchAction="",l.domElement.ownerDocument.removeEventListener("pointermove",U,!1),l.pointerUp(Y(e)))}B("worldPosition",N),B("worldPositionStart",k),B("worldQuaternion",Z),B("worldQuaternionStart",H),B("cameraPosition",I),B("cameraQuaternion",E),B("pointStart",_),B("pointEnd",w),B("rotationAxis",S),B("rotationAngle",j),B("eye",W),s.addEventListener("pointerdown",q,!1),s.addEventListener("pointermove",X,!1),l.domElement.ownerDocument.addEventListener("pointerup",K,!1),this.dispose=function(){s.removeEventListener("pointerdown",q),s.removeEventListener("pointermove",X),l.domElement.ownerDocument.removeEventListener("pointermove",U),l.domElement.ownerDocument.removeEventListener("pointerup",K),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))},this.attach=function(t){var s=e(".active_control").length;return t&&"plane"!=t.name?(this.object=t,this.visible=!0,window.focusedTransformObj=t,console.log("window.deleteObjFlag::"+window.deleteObjFlag),window.deleteObjFlag=!1,e(".color_control_wrapper").show(),e(".active_control").removeClass("active_control"),setTimeout((function(){switch(l.mode){case"scale":e(".size_control").addClass("active_control");break;case"translate":e(".trans_control").addClass("active_control");break;case"rotate":e(".rotate_control").addClass("active_control");break}}),0)):window.focusedTransformObj&&s>0?(this.object=window.focusedTransformObj,this.visible=!0):e(".color_control_wrapper").hide(),this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(A,T,P),this.object.matrixWorld.decompose(N,Z,F),M.copy(T).invert(),L.copy(Z).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(I,E,x),W.copy(I).sub(N).normalize(),n["E"].prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging){p.setFromCamera(e,this.camera);var t=m(o.picker[this.mode],p);this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){p.setFromCamera(e,this.camera);var t=m(r,p,!0);if(t){var s=this.space;if("scale"===this.mode?s="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(s="world"),"local"===s&&"rotate"===this.mode){var n=this.rotationSnap;"X"===this.axis&&n&&(this.object.rotation.x=Math.round(this.object.rotation.x/n)*n),"Y"===this.axis&&n&&(this.object.rotation.y=Math.round(this.object.rotation.y/n)*n),"Z"===this.axis&&n&&(this.object.rotation.z=Math.round(this.object.rotation.z/n)*n)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),R.copy(this.object.position),z.copy(this.object.quaternion),G.copy(this.object.scale),this.object.matrixWorld.decompose(k,H,D),_.copy(t.point).sub(k)}this.dragging=!0,h.mode=this.mode,this.dispatchEvent(h)}},this.pointerMove=function(e){var t=this.axis,s=this.mode,n=this.object,o=this.space;if("scale"===s?o="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(o="world"),void 0!==n&&null!==t&&!1!==this.dragging&&-1===e.button){p.setFromCamera(e,this.camera);var i=m(r,p,!0);if(i){if(w.copy(i.point).sub(k),"translate"===s)C.copy(w).sub(_),"local"===o&&"XYZ"!==t&&C.applyQuaternion(L),-1===t.indexOf("X")&&(C.x=0),-1===t.indexOf("Y")&&(C.y=0),-1===t.indexOf("Z")&&(C.z=0),"local"===o&&"XYZ"!==t?C.applyQuaternion(z).divide(P):C.applyQuaternion(M).divide(P),n.position.copy(C).add(R),this.translationSnap&&("local"===o&&(n.position.applyQuaternion(g.copy(z).invert()),-1!==t.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.position.applyQuaternion(z)),"world"===o&&(n.parent&&n.position.add(f.setFromMatrixPosition(n.parent.matrixWorld)),-1!==t.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.parent&&n.position.sub(f.setFromMatrixPosition(n.parent.matrixWorld))));else if("scale"===s){if(-1!==t.search("XYZ")){var a=w.length()/_.length();w.dot(_)<0&&(a*=-1),v.set(a,a,a)}else f.copy(_),v.copy(w),f.applyQuaternion(L),v.applyQuaternion(L),v.divide(f),-1===t.search("X")&&(v.x=1),-1===t.search("Y")&&(v.y=1),-1===t.search("Z")&&(v.z=1);n.scale.copy(G).multiply(v),this.scaleSnap&&(-1!==t.search("X")&&(n.scale.x=Math.round(n.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(n.scale.y=Math.round(n.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(n.scale.z=Math.round(n.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===s){C.copy(w).sub(_);var l=20/N.distanceTo(f.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(S.copy(W),j=w.angleTo(_),O.copy(_).normalize(),y.copy(w).normalize(),j*=y.cross(O).dot(W)<0?1:-1):"XYZE"===t?(S.copy(C).cross(W).normalize(),j=C.dot(f.copy(S).cross(this.eye))*l):"X"!==t&&"Y"!==t&&"Z"!==t||(S.copy(b[t]),f.copy(b[t]),"local"===o&&f.applyQuaternion(Z),j=C.dot(f.cross(W).normalize())*l),this.rotationSnap&&(j=Math.round(j/this.rotationSnap)*this.rotationSnap),this.rotationAngle=j,"local"===o&&"E"!==t&&"XYZE"!==t?(n.quaternion.copy(z),n.quaternion.multiply(g.setFromAxisAngle(S,j)).normalize()):(S.applyQuaternion(M),n.quaternion.copy(g.setFromAxisAngle(S,j)),n.quaternion.multiply(z).normalize())}this.dispatchEvent(c),this.dispatchEvent(u)}}},this.pointerUp=function(e){0===e.button&&(this.dragging&&null!==this.axis&&(d.mode=this.mode,this.dispatchEvent(d)),this.dragging=!1,this.axis=null)},this.getMode=function(){return l.mode},this.setMode=function(e){l.mode=e},this.setTranslationSnap=function(e){l.translationSnap=e},this.setRotationSnap=function(e){l.rotationSnap=e},this.setScaleSnap=function(e){l.scaleSnap=e},this.setSize=function(e){l.size=e},this.setSpace=function(e){l.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};o.prototype=Object.assign(Object.create(n["E"].prototype),{constructor:o,isTransformControls:!0});var i=function(){n["E"].call(this),this.type="TransformControlsGizmo";var e=new n["B"]({depthTest:!1,depthWrite:!1,transparent:!0,side:n["i"],fog:!1,toneMapped:!1}),t=new n["v"]({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),s=e.clone();s.opacity=.15;var o=e.clone();o.opacity=.33;var i=e.clone();i.color.set(16711680);var a=e.clone();a.color.set(65280);var r=e.clone();r.color.set(255);var l=e.clone();l.opacity=.25;var c=l.clone();c.color.set(16776960);var h=l.clone();h.color.set(65535);var d=l.clone();d.color.set(16711935);var u=e.clone();u.color.set(16776960);var p=t.clone();p.color.set(16711680);var m=t.clone();m.color.set(65280);var f=t.clone();f.color.set(255);var v=t.clone();v.color.set(65535);var g=t.clone();g.color.set(16711935);var b=t.clone();b.color.set(16776960);var _=t.clone();_.color.set(7895160);var w=b.clone();w.opacity=.5;var C=new n["g"](0,.1,.2,12,1,!1),S=new n["b"](.2,.2,.2),O=new n["d"];O.setAttribute("position",new n["p"]([0,0,0,1,0,0],3));var y=function(e,t){for(var s=new n["d"],o=[],i=0;i<=64*t;++i)o.push(0,Math.cos(i/32*Math.PI)*e,Math.sin(i/32*Math.PI)*e);return s.setAttribute("position",new n["p"](o,3)),s},j=function(){var e=new n["d"];return e.setAttribute("position",new n["p"]([0,0,0,1,1,1],3)),e},I={X:[[new n["A"](C,i),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new n["A"](C,i),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new n["u"](O,p)]],Y:[[new n["A"](C,a),[0,1,0],null,null,"fwd"],[new n["A"](C,a),[0,1,0],[Math.PI,0,0],null,"bwd"],[new n["u"](O,m),null,[0,0,Math.PI/2]]],Z:[[new n["A"](C,r),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new n["A"](C,r),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new n["u"](O,f),null,[0,-Math.PI/2,0]]],XYZ:[[new n["A"](new n["F"](.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new n["A"](new n["K"](.295,.295),c.clone()),[.15,.15,0]],[new n["u"](O,b),[.18,.3,0],null,[.125,1,1]],[new n["u"](O,b),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new n["A"](new n["K"](.295,.295),h.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new n["u"](O,v),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new n["u"](O,v),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new n["A"](new n["K"](.295,.295),d.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new n["u"](O,g),[.18,0,.3],null,[.125,1,1]],[new n["u"](O,g),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},E={X:[[new n["A"](new n["g"](.2,0,1,4,1,!1),s),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new n["A"](new n["g"](.2,0,1,4,1,!1),s),[0,.6,0]]],Z:[[new n["A"](new n["g"](.2,0,1,4,1,!1),s),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new n["A"](new n["F"](.2,0),s)]],XY:[[new n["A"](new n["K"](.4,.4),s),[.2,.2,0]]],YZ:[[new n["A"](new n["K"](.4,.4),s),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new n["A"](new n["K"](.4,.4),s),[.2,0,.2],[-Math.PI/2,0,0]]]},x={START:[[new n["A"](new n["F"](.01,2),o),null,null,null,"helper"]],END:[[new n["A"](new n["F"](.01,2),o),null,null,null,"helper"]],DELTA:[[new n["u"](j(),o),null,null,null,"helper"]],X:[[new n["u"](O,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n["u"](O,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n["u"](O,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},A={X:[[new n["u"](y(1,.5),p)],[new n["A"](new n["F"](.04,0),i),[0,0,.99],null,[1,3,1]]],Y:[[new n["u"](y(1,.5),m),null,[0,0,-Math.PI/2]],[new n["A"](new n["F"](.04,0),a),[0,0,.99],null,[3,1,1]]],Z:[[new n["u"](y(1,.5),f),null,[0,Math.PI/2,0]],[new n["A"](new n["F"](.04,0),r),[.99,0,0],null,[1,3,1]]],E:[[new n["u"](y(1.25,1),w),null,[0,Math.PI/2,0]],[new n["A"](new n["g"](.03,0,.15,4,1,!1),w),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new n["A"](new n["g"](.03,0,.15,4,1,!1),w),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new n["A"](new n["g"](.03,0,.15,4,1,!1),w),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new n["A"](new n["g"](.03,0,.15,4,1,!1),w),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new n["u"](y(1,1),_),null,[0,Math.PI/2,0]]]},T={AXIS:[[new n["u"](O,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},M={X:[[new n["A"](new n["Y"](1,.1,4,24),s),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new n["A"](new n["Y"](1,.1,4,24),s),[0,0,0],[Math.PI/2,0,0]]],Z:[[new n["A"](new n["Y"](1,.1,4,24),s),[0,0,0],[0,0,-Math.PI/2]]],E:[[new n["A"](new n["Y"](1.25,.1,2,24),s)]],XYZE:[[new n["A"](new n["T"](.7,10,8),s)]]},P={X:[[new n["A"](S,i),[.8,0,0],[0,0,-Math.PI/2]],[new n["u"](O,p),null,null,[.8,1,1]]],Y:[[new n["A"](S,a),[0,.8,0]],[new n["u"](O,m),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new n["A"](S,r),[0,0,.8],[Math.PI/2,0,0]],[new n["u"](O,f),null,[0,-Math.PI/2,0],[.8,1,1]]]},k={X:[[new n["A"](new n["g"](.2,0,.8,4,1,!1),s),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new n["A"](new n["g"](.2,0,.8,4,1,!1),s),[0,.5,0]]],Z:[[new n["A"](new n["g"](.2,0,.8,4,1,!1),s),[0,0,.5],[Math.PI/2,0,0]]]},H={X:[[new n["u"](O,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n["u"](O,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n["u"](O,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},D=function(e){var t=new n["E"];for(var s in e)for(var o=e[s].length;o--;){var i=e[s][o][0].clone(),a=e[s][o][1],r=e[s][o][2],l=e[s][o][3],c=e[s][o][4];i.name=s,i.tag=c,a&&i.position.set(a[0],a[1],a[2]),r&&i.rotation.set(r[0],r[1],r[2]),l&&i.scale.set(l[0],l[1],l[2]),i.updateMatrix();var h=i.geometry.clone();h.applyMatrix4(i.matrix),i.geometry=h,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t},N=new n["bb"](0,0,0),Z=new n["k"],L=new n["bb"](0,1,0),F=new n["bb"](0,0,0),W=new n["z"],R=new n["M"],z=new n["M"],G=new n["M"],B=new n["bb"](1,0,0),Y=new n["bb"](0,1,0),X=new n["bb"](0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo["translate"]=D(I)),this.add(this.gizmo["rotate"]=D(A)),this.add(this.gizmo["scale"]=D(P)),this.add(this.picker["translate"]=D(E)),this.add(this.picker["rotate"]=D(M)),this.add(this.picker["scale"]=D(k)),this.add(this.helper["translate"]=D(x)),this.add(this.helper["rotate"]=D(T)),this.add(this.helper["scale"]=D(H)),this.picker["translate"].visible=!1,this.picker["rotate"].visible=!1,this.picker["scale"].visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:G;this.gizmo["translate"].visible="translate"===this.mode,this.gizmo["rotate"].visible="rotate"===this.mode,this.gizmo["scale"].visible="scale"===this.mode,this.helper["translate"].visible="translate"===this.mode,this.helper["rotate"].visible="rotate"===this.mode,this.helper["scale"].visible="scale"===this.mode;var s=[];s=s.concat(this.picker[this.mode].children),s=s.concat(this.gizmo[this.mode].children),s=s.concat(this.helper[this.mode].children);for(var o=0;o<s.length;o++){var i,a=s[o];if(a.visible=!0,a.rotation.set(0,0,0),a.position.copy(this.worldPosition),i=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),a.scale.set(1,1,1).multiplyScalar(i*this.size/7),"helper"!==a.tag){if(a.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){var r=.99,l=.2,c=0;"X"!==a.name&&"XYZX"!==a.name||Math.abs(L.copy(B).applyQuaternion(t).dot(this.eye))>r&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Y"!==a.name&&"XYZY"!==a.name||Math.abs(L.copy(Y).applyQuaternion(t).dot(this.eye))>r&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Z"!==a.name&&"XYZZ"!==a.name||Math.abs(L.copy(X).applyQuaternion(t).dot(this.eye))>r&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XY"===a.name&&Math.abs(L.copy(X).applyQuaternion(t).dot(this.eye))<l&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"YZ"===a.name&&Math.abs(L.copy(B).applyQuaternion(t).dot(this.eye))<l&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XZ"===a.name&&Math.abs(L.copy(Y).applyQuaternion(t).dot(this.eye))<l&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),-1!==a.name.search("X")&&(L.copy(B).applyQuaternion(t).dot(this.eye)<c?"fwd"===a.tag?a.visible=!1:a.scale.x*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Y")&&(L.copy(Y).applyQuaternion(t).dot(this.eye)<c?"fwd"===a.tag?a.visible=!1:a.scale.y*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Z")&&(L.copy(X).applyQuaternion(t).dot(this.eye)<c?"fwd"===a.tag?a.visible=!1:a.scale.z*=-1:"bwd"===a.tag&&(a.visible=!1))}else"rotate"===this.mode&&(z.copy(t),L.copy(this.eye).applyQuaternion(R.copy(t).invert()),-1!==a.name.search("E")&&a.quaternion.setFromRotationMatrix(W.lookAt(this.eye,F,Y)),"X"===a.name&&(R.setFromAxisAngle(B,Math.atan2(-L.y,L.z)),R.multiplyQuaternions(z,R),a.quaternion.copy(R)),"Y"===a.name&&(R.setFromAxisAngle(Y,Math.atan2(L.x,L.z)),R.multiplyQuaternions(z,R),a.quaternion.copy(R)),"Z"===a.name&&(R.setFromAxisAngle(X,Math.atan2(L.y,L.x)),R.multiplyQuaternions(z,R),a.quaternion.copy(R)));a.visible=a.visible&&(-1===a.name.indexOf("X")||this.showX),a.visible=a.visible&&(-1===a.name.indexOf("Y")||this.showY),a.visible=a.visible&&(-1===a.name.indexOf("Z")||this.showZ),a.visible=a.visible&&(-1===a.name.indexOf("E")||this.showX&&this.showY&&this.showZ),a.material._opacity=a.material._opacity||a.material.opacity,a.material._color=a.material._color||a.material.color.clone(),a.material.color.copy(a.material._color),a.material.opacity=a.material._opacity,this.enabled?this.axis&&(a.name===this.axis||this.axis.split("").some((function(e){return a.name===e}))?(a.material.opacity=1,a.material.color.lerp(new n["e"](1,1,1),.5)):(a.material.opacity*=.25,a.material.color.lerp(new n["e"](1,1,1),.5))):(a.material.opacity*=.5,a.material.color.lerp(new n["e"](1,1,1),.5))}else a.visible=!1,"AXIS"===a.name?(a.position.copy(this.worldPositionStart),a.visible=!!this.axis,"X"===this.axis&&(R.setFromEuler(Z.set(0,0,0)),a.quaternion.copy(t).multiply(R),Math.abs(L.copy(B).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Y"===this.axis&&(R.setFromEuler(Z.set(0,0,Math.PI/2)),a.quaternion.copy(t).multiply(R),Math.abs(L.copy(Y).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Z"===this.axis&&(R.setFromEuler(Z.set(0,Math.PI/2,0)),a.quaternion.copy(t).multiply(R),Math.abs(L.copy(X).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"XYZE"===this.axis&&(R.setFromEuler(Z.set(0,Math.PI/2,0)),L.copy(this.rotationAxis),a.quaternion.setFromRotationMatrix(W.lookAt(F,L,Y)),a.quaternion.multiply(R),a.visible=this.dragging),"E"===this.axis&&(a.visible=!1)):"START"===a.name?(a.position.copy(this.worldPositionStart),a.visible=this.dragging):"END"===a.name?(a.position.copy(this.worldPosition),a.visible=this.dragging):"DELTA"===a.name?(a.position.copy(this.worldPositionStart),a.quaternion.copy(this.worldQuaternionStart),N.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),N.applyQuaternion(this.worldQuaternionStart.clone().invert()),a.scale.copy(N),a.visible=this.dragging):(a.quaternion.copy(t),this.dragging?a.position.copy(this.worldPositionStart):a.position.copy(this.worldPosition),this.axis&&(a.visible=-1!==this.axis.search(a.name)))}n["E"].prototype.updateMatrixWorld.call(this)}};i.prototype=Object.assign(Object.create(n["E"].prototype),{constructor:i,isTransformControlsGizmo:!0});var a=function(){n["A"].call(this,new n["K"](1e5,1e5,2,2),new n["B"]({visible:!1,wireframe:!0,side:n["i"],transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane";var e=new n["bb"](1,0,0),t=new n["bb"](0,1,0),s=new n["bb"](0,0,1),o=new n["bb"],i=new n["bb"],a=new n["bb"],r=new n["z"],l=new n["M"];this.updateMatrixWorld=function(){var c=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(c="local"),e.set(1,0,0).applyQuaternion("local"===c?this.worldQuaternion:l),t.set(0,1,0).applyQuaternion("local"===c?this.worldQuaternion:l),s.set(0,0,1).applyQuaternion("local"===c?this.worldQuaternion:l),a.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":a.copy(this.eye).cross(e),i.copy(e).cross(a);break;case"Y":a.copy(this.eye).cross(t),i.copy(t).cross(a);break;case"Z":a.copy(this.eye).cross(s),i.copy(s).cross(a);break;case"XY":i.copy(s);break;case"YZ":i.copy(e);break;case"XZ":a.copy(s),i.copy(t);break;case"XYZ":case"E":i.set(0,0,0);break}break;case"rotate":default:i.set(0,0,0)}0===i.length()?this.quaternion.copy(this.cameraQuaternion):(r.lookAt(o.set(0,0,0),i,a),this.quaternion.setFromRotationMatrix(r)),n["E"].prototype.updateMatrixWorld.call(this)}};a.prototype=Object.assign(Object.create(n["A"].prototype),{constructor:a,isTransformControlsPlane:!0})}).call(this,s("1157"))},"5fb2":function(e,t,s){"use strict";var n=2147483647,o=36,i=1,a=26,r=38,l=700,c=72,h=128,d="-",u=/[^\0-\u007E]/,p=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",f=o-i,v=Math.floor,g=String.fromCharCode,b=function(e){var t=[],s=0,n=e.length;while(s<n){var o=e.charCodeAt(s++);if(o>=55296&&o<=56319&&s<n){var i=e.charCodeAt(s++);56320==(64512&i)?t.push(((1023&o)<<10)+(1023&i)+65536):(t.push(o),s--)}else t.push(o)}return t},_=function(e){return e+22+75*(e<26)},w=function(e,t,s){var n=0;for(e=s?v(e/l):e>>1,e+=v(e/t);e>f*a>>1;n+=o)e=v(e/f);return v(n+(f+1)*e/(e+r))},C=function(e){var t=[];e=b(e);var s,r,l=e.length,u=h,p=0,f=c;for(s=0;s<e.length;s++)r=e[s],r<128&&t.push(g(r));var C=t.length,S=C;C&&t.push(d);while(S<l){var O=n;for(s=0;s<e.length;s++)r=e[s],r>=u&&r<O&&(O=r);var y=S+1;if(O-u>v((n-p)/y))throw RangeError(m);for(p+=(O-u)*y,u=O,s=0;s<e.length;s++){if(r=e[s],r<u&&++p>n)throw RangeError(m);if(r==u){for(var j=p,I=o;;I+=o){var E=I<=f?i:I>=f+a?a:I-f;if(j<E)break;var x=j-E,A=o-E;t.push(g(_(E+x%A))),j=v(x/A)}t.push(g(_(j))),f=w(p,y,S==C),p=0,++S}}++p,++u}return t.join("")};e.exports=function(e){var t,s,n=[],o=e.toLowerCase().replace(p,".").split(".");for(t=0;t<o.length;t++)s=o[t],n.push(u.test(s)?"xn--"+C(s):s);return n.join(".")}},6547:function(e,t,s){var n=s("a691"),o=s("1d80"),i=function(e){return function(t,s){var i,a,r=String(o(t)),l=n(s),c=r.length;return l<0||l>=c?e?"":void 0:(i=r.charCodeAt(l),i<55296||i>56319||l+1===c||(a=r.charCodeAt(l+1))<56320||a>57343?e?r.charAt(l):i:e?r.slice(l,l+2):a-56320+(i-55296<<10)+65536)}};e.exports={codeAt:i(!1),charAt:i(!0)}},"6a02":function(e,t,s){"use strict";(function(e){s("ac1f"),s("5319");var n=s("3099"),o=s("cf3d"),i=s("3ec3"),a=s("e2f7"),r=s("b155");t["a"]={name:"projects",components:{topBanner:n["a"],projectTem:o["a"],threeDBuilder:i["a"],mobileThreeDBuilder:a["a"],forFun:r["a"]},data:function(){return{projectsJson:{},forFunJson:{},menuArr:[],scrollingMenu:!1,activeMenuIndex:0,mobile:!1,showTD:!1,showTester:!1,timer:""}},methods:{getProject:function(){var e="/mock/projects.json",t=this.$i18n.locale;"zh_cn"==t&&(e="/mock/projectsCN.json"),this.$ajax.get(e).then(this.getProjectSucc).catch((function(e){console.log("error:"+e)}))},getProjectSucc:function(e){if(console.log(e),200==e.data.code){var t=e.data.data;for(var s in this.projectsJson=t,t)this.menuArr.push(s)}},jumpToRelate:function(t,s){e("html,body").scrollTop(e("#"+t).offset().top),this.activeMenuIndex=s,this.menuScroll()},menuScroll:function(){var t=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset,s=e(".animation_menu").height(),n=e(".project_main").offset().top,o=n+e(".project_wrapper").height();if(t>=n&&t<=o-s){this.scrollingMenu=!0;var i=this.menuArr;for(var a in i){var r=e("#"+i[a].replace(/ /g,"")).offset().top;t>=r&&(this.activeMenuIndex=a)}e(".scrollMenu").css("top",t-n+40)}else t<n&&(this.scrollingMenu=!1,this.activeMenuIndex=0,e(".animation_menu").css("top","50px"))},showThreeD:function(){this.timer=(new Date).getTime(),this.showTD=!this.showTD},getForFun:function(){var e="/mock/yuandian.json";this.$ajax.get(e).then(this.getForFunSucc).catch((function(e){console.log("error:"+e)}))},getForFunSucc:function(e){if(console.log(e),200==e.data.code){var t=e.data.data;this.forFunJson=t}},showTest:function(){this.timer=(new Date).getTime(),this.showTester=!this.showTester}},mounted:function(){this.getProject(),this.getForFun(),window.addEventListener("scroll",this.menuScroll),this.mobile=/Android|webOS|iPhone|iPad|BlackBerry/i.test(navigator.userAgent)},destroyed:function(){window.addEventListener("scroll",this.menuScroll)}}}).call(this,s("1157"))},"6c00":function(e,t,s){},8134:function(e,t,s){"use strict";(function(e){s("a9e3");t["a"]={name:"forFun",props:{forFunJson:Object},data:function(){return{showMenu:!0,showQuize:!1,quizeIndex:1,showResult:!1,nameValid:!1,showConstellation:!1,showQuestions:!1,showSex:!1,constellation:1,showTestIndex:0,sexFlag:"male",currentImg:null,currentResultImg:[],randomIndex:0,currentInput:1,submitTxt:"开始生成",userName:"",canvasImg:""}},methods:{hideSelf:function(){this.$parent.showTest()},showTest:function(e,t,s){if(this.userName="",t){switch(this.currentImg=t,this.currentResultImg=s,this.quizeIndex=Number(e),this.randomIndex=Math.ceil(Math.random()*this.currentResultImg.length)-1,this.showConstellation=!1,this.showQuestions=!1,this.showSex=!1,this.quizeIndex){case 1:break;case 2:this.showConstellation=!0,this.randomIndex=0,this.constellation=1;break;case 3:this.showSex=!0;break;case 7:this.showConstellation=!0,this.randomIndex=0,this.constellation=1;break;case 8:this.showConstellation=!0,this.randomIndex=0,this.constellation=1;break;case 9:break;default:console.log("default")}this.showMenu=!1,this.showQuize=!0}else alert("need data, please reload")},generateResult:function(){if(this.userName?this.showResult=!0:this.userName=e("#userInputName").val(),this.userName){switch(this.showQuize=!1,this.showConstellation=!0,this.quizeIndex){case 1:break;case 2:break;case 3:"male"===this.sexFlag?this.randomIndex=Math.ceil(8*Math.random())-1+6:this.randomIndex=Math.ceil(6*Math.random())-1;break;default:console.log("this.quizeIndex:"+this.quizeIndex)}console.log(this.userName),this.canvasRun()}else this.nameValid=!0},canvasRun:function(){var t=document.getElementById("resultImg"),s=document.getElementById("headImg"),n=document.getElementById("wechatQR"),o=document.getElementById("canvas"),i=o.getContext("2d"),a=t.width,r=t.height;switch(o.width=a,o.height=r,i.drawImage(t,0,0),this.quizeIndex){case 1:i.drawImage(n,500,755,120,120),i.font="bold 40px Courier New",i.fillStyle="#fff",i.textAlign="center",i.fillText(this.userName,320,125);break;case 2:i.drawImage(n,510,870,150,150),i.font="bold 45px Courier New",i.fillStyle="#000",i.fillText(this.userName,450,155);break;case 3:i.drawImage(n,370,780,100,100),i.font="45px Courier New",i.fillStyle="#000",i.textAlign="center",i.fillText(this.userName,315,80);break;case 4:i.drawImage(n,55,830,120,120),this.userName.length<=2?(i.font="bold 60px Courier New",i.fillStyle="#000",i.textAlign="center",i.fillText(this.userName,400,160)):(i.font="bold 45px Courier New",i.fillStyle="#000",i.textAlign="center",i.fillText(this.userName,400,155));break;case 5:i.drawImage(n,260,756,130,130),i.font="  50px Courier New",i.fillStyle="#000",i.textAlign="center",i.fillText(this.userName,320,80);break;case 6:i.drawImage(n,80,800,120,120),i.font="bold 50px Courier New",i.fillStyle="#000",i.textAlign="center",i.fillText(this.userName,320,162);break;case 7:i.drawImage(n,630,910,150,150),i.font="bold 45px Courier New",i.fillStyle="#000",i.textAlign="center",i.fillText(this.userName,400,76);break;case 8:i.drawImage(n,285,987,130,130),i.save(),i.arc(350,735,47,0,2*Math.PI),i.clip(),i.drawImage(s,300,685,100,100),i.restore(),i.font="bold 45px Courier New",i.fillStyle="#fff",i.textAlign="center",i.fillText(this.userName,345,270);break;case 9:i.drawImage(n,500,920,120,120),i.font="bold 50px Courier New",i.fillStyle="#000000",i.textAlign="center",i.fillText(this.userName,310,100);break;default:i.fillStyle="#fff"}var l=document.getElementsByTagName("canvas")[0];this.canvasImg=this.convertCanvasToImage(l),e("#results").html(this.canvasImg)},convertCanvasToImage:function(e){var t=new Image;return t.src=e.toDataURL("image/png"),t},validClick:function(t){this.nameValid=!1,"0"==t&&e("#userInputName").focus()}},watch:{constellation:function(e,t){e&&(this.randomIndex=e-1,console.log("this.randomIndex==="+this.randomIndex))},sexFlag:function(e,t){e&&(this.sexFlag=e,"male"===this.sexFlag?this.randomIndex=Math.ceil(8*Math.random())-1+6:this.randomIndex=Math.ceil(6*Math.random())-1,console.log("this.maleSelect==="+this.sexFlag))}}}}).call(this,s("1157"))},"841c":function(e,t,s){"use strict";var n=s("d784"),o=s("825a"),i=s("1d80"),a=s("129f"),r=s("14c3");n("search",1,(function(e,t,s){return[function(t){var s=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,s):new RegExp(t)[e](String(s))},function(e){var n=s(t,e,this);if(n.done)return n.value;var i=o(e),l=String(this),c=i.lastIndex;a(c,0)||(i.lastIndex=0);var h=r(i,l);return a(i.lastIndex,c)||(i.lastIndex=c),null===h?-1:h.index}]}))},"857a":function(e,t,s){var n=s("1d80"),o=/"/g;e.exports=function(e,t,s,i){var a=String(n(e)),r="<"+t;return""!==s&&(r+=" "+s+'="'+String(i).replace(o,"&quot;")+'"'),r+">"+a+"</"+t+">"}},"8aa5":function(e,t,s){"use strict";var n=s("6547").charAt;e.exports=function(e,t,s){return t+(s?n(e,t).length:1)}},"8d33":function(e,t,s){"use strict";var n=s("cf0c"),o=s.n(n);o.a},"96cf":function(e,t,s){var n=function(e){"use strict";var t,s=Object.prototype,n=s.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",r=o.toStringTag||"@@toStringTag";function l(e,t,s){return Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(P){l=function(e,t,s){return e[t]=s}}function c(e,t,s,n){var o=t&&t.prototype instanceof v?t:v,i=Object.create(o.prototype),a=new A(n||[]);return i._invoke=j(e,s,a),i}function h(e,t,s){try{return{type:"normal",arg:e.call(t,s)}}catch(P){return{type:"throw",arg:P}}}e.wrap=c;var d="suspendedStart",u="suspendedYield",p="executing",m="completed",f={};function v(){}function g(){}function b(){}var _={};_[i]=function(){return this};var w=Object.getPrototypeOf,C=w&&w(w(T([])));C&&C!==s&&n.call(C,i)&&(_=C);var S=b.prototype=v.prototype=Object.create(_);function O(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function s(o,i,a,r){var l=h(e[o],e,i);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"===typeof d&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){s("next",e,a,r)}),(function(e){s("throw",e,a,r)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return s("throw",e,a,r)}))}r(l.arg)}var o;function i(e,n){function i(){return new t((function(t,o){s(e,n,t,o)}))}return o=o?o.then(i,i):i()}this._invoke=i}function j(e,t,s){var n=d;return function(o,i){if(n===p)throw new Error("Generator is already running");if(n===m){if("throw"===o)throw i;return M()}s.method=o,s.arg=i;while(1){var a=s.delegate;if(a){var r=I(a,s);if(r){if(r===f)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(n===d)throw n=m,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);n=p;var l=h(e,t,s);if("normal"===l.type){if(n=s.done?m:u,l.arg===f)continue;return{value:l.arg,done:s.done}}"throw"===l.type&&(n=m,s.method="throw",s.arg=l.arg)}}}function I(e,s){var n=e.iterator[s.method];if(n===t){if(s.delegate=null,"throw"===s.method){if(e.iterator["return"]&&(s.method="return",s.arg=t,I(e,s),"throw"===s.method))return f;s.method="throw",s.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var o=h(n,e.iterator,s.arg);if("throw"===o.type)return s.method="throw",s.arg=o.arg,s.delegate=null,f;var i=o.arg;return i?i.done?(s[e.resultName]=i.value,s.next=e.nextLoc,"return"!==s.method&&(s.method="next",s.arg=t),s.delegate=null,f):i:(s.method="throw",s.arg=new TypeError("iterator result is not an object"),s.delegate=null,f)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var s=e[i];if(s)return s.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function s(){while(++o<e.length)if(n.call(e,o))return s.value=e[o],s.done=!1,s;return s.value=t,s.done=!0,s};return a.next=a}}return{next:M}}function M(){return{value:t,done:!0}}return g.prototype=S.constructor=b,b.constructor=g,g.displayName=l(b,r,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,r,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},O(y.prototype),y.prototype[a]=function(){return this},e.AsyncIterator=y,e.async=function(t,s,n,o,i){void 0===i&&(i=Promise);var a=new y(c(t,s,n,o),i);return e.isGeneratorFunction(s)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(S),l(S,r,"Generator"),S[i]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var s in e)t.push(s);return t.reverse(),function s(){while(t.length){var n=t.pop();if(n in e)return s.value=n,s.done=!1,s}return s.done=!0,s}},e.values=T,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var s in this)"t"===s.charAt(0)&&n.call(this,s)&&!isNaN(+s.slice(1))&&(this[s]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var s=this;function o(n,o){return r.type="throw",r.arg=e,s.next=n,o&&(s.method="next",s.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],r=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.finallyLoc===e)return this.complete(s.completion,s.afterLoc),x(s),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var s=this.tryEntries[t];if(s.tryLoc===e){var n=s.completion;if("throw"===n.type){var o=n.arg;x(s)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,s,n){return this.delegate={iterator:T(e),resultName:s,nextLoc:n},"next"===this.method&&(this.arg=t),f}},e}(e.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},9861:function(e,t,s){"use strict";s("e260");var n=s("23e7"),o=s("d066"),i=s("0d3b"),a=s("6eeb"),r=s("e2cc"),l=s("d44e"),c=s("9ed3"),h=s("69f3"),d=s("19aa"),u=s("5135"),p=s("0366"),m=s("f5df"),f=s("825a"),v=s("861d"),g=s("7c73"),b=s("5c6c"),_=s("9a1f"),w=s("35a1"),C=s("b622"),S=o("fetch"),O=o("Headers"),y=C("iterator"),j="URLSearchParams",I=j+"Iterator",E=h.set,x=h.getterFor(j),A=h.getterFor(I),T=/\+/g,M=Array(4),P=function(e){return M[e-1]||(M[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},k=function(e){try{return decodeURIComponent(e)}catch(t){return e}},H=function(e){var t=e.replace(T," "),s=4;try{return decodeURIComponent(t)}catch(n){while(s)t=t.replace(P(s--),k);return t}},D=/[!'()~]|%20/g,N={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Z=function(e){return N[e]},L=function(e){return encodeURIComponent(e).replace(D,Z)},F=function(e,t){if(t){var s,n,o=t.split("&"),i=0;while(i<o.length)s=o[i++],s.length&&(n=s.split("="),e.push({key:H(n.shift()),value:H(n.join("="))}))}},W=function(e){this.entries.length=0,F(this.entries,e)},R=function(e,t){if(e<t)throw TypeError("Not enough arguments")},z=c((function(e,t){E(this,{type:I,iterator:_(x(e).entries),kind:t})}),"Iterator",(function(){var e=A(this),t=e.kind,s=e.iterator.next(),n=s.value;return s.done||(s.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),s})),G=function(){d(this,G,j);var e,t,s,n,o,i,a,r,l,c=arguments.length>0?arguments[0]:void 0,h=this,p=[];if(E(h,{type:j,entries:p,updateURL:function(){},updateSearchParams:W}),void 0!==c)if(v(c))if(e=w(c),"function"===typeof e){t=e.call(c),s=t.next;while(!(n=s.call(t)).done){if(o=_(f(n.value)),i=o.next,(a=i.call(o)).done||(r=i.call(o)).done||!i.call(o).done)throw TypeError("Expected sequence with length 2");p.push({key:a.value+"",value:r.value+""})}}else for(l in c)u(c,l)&&p.push({key:l,value:c[l]+""});else F(p,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},B=G.prototype;r(B,{append:function(e,t){R(arguments.length,2);var s=x(this);s.entries.push({key:e+"",value:t+""}),s.updateURL()},delete:function(e){R(arguments.length,1);var t=x(this),s=t.entries,n=e+"",o=0;while(o<s.length)s[o].key===n?s.splice(o,1):o++;t.updateURL()},get:function(e){R(arguments.length,1);for(var t=x(this).entries,s=e+"",n=0;n<t.length;n++)if(t[n].key===s)return t[n].value;return null},getAll:function(e){R(arguments.length,1);for(var t=x(this).entries,s=e+"",n=[],o=0;o<t.length;o++)t[o].key===s&&n.push(t[o].value);return n},has:function(e){R(arguments.length,1);var t=x(this).entries,s=e+"",n=0;while(n<t.length)if(t[n++].key===s)return!0;return!1},set:function(e,t){R(arguments.length,1);for(var s,n=x(this),o=n.entries,i=!1,a=e+"",r=t+"",l=0;l<o.length;l++)s=o[l],s.key===a&&(i?o.splice(l--,1):(i=!0,s.value=r));i||o.push({key:a,value:r}),n.updateURL()},sort:function(){var e,t,s,n=x(this),o=n.entries,i=o.slice();for(o.length=0,s=0;s<i.length;s++){for(e=i[s],t=0;t<s;t++)if(o[t].key>e.key){o.splice(t,0,e);break}t===s&&o.push(e)}n.updateURL()},forEach:function(e){var t,s=x(this).entries,n=p(e,arguments.length>1?arguments[1]:void 0,3),o=0;while(o<s.length)t=s[o++],n(t.value,t.key,this)},keys:function(){return new z(this,"keys")},values:function(){return new z(this,"values")},entries:function(){return new z(this,"entries")}},{enumerable:!0}),a(B,y,B.entries),a(B,"toString",(function(){var e,t=x(this).entries,s=[],n=0;while(n<t.length)e=t[n++],s.push(L(e.key)+"="+L(e.value));return s.join("&")}),{enumerable:!0}),l(G,j),n({global:!0,forced:!i},{URLSearchParams:G}),i||"function"!=typeof S||"function"!=typeof O||n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,s,n,o=[e];return arguments.length>1&&(t=arguments[1],v(t)&&(s=t.body,m(s)===j&&(n=t.headers?new O(t.headers):new O,n.has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:b(0,String(s)),headers:b(0,n)}))),o.push(t)),S.apply(this,o)}}),e.exports={URLSearchParams:G,getState:x}},"99af":function(e,t,s){"use strict";var n=s("23e7"),o=s("d039"),i=s("e8b5"),a=s("861d"),r=s("7b0b"),l=s("50c4"),c=s("8418"),h=s("65f0"),d=s("1dde"),u=s("b622"),p=s("2d00"),m=u("isConcatSpreadable"),f=9007199254740991,v="Maximum allowed index exceeded",g=p>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),b=d("concat"),_=function(e){if(!a(e))return!1;var t=e[m];return void 0!==t?!!t:i(e)},w=!g||!b;n({target:"Array",proto:!0,forced:w},{concat:function(e){var t,s,n,o,i,a=r(this),d=h(a,0),u=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?a:arguments[t],_(i)){if(o=l(i.length),u+o>f)throw TypeError(v);for(s=0;s<o;s++,u++)s in i&&c(d,u,i[s])}else{if(u>=f)throw TypeError(v);c(d,u++,i)}return d.length=u,d}})},"9a1f":function(e,t,s){var n=s("825a"),o=s("35a1");e.exports=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},"9b74":function(e,t,s){},a339:function(e,t,s){"use strict";var n=s("a85a"),o=s.n(n);o.a},a85a:function(e,t,s){},af03:function(e,t,s){var n=s("d039");e.exports=function(e){return n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b155:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mainWrapper"},[s("div",{staticClass:"mobile_bg",on:{click:function(t){return e.hideSelf()}}}),s("img",{staticClass:"mobile_module",attrs:{src:"/image/yuandian/iphonex.png",alt:""}}),s("div",{staticClass:"topNav img_wrapper"},[s("img",{attrs:{src:"/image/yuandian/logo.png",alt:""}}),e.showMenu?e._e():s("div",{staticClass:"close_content iconfont",on:{click:function(t){e.showMenu=!0,e.showQuize=!1,e.showResult=!1}}},[e._v("")])]),s("div",{staticClass:"mobileWrapper"},[e.showMenu?s("div",{staticClass:"forFun_menu clearfix"},e._l(e.forFunJson.menu,(function(t,n){return s("div",{key:n,staticClass:"each_top_menu",on:{click:function(s){return e.showTest(t.id,t.bigImgUrl,t.resultImgs)}}},[t.id<7?s("div",{staticClass:"top_menu img_wrapper"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgUrl,expression:"item.imgUrl"}],attrs:{alt:""}}),s("p",{staticClass:"show_test_num"},[s("span",[e._v(e._s(t.testNum))]),e._v("人在测")])]):s("div",{staticClass:"big_menu img_wrapper"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.imgUrl,expression:"item.imgUrl"}],attrs:{alt:""}}),s("p",{staticClass:"show_test_num"},[s("span",[e._v(e._s(t.testNum))]),e._v("人在玩")])])])})),0):e._e(),e.showQuize?s("div",{staticClass:"forFunContent"},[s("div",{staticClass:"img_wrapper"},[s("img",{attrs:{src:this.currentImg,alt:""}})]),s("div",{staticClass:"inputs name"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{type:"text",id:"userInputName",placeholder:"姓名：请输入姓名",maxlength:"4"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}}),e.nameValid?s("div",{staticClass:"name_valid",on:{click:function(t){return e.validClick(0)}}},[e._v("* 请输入姓名")]):e._e()]),e.showSex?s("div",{staticClass:"inputs sex clearfix"},[s("div",{staticClass:"title"},[e._v("性别：")]),s("div",{staticClass:"each_sex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.sexFlag,expression:"sexFlag"}],attrs:{type:"radio",id:"male",name:"sex",value:"male",checked:"checked"},domProps:{checked:e._q(e.sexFlag,"male")},on:{change:function(t){e.sexFlag="male"}}}),s("label",{staticClass:"sexLabel"},[e._v("男")])]),s("div",{staticClass:"each_sex"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.sexFlag,expression:"sexFlag"}],attrs:{type:"radio",id:"female",name:"sex",value:"female"},domProps:{checked:e._q(e.sexFlag,"female")},on:{change:function(t){e.sexFlag="female"}}}),s("label",{staticClass:"sexLabel"},[e._v("女")])])]):e._e(),e.showConstellation?s("div",{staticClass:"inputs constellation"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.constellation,expression:"constellation"}],staticClass:"xingzuo",attrs:{id:"xingzuo"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.constellation=t.target.multiple?s:s[0]}}},[s("option",{attrs:{name:"xingzuo",value:"1"}},[e._v("白羊座 ( 03/21 - 04/19 )")]),s("option",{attrs:{name:"xingzuo",value:"2"}},[e._v("金牛座 ( 04/20 - 05/20)")]),s("option",{attrs:{name:"xingzuo",value:"3"}},[e._v("双子座 ( 05/21 - 06/21)")]),s("option",{attrs:{name:"xingzuo",value:"4"}},[e._v("巨蟹座 ( 06/22 - 07/22)")]),s("option",{attrs:{name:"xingzuo",value:"5"}},[e._v("狮子座 ( 07/23 - 08/22)")]),s("option",{attrs:{name:"xingzuo",value:"6"}},[e._v("处女座 ( 08/23 - 09/22)")]),s("option",{attrs:{name:"xingzuo",value:"7"}},[e._v("天秤座 ( 09/23 - 10/23)")]),s("option",{attrs:{name:"xingzuo",value:"8"}},[e._v("天蝎座 ( 10/24 - 11/22)")]),s("option",{attrs:{name:"xingzuo",value:"9"}},[e._v("射手座 ( 11/23 - 12/21)")]),s("option",{attrs:{name:"xingzuo",value:"10"}},[e._v("魔羯座 ( 12/22 - 01/19)")]),s("option",{attrs:{name:"xingzuo",value:"11"}},[e._v("水瓶座 ( 01/20 - 02/18)")]),s("option",{attrs:{name:"xingzuo",value:"12"}},[e._v("双鱼座 ( 02/19 - 03/20）")])])]):e._e(),e.showQuestions?s("div",{staticClass:"inputs questions"},[s("div",{staticClass:"each_q"})]):e._e(),s("div",{staticClass:"text-center note"},[e._v(" 我们向您保证，用户输入的所有内容只会用于测试，不会将个人信息采集记录。 ")]),s("div",{staticClass:"submit_btn",on:{click:function(t){return e.generateResult()}}},[e._v(e._s(e.submitTxt))])]):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.showResult,expression:"showResult"}],staticClass:"forFunResult"},[s("div",{staticClass:"resultTitle"},[e._v("长按保存你的结果图片吧")]),s("div",{staticClass:"img_wrapper"},[s("img",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],attrs:{src:this.currentResultImg[this.randomIndex],id:"resultImg"}}),s("div",{staticStyle:{"text-align":"center",width:"100%"},attrs:{id:"results"}}),s("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{id:"canvas"}}),s("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{src:"/image/footer/wechat_xin.jpg",id:"wechatQR",alt:""}}),s("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{src:"/image/head_ico.png",id:"headImg",alt:""}})])])])])},o=[],i=s("8134"),a=i["a"],r=(s("2cc9"),s("2877")),l=Object(r["a"])(a,n,o,!1,null,"feeecc32",null);t["a"]=l.exports},bf19:function(e,t,s){"use strict";var n=s("23e7");n({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},c42e:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project_wrapper clearfix"},[s("div",{staticClass:"project_banner"},[s("topBanner",{attrs:{bannerImg:"/image/banner2.png",bannerContent:e.$t("projects.bannerInfo")}})],1),e.showTD&&!e.mobile?s("threeDBuilder",{key:e.timer}):e._e(),e.showTD&&e.mobile?s("mobileThreeDBuilder",{key:e.timer}):e._e(),e.showTester?s("forFun",{key:e.timer,attrs:{forFunJson:e.forFunJson}}):e._e(),s("div",{staticClass:"project_main clearfix"},[e._l(e.projectsJson,(function(t,n,o){return s("div",{key:o,staticClass:"each_career clearfix"},[s("h1",{staticClass:"company_name",attrs:{id:n.replace(/ /g,"")}},[s("p",{staticClass:"jobTitle"},[e._v(e._s(t.jobtitle))]),s("p",{staticClass:"jobCompany"},[e._v("-- "+e._s(t.companyName))]),s("p",{staticClass:"jobduration"},[e._v("-- "+e._s(t.startDate)+" - "+e._s(t.endDate)+" ("+e._s(t.duration)+") ")])]),e._l(t.projects,(function(t){return s("projectTem",{key:t.id,attrs:{bgImg:t.img,titleInf:t.title,desc:t.desc,tags:t.tags,link:t.url,code:t.code,showTD:e.showTD}})}))],2)})),e.mobile?e._e():s("div",{staticClass:"animation_menu",class:e.scrollingMenu?"scrollMenu":""},e._l(e.menuArr,(function(t,n){return s("div",{key:n,staticClass:"each_company_menu",class:e.activeMenuIndex==n?"active_menu":"",on:{click:function(s){e.jumpToRelate(t.replace(/ /g,""),n)}}},[e._v(e._s(t)+" ")])})),0)],2)],1)},o=[],i=s("6a02"),a=i["a"],r=(s("390b"),s("2877")),l=Object(r["a"])(a,n,o,!1,null,"4738002f",null);t["default"]=l.exports},cf0c:function(e,t,s){},cf3d:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"each_content"},["3"!=e.code&&"4"!=e.code?s("a",{attrs:{href:e.link}},[s("div",{staticClass:"each_wrapper"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bgImg,expression:"bgImg"}],key:e.bgImg,staticClass:"each_img",attrs:{alt:""}}),s("div",{staticClass:"info_wrapper"},[s("div",{staticClass:"thisTitle"},[e._v(e._s(e.titleInf))]),s("div",{staticClass:"thisDes"},[e._v(e._s(e.desc))]),s("div",{staticClass:"thisTags"},[s("div",{staticClass:"subTitle"},[e._v("Tags:")]),e._v(" "+e._s(e.tags)+" ")])])])]):"3"==e.code||"4"==e.code?s("div",{staticClass:"threed",on:{click:function(t){"3"==e.code?e.show3Dbuilder():e.showTester()}}},[s("div",{staticClass:"tip"},[e._v(e._s(e.$t("projects.tip")))]),s("div",{staticClass:"each_wrapper"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.bgImg,expression:"bgImg"}],key:e.bgImg,staticClass:"each_img",attrs:{alt:""}}),s("div",{staticClass:"info_wrapper"},[s("div",{staticClass:"thisTitle"},[e._v(e._s(e.titleInf))]),s("div",{staticClass:"thisDes"},[e._v(e._s(e.desc))]),s("div",{staticClass:"thisTags"},[s("div",{staticClass:"subTitle"},[e._v("Tags:")]),e._v(" "+e._s(e.tags)+" ")])])])]):e._e()])},o=[],i=(s("a9e3"),{name:"projectTem",props:{bgImg:String,titleInf:String,desc:String,tags:String,link:String,code:Number},methods:{show3Dbuilder:function(){this.$parent.showThreeD()},showTester:function(){this.$parent.showTest()}}}),a=i,r=(s("316e"),s("2877")),l=Object(r["a"])(a,n,o,!1,null,"550acfc2",null);t["a"]=l.exports},d162:function(e,t,s){},d784:function(e,t,s){"use strict";s("ac1f");var n=s("6eeb"),o=s("d039"),i=s("b622"),a=s("9263"),r=s("9112"),l=i("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),h=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),u=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),p=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var s="ab".split(e);return 2!==s.length||"a"!==s[0]||"b"!==s[1]}));e.exports=function(e,t,s,d){var m=i(e),f=!o((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),v=f&&!o((function(){var t=!1,s=/a/;return"split"===e&&(s={},s.constructor={},s.constructor[l]=function(){return s},s.flags="",s[m]=/./[m]),s.exec=function(){return t=!0,null},s[m](""),!t}));if(!f||!v||"replace"===e&&(!c||!h||u)||"split"===e&&!p){var g=/./[m],b=s(m,""[e],(function(e,t,s,n,o){return t.exec===a?f&&!o?{done:!0,value:g.call(t,s,n)}:{done:!0,value:e.call(s,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:u}),_=b[0],w=b[1];n(String.prototype,e,_),n(RegExp.prototype,m,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}d&&r(RegExp.prototype[m],"sham",!0)}},db12:function(e,t,s){"use strict";(function(e){s("7db0"),s("c975"),s("a434"),s("b0c0"),s("a9e3"),s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),s("bf19"),s("96cf");var n=s("1da1"),o=(s("d162"),s("5a89")),i=s("4721"),a=s("518e"),r=s("8bc1"),l=s("5b55");t["a"]={name:"ThreeDimensionalBuilder",data:function(){return{mobile:!1,WORK_SPACE_SIZE:200,CONTAIN_WIDTH:null,CONTAIN_HEIGHT:null,SHAPE_SIZE:20,LIMIT_SIZE:4,renderer:null,camera:null,cameraZoom:1,scene:null,plane:null,objects:[],shapesObj:[],gridHelper:null,gradGroundMesh:null,mouseHelper:null,mouseHelperMaterial:null,focusedTransformObj:null,deleteObjFlag:null,gradGroundMesh1:null,composer:null,renderPass:null,outlinePass:null,effectFXAA:null,controls:null,transformControl:null,container:null,orientationContr:null,controlsMoved:!1,shapesEventL:null,shapesMain:null,showMore:!0,showZoomOption:!1,showColorOption:!1,isWhite:!0,colorControl:!0,selectedDragObj:null,selectedDragObjFlag:null,dragObj:null,dragedFlag:null,maxW:null,maxH:null,movedDir:null,shapesList:[],cartoonStlList:[],shapesListShow:!1,cartoonStlShow:!1,controlBar:!1,redoActive:!1,undoActive:!1,stlGeoFlag:null,showTextWindow:!1,currentObj:null,textInput:"",textInput1:"",fontLoader:null,wordFont:null,wordColor:14540253,shootedFlag:!1,currentObjMesh:null,currentObjMaterial:null,currentModule:0,transformDragFlag:!1,twoPointTouchFlag:!1,mouse:null,raycaster:null,isShiftDown:!1,saveFlag:!1,activeSave:!1,saveNmaeWindow:!1,notSaveNote:!1,goHomeFlag:!1,allOperation:[],eachObjectInfo:{},eachRedoObjectInfo:{},redoOperation:[],selectedObjects:[],statusTxt:null,controlType:null,textTR:"当前状态:移动",textSC:"当前状态:改变大小",textRO:"当前状态:旋转",transformControlModeType:1,intersectsSelect:[],intersection:{intersects:!1,point:new o["bb"],normal:new o["bb"]},tcScale:null,tcScaleYPosition:null,tcScaleY:null,tcScaleYPositionFlag:null,tcX:null,tcY:null,tcZ:null,showLoading:!1,progressingBar:0,inputCanConfirm:!1}},methods:{init:function(){var e=this;e.container=document.getElementById("container"),e.renderer=new o["cb"]({antialias:!0,alpha:!0}),e.renderer.setPixelRatio(window.devicePixelRatio?window.devicePixelRatio:1),e.renderer.setSize(e.CONTAIN_WIDTH,e.CONTAIN_HEIGHT),e.renderer.shadowMap.enabled=!0,e.renderer.autoClear=!1,e.renderer.setClearColor(0,0),e.container.appendChild(e.renderer.domElement),e.camera=new o["J"](45,e.CONTAIN_WIDTH/e.CONTAIN_HEIGHT,1,1e4),e.camera.position.set(170,145,255),e.camera.lookAt(0,0,0),e.scene=new o["Q"];var t=new o["K"](e.WORK_SPACE_SIZE,e.WORK_SPACE_SIZE);t.rotateX(-Math.PI/2),e.plane=new o["A"](t,new o["B"]({color:15066335,visible:!0})),e.plane.name="plane",e.plane.receiveShadow=!0,e.plane.castShadow=!0,e.scene.add(e.plane),e.objects.push(e.plane),e.raycaster=new o["N"],e.mouse=new o["ab"],e.grads();var s=new o["a"](6316128,1);e.scene.add(s);var n=new o["h"](16777215,1.3);n.position.set(1,.75,.5).normalize(),e.scene.add(n),e.orbitCont(),e.transformCont(),e.animate(),e.onWindowResize()},grads:function(){this.gridHelper=new o["t"](this.WORK_SPACE_SIZE,20,10066329,211392921),this.gridHelper.name="GridHelper",this.scene.add(this.gridHelper),this.gradGroundMesh=new o["A"](new o["b"](this.WORK_SPACE_SIZE,.8,this.WORK_SPACE_SIZE),new o["C"]({color:16777215})),this.gradGroundMesh.position.y=-.8,this.gradGroundMesh.name="GridHelper",this.gradGroundMesh.receiveShadow=!0,this.gradGroundMesh.castShadow=!0,this.scene.add(this.gradGroundMesh),this.gradGroundMesh1=new o["A"](new o["b"](this.WORK_SPACE_SIZE,3,this.WORK_SPACE_SIZE),new o["C"]({color:16762985})),this.gradGroundMesh1.position.y=-2.5,this.gradGroundMesh1.name="GridHelper",this.gradGroundMesh1.receiveShadow=!0,this.gradGroundMesh1.castShadow=!0,this.scene.add(this.gradGroundMesh1)},outline:function(){this.composer=new o["EffectComposer"](this.renderer);var e=new o["RenderPass"](this.scene,this.camera);this.composer.addPass(e),this.outlinePass=new o["OutlinePass"](new o["ab"](this.CONTAIN_WIDTH-100,this.CONTAIN_HEIGHT),this.scene,this.camera),this.outlinePass.edgeStrength=4,this.outlinePass.edgeThickness=1,this.outlinePass.visibleEdgeColor.set("#00ff00"),this.outlinePass.hiddenEdgeColor.set("#00ff00"),this.outlinePass.edgeGlow=1,this.composer.addPass(this.outlinePass),this.effectFXAA=new o["ShaderPass"](o["FXAAShader"]),this.effectFXAA.uniforms["resolution"].value.set(1/this.CONTAIN_WIDTH,1/this.CONTAIN_HEIGHT)},orbitCont:function(){var e=this;e.controls=new i["a"](e.camera,e.renderer.domElement),e.controls.minDistance=10,e.controls.maxDistance=1300,e.controls.enableKeys=!0,e.controls.rotateSpeed=.3,e.controls.keys={LEFT:65,UP:87,RIGHT:68,BOTTOM:83},e.controls.enablePan=!1,e.controls.enableZoom=!1,e.controls.addEventListener("change",(function(){e.controlsMoved=!0,e.objects.length>1&&e.camera.position.y<0?(e.clearCache(e.gridHelper),e.scene.remove(e.gridHelper),e.clearCache(e.gradGroundMesh),e.scene.remove(e.gradGroundMesh),e.clearCache(e.gradGroundMesh1),e.scene.remove(e.gradGroundMesh1)):(e.clearCache(e.gridHelper),e.scene.remove(e.gridHelper),e.clearCache(e.gradGroundMesh),e.scene.remove(e.gradGroundMesh),e.clearCache(e.gradGroundMesh1),e.scene.remove(e.gradGroundMesh1),e.scene.add(e.gridHelper),e.scene.add(e.gradGroundMesh),e.scene.add(e.gradGroundMesh1))}))},transformCont:function(){var e=this;e.transformControl=new l["a"](this.camera,this.renderer.domElement),e.transformControl.name="transformControl",e.transformControl.size=1.5,e.scene.add(e.transformControl),e.transformControl.addEventListener("dragging-changed",(function(t){e.controls&&(e.controls.enabled=!t.value,e.transformDragFlag=!t.value)}),!1),e.transformControl.addEventListener("change",(function(){e.shootedFlag&&e.shapesController(0),e.showCurrentColor(),e.onAnimationStep()}),!1),e.transformControl.addEventListener("mouseDown",(function(){e.transformControlMove=!1,e.checkScalePosition(e.transformControl.object)}),!1),e.transformControl.addEventListener("objectChange",(function(){e.transformControlMove=!0}),!1),e.transformControl.addEventListener("mouseUp",(function(){e.transformControlMove&&e.allOperationAdd(),e.showCurrentColor(),window.focusedTransformObj&&(e.transformControl.object=window.focusedTransformObj)}),!1)},containerListenner:function(){this.showColorOption=!1,this.showZoomOption=!1,this.onDocumentMouseDown(event)},containerMouseDown:function(){var e=this;e.controlsMoved=!1,e.showColorOption=!1,e.showZoomOption=!1,e.controls.enabled=e.transformDragFlag,e.twoPointTouchFlag=!1,e.touchScale=""},containerMouseMove:function(){},containerMouseUp:function(){this.transformControl.object&&(window.focusedTransformObj=this.transformControl.object),this.controlsMoved||this.transformControlMove||setTimeout((function(){this.onDocumentMouseDown(event)}),100),this.tcScaleYPosition="",this.tcScaleYPositionFlag="",this.tcScaleY="",this.tcX="",this.tcY="",this.tcZ="",this.transformControlMove=!1},orientationCont:function(){this.orientationContr=new o["OrientationControls"](50),document.body.appendChild(this.orientationContr.element),this.orientationContr.element.addEventListener("click",(function(e){switch(e.target.id){case"front":this.camera.position.set(0,0,300);break;case"back":this.camera.position.set(0,0,-300);break;case"top":this.camera.position.set(0,300,0);break;case"bottom":this.camera.position.set(0,-300,0);break;case"left":this.camera.position.set(-300,0,0);break;case"right":this.camera.position.set(300,0,0);break}this.camera.lookAt(this.scene.position),this.camera.updateProjectionMatrix()}))},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},onWindowResize:function(){this.showMore?(this.camera.aspect=(this.CONTAIN_WIDTH-100)/this.CONTAIN_HEIGHT,this.renderer.setSize(this.CONTAIN_WIDTH-100,this.CONTAIN_HEIGHT)):(this.camera.aspect=this.CONTAIN_WIDTH/this.CONTAIN_HEIGHT,this.renderer.setSize(this.CONTAIN_WIDTH,this.CONTAIN_HEIGHT)),this.camera.updateProjectionMatrix()},clearCache:function(e){e.geometry.dispose(),e.material.dispose()},render:function(){this.renderer.render(this.scene,this.camera)},listModule:function(){var e="/mock/moduleList.json";this.$ajax.get(e).then(this.listModuleSucc).catch((function(e){console.log("error:"+e)}))},listModuleSucc:function(e){e&&e.data&&(this.shapesList=e.data.data.shapes,this.cartoonStlList=e.data.data.stl)},showModule:function(e){0==e?(this.shapesListShow=!0,this.cartoonStlShow=!1):1==e&&(this.shapesListShow=!1,this.cartoonStlShow=!0)},hideModule:function(){this.shapesListShow=!1,this.cartoonStlShow=!1},showMoreFn:function(){this.showMore?this.showMore=!1:this.showMore=!0,this.onWindowResize()},dropOffListerner:function(){console.log("dropOffListerner");var t=this;t.shapesMain.addEventListener("touchstart",(function(){t.showColorOption=!1,t.showColorOption=!1})),t.shapesEventL.addEventListener("touchstart",(function(s){t.showColorOption=!1,t.showColorOption=!1,t.selectedDragObj=e(s.target),t.selectedDragObj.hasClass("drag")&&(e(".active_shape").removeClass("active_shape"),t.selectedDragObj.hasClass("name")?(t.dragObj=e(t.selectedDragObj).parents(".module").find(".sprint").clone(),e(t.selectedDragObj).parents(".module").addClass("active_shape"),t.selectedDragObjFlag=!0):t.selectedDragObj.hasClass("sprint")?(t.dragObj=t.selectedDragObj.clone(),e(t.selectedDragObj).parents(".module").addClass("active_shape"),t.selectedDragObjFlag=!0):t.selectedDragObj.hasClass("module")&&(t.dragObj=e(t.selectedDragObj).find(".sprint").clone(),e(t.selectedDragObj).addClass("active_shape"),t.selectedDragObjFlag=!1),t.dragObj.addClass("startDrag"),t.maxW=e(".builder .main_wrapper").width()-t.selectedDragObj[0].offsetWidth,t.maxH=e(".builder .main_wrapper").height()-t.selectedDragObj[0].offsetHeight)}),!1),t.shapesEventL.addEventListener("touchmove",(function(s){t.dragedFlag=!0;var n=s||window.event,o=n.targetTouches[0],i=window.innerWidth;if(t.movedDir=i-o.clientX,t.dragObj&&t.movedDir>100){e("body").append(t.dragObj);var a=o.clientX-50,r=o.clientY-50;a<0?a=0:a>=t.maxW&&(a=t.maxW),r<0||r>=t.maxH&&(r=t.maxH),t.dragObj[0].style.left=a+25+"px",t.dragObj[0].style.top=r+"px"}}),!1),t.shapesEventL.addEventListener("touchend",(function(s){var n,o,i;t.dragObj&&t.dragedFlag&&t.movedDir>100?(t.selectedDragObjFlag?(n=Number(e(t.selectedDragObj).parents(".module").find(".this_code").val()),o=Number(e(t.selectedDragObj).parents(".module").find(".this_module").val()),i=Number(e(t.selectedDragObj).parents(".module").find(".this_url").val())):0==t.selectedDragObjFlag&&(n=Number(e(t.selectedDragObj).find(".this_code").val()),o=Number(e(t.selectedDragObj).find(".this_module").val()),i=Number(e(t.selectedDragObj).find(".this_url").val())),0==o?t.changeShapes(n):1==o?t.loadSTL(n):2==o?t.showInput(0):3==o&&t.loadLocalSTL(i),e(t.dragObj).remove(),setTimeout((function(){t.onDocumentMouseDown(s)}),100)):e(t.dragObj).remove();t.dragedFlag=!1,e(".active_shape").removeClass("active_shape")}),!1),t.shapesMain.addEventListener("mousedown",(function(){t.showColorOption=!1,t.showColorOption=!1})),t.shapesEventL.addEventListener("mousedown",(function(s){console.log(123),t.showColorOption=!1,t.showColorOption=!1,t.selectedDragObj=e(s.target),t.selectedDragObj.hasClass("drag")&&(e(".active_shape").removeClass("active_shape"),t.selectedDragObj.hasClass("name")?(t.dragObj=e(t.selectedDragObj).parents(".module").find(".sprint").clone(),e(t.selectedDragObj).parents(".module").addClass("active_shape"),t.selectedDragObjFlag=!0):t.selectedDragObj.hasClass("sprint")?(t.dragObj=t.selectedDragObj.clone(),e(t.selectedDragObj).parents(".module").addClass("active_shape"),t.selectedDragObjFlag=!0):t.selectedDragObj.hasClass("module")&&(t.dragObj=e(t.selectedDragObj).find(".sprint").clone(),e(t.selectedDragObj).addClass("active_shape"),t.selectedDragObjFlag=!1),t.dragObj.addClass("startDrag"),t.maxW=e(".builder .main_wrapper").width()-t.selectedDragObj[0].offsetWidth,t.maxH=e(".builder .main_wrapper").height()-t.selectedDragObj[0].offsetHeight)}),!1),t.shapesEventL.addEventListener("mousemove",(function(s){t.dragedFlag=!0;var n=s||window.event,o=n.targetTouches[0],i=window.innerWidth;if(t.movedDir=i-o.clientX,t.dragObj&&t.movedDir>100){e("body").append(t.dragObj);var a=o.clientX-50,r=o.clientY-50;a<0?a=0:a>=t.maxW&&(a=t.maxW),r<0||r>=t.maxH&&(r=t.maxH),t.dragObj[0].style.left=a+25+"px",t.dragObj[0].style.top=r+"px"}}),!1),t.shapesEventL.addEventListener("mouseup",(function(s){var n,o,i;t.dragObj&&t.dragedFlag&&t.movedDir>100?(t.selectedDragObjFlag?(n=Number(e(t.selectedDragObj).parents(".module").find(".this_code").val()),o=Number(e(t.selectedDragObj).parents(".module").find(".this_module").val()),i=Number(e(t.selectedDragObj).parents(".module").find(".this_url").val())):0==t.selectedDragObjFlag&&(n=Number(e(t.selectedDragObj).find(".this_code").val()),o=Number(e(t.selectedDragObj).find(".this_module").val()),i=Number(e(t.selectedDragObj).find(".this_url").val())),0==o?t.changeShapes(n):1==o?t.loadSTL(n):2==o?t.showInput(0):3==o&&t.loadLocalSTL(i),e(t.dragObj).remove(),setTimeout((function(){t.onDocumentMouseDown(s)}),100)):e(t.dragObj).remove();t.dragedFlag=!1,e(".active_shape").removeClass("active_shape")}),!1)},dragImg:function(t){var s=this;s.showColorOption=!1,s.showColorOption=!1,s.selectedDragObj=e(t.target),s.selectedDragObj.hasClass("drag")&&(e(".active_shape").removeClass("active_shape"),s.selectedDragObj.hasClass("name")?(s.dragObj=e(s.selectedDragObj).parents(".module").find(".sprint").clone(),e(s.selectedDragObj).parents(".module").addClass("active_shape"),s.selectedDragObjFlag=!0):s.selectedDragObj.hasClass("sprint")?(s.dragObj=s.selectedDragObj.clone(),e(s.selectedDragObj).parents(".module").addClass("active_shape"),s.selectedDragObjFlag=!0):s.selectedDragObj.hasClass("module")&&(s.dragObj=e(s.selectedDragObj).find(".sprint").clone(),e(s.selectedDragObj).addClass("active_shape"),s.selectedDragObjFlag=!1),s.dragObj.addClass("startDrag"),s.maxW=e(".builder .main_wrapper").width()-s.selectedDragObj[0].offsetWidth,s.maxH=e(".builder .main_wrapper").height()-s.selectedDragObj[0].offsetHeight,console.log())},moveImg:function(t){var s=this;s.dragedFlag=!0;var n=t||window.event,o=s.CONTAIN_WIDTH;if(s.movedDir=o-n.clientX,console.log("123"),s.dragObj&&s.movedDir<100){e("body").append(s.dragObj);var i=n.clientX-50,a=n.clientY-50;i<0?i=0:i>=s.maxW&&(i=s.maxW),a<0||a>=s.maxH&&(a=s.maxH),s.dragObj[0].style.left=i+25+"px",s.dragObj[0].style.top=a+"px"}},upImg:function(t){var s,n,o,i=this;i.dragObj&&i.dragedFlag&&i.movedDir>100?(i.selectedDragObjFlag?(s=Number(e(i.selectedDragObj).parents(".module").find(".this_code").val()),n=Number(e(i.selectedDragObj).parents(".module").find(".this_module").val()),o=Number(e(i.selectedDragObj).parents(".module").find(".this_url").val())):0==i.selectedDragObjFlag&&(s=Number(e(i.selectedDragObj).find(".this_code").val()),n=Number(e(i.selectedDragObj).find(".this_module").val()),o=Number(e(i.selectedDragObj).find(".this_url").val())),0==n?i.changeShapes(s):1==n?i.loadSTL(s):2==n?i.showInput(0):3==n&&i.loadLocalSTL(o),e(i.dragObj).remove(),setTimeout((function(){i.onDocumentMouseDown(t)}),100)):e(i.dragObj).remove();i.dragedFlag=!1,e(".active_shape").removeClass("active_shape")},selectModule:function(t,s,n,o){var i;console.log("selectModule::"+o),0==t&&"text"==o?t=2:0==t&&"stl"==o&&(t=1),e(".active_shape").removeClass("active_shape"),0==t?(i=e(".normal_wrapper").find(".module:eq("+n+")"),this.stlGeoFlag=0,this.changeShapes(s)):1==t?(i=e(".cartoon_wrapper").find(".module:eq("+n+")"),this.stlGeoFlag=1,this.loadSTL(s,i)):2==t&&(i=e(".normal_wrapper").find(".module:eq("+n+")"),this.stlGeoFlag=1,this.showInput(0)),i.addClass("active_shape")},showChild:function(e){1==e?this.showColorOption=!0:0==e&&(this.showZoomOption=!0)},zoomView:function(e){this.cameraZoom&&(this.cameraZoom=e/100,this.camera.zoom=this.cameraZoom,this.camera.lookAt(this.scene.position),this.camera.updateProjectionMatrix())},changeShapes:function(e){switch(this.stlGeoFlag=0,this.showInput(1),this.currentModule=0,this.shootedFlag=!1,e){case 0:this.currentObj=new o["b"](this.SHAPE_SIZE,this.SHAPE_SIZE,this.SHAPE_SIZE);break;case 1:this.currentObj=new o["g"](this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,32);break;case 2:this.currentObj=new o["f"](this.SHAPE_SIZE/2,this.SHAPE_SIZE,32);break;case 3:this.currentObj=new o["T"](this.SHAPE_SIZE/2,32,32);break;case 4:this.currentObj=new o["Z"](10,2.5,16,100);break;case 5:this.currentObj=new o["g"](this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,5);break;case 6:this.currentObj=new o["f"](this.SHAPE_SIZE/2,this.SHAPE_SIZE,4);break;case 7:var t=this.SHAPE_SIZE/2,s=this.SHAPE_SIZE/3,n=this.SHAPE_SIZE,i=new o["S"];i.moveTo(2*t,t),i.absarc(t,t,t,0,2*Math.PI,!1);var a=new o["I"];a.moveTo(t+s,t),a.absarc(t,t,s,0,2*Math.PI,!0),i.holes.push(a);var r=new o["m"](i,{amount:n,bevelEnabled:!1,steps:1,curveSegments:60});r.center(),r.rotateX(-.5*Math.PI),this.currentObj=r;break;case 8:this.currentObj=new o["g"](this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,3);break;default:this.currentObj=new o["b"](this.SHAPE_SIZE,this.SHAPE_SIZE,this.SHAPE_SIZE)}this.currentObjMesh=new o["A"](this.currentObj,this.currentObjMaterial)},showInput:function(e){0===e?(this.currentObj=null,this.showTextWindow=!0):(this.showTextWindow=!1,this.inputCanConfirm=!1,this.textInput="")},textInputFn:function(t){var s=t.target;this.textInput=e(s).val();var n=e(s).val().length;this.inputCanConfirm=n>0},insertWord:function(){var e=this;e.showLoading=!0,e.showInput(1),this.fontLoader.load("/font/SimHei_Regular.json",(function(t){e.wordFont=t,e.createText(),e.showLoading=!1}),(function(t){e.progressingBar=t.loaded/t.total*100}),(function(e){console.log("An error happened :"+e)}))},createText:function(){var e,t,s,n=this.textInput1,i=this,a=n;switch(a.length){case 3:s=50;break;case 4:s=45;break;case 5:s=40;break;case 6:s=35;break;case 7:s=30;break;default:s=20}var r=new o["W"](a,{font:i.wordFont,size:s,height:10,curveSegments:22,bevelEnabled:!1});r.computeBoundingBox(),r.computeVertexNormals();var l=(new o["d"]).fromGeometry(r);l.computeBoundingBox(),e=-.5*(l.boundingBox.max.x-l.boundingBox.min.x),l.translate(e,-25,0),l.rotateX(-Math.PI/2);var c=new o["D"]({color:i.wordColor,flatShading:!0});t=new o["A"](l,c),t.name="shapes",t.receiveShadow=!0,t.castShadow=!0,i.scene.add(t),i.objects.push(t),i.shapesObj.push(t),this.undoActive=!0,i.activeSave=!0,i.transformControl.object=t,i.focusedTransformObj=i.transformControl.object,console.log(t),i.cleanSelectedObject(t),i.createObjForOperation(t,"add"),i.eachObjSetps(t,0),i.shapesController(),i.transformControl.attach(i.focusedTransformObj),i.resetSomeThing()},loadSTL:function(t,s){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var i,r,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=o,i.showInput(1),e(".active_shape").removeClass("active_shape"),e(s).addClass("active_shape"),i.currentModule=0,i.showLoading=!0,i.shootedFlag=!1,n.t0=t,n.next=0===n.t0?10:1===n.t0?12:2===n.t0?14:3===n.t0?16:4===n.t0?18:5===n.t0?20:6===n.t0?22:7===n.t0?24:8===n.t0?26:9===n.t0?28:10===n.t0?30:11===n.t0?32:34;break;case 10:return r="/models/stl/ascii/standing.stl",n.abrupt("break",35);case 12:return r="/models/stl/ascii/climbing.stl",n.abrupt("break",35);case 14:return r="/models/stl/ascii/lying.stl",n.abrupt("break",35);case 16:return r="/models/stl/ascii/sitting.stl",n.abrupt("break",35);case 18:return r="/models/stl/ascii/tyrannosaurusRex.stl",n.abrupt("break",35);case 20:return r="/models/stl/ascii/pokemon/bulbasaur_starter_1gen_flowalistik.stl",n.abrupt("break",35);case 22:return r="/models/stl/ascii/pokemon/charmander_starter_1gen_flowalistik.stl",n.abrupt("break",35);case 24:return r="/models/stl/ascii/pokemon/chikorita_starter_2gen_flowalistik.stl",n.abrupt("break",35);case 26:return r="/models/stl/ascii/pokemon/pikachu_1gen_flowalistik.stl",n.abrupt("break",35);case 28:return r="/models/stl/ascii/pokemon/squirtle_starter_1gen_flowalistik.stl",n.abrupt("break",35);case 30:return r="/models/stl/ascii/pokemon/totodile_starter_2gen_flowalistik.stl",n.abrupt("break",35);case 32:return r="/models/stl/ascii/five-point-star.stl",n.abrupt("break",35);case 34:r="/models/stl/ascii/tyrannosaurusRex.stl";case 35:return l=new a["a"],n.next=38,l.load(r,(function(e){i.currentObj=e,i.showLoading=!1}),(function(e){i.progressingBar=e.loaded/e.total*100}));case 38:case"end":return n.stop()}}),n)})))()},onDocumentMouseDown:function(){if(this.shootedFlag)this.checkIntersection(event);else{event.preventDefault();var e=!this.showMore,t=null;e?"touchend"==event.type?(t=event.changedTouches[0],this.mouse.set(t.clientX/this.CONTAIN_WIDTH*2-1,-t.clientY/this.CONTAIN_HEIGHT*2+1)):this.mouse.set(event.clientX/this.CONTAIN_WIDTH*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1):"touchend"==event.type?(t=event.changedTouches[0],this.mouse.set(t.clientX/(this.CONTAIN_WIDTH-100)*2-1,-t.clientY/this.CONTAIN_HEIGHT*2+1)):this.mouse.set(event.clientX/(this.CONTAIN_WIDTH-100)*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1),this.raycaster.setFromCamera(this.mouse,this.camera);var s=this.raycaster.intersectObjects(this.objects);if(s.length>0){var n=s[0];if(this.isShiftDown)n.object!==this.plane&&(this.scene.remove(n.object),this.objects.splice(this.objects.indexOf(n.object),1));else if(this.currentObj){var i=this.currentObjMaterial.clone(),a=new o["A"](this.currentObj,i);a.position.copy(n.point).add(n.face.normal),0==this.stlGeoFlag?(a.position.divideScalar(this.SHAPE_SIZE).floor().multiplyScalar(this.SHAPE_SIZE).addScalar(this.SHAPE_SIZE/2),a.name="shapes"):1==this.stlGeoFlag?(a.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25),a.name="stl"):2==this.stlGeoFlag&&(a.position.divideScalar(50).floor().multiplyScalar(50),a.name="stlLocal",a.rotation.set(-Math.PI/2,0,0)),a.receiveShadow=!0,a.castShadow=!0,this.scene.add(a),this.objects.push(a),this.shapesObj.push(a),this.undoActive=!0,this.activeSave=!0,this.createObjForOperation(a,"add"),this.eachObjSetps(a,0),this.shapesController(),this.transformControl.object=a,this.transformControl.attach(this.transformControl.object),this.cleanSelectedObject(a),this.showCurrentColor(),this.resetSomeThing()}this.shootedFlag=!0,this.render()}}},onDocumentMouseMove:function(){event.preventDefault(),this.mouse.set(event.clientX/this.CONTAIN_WIDTH*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1),this.raycaster.setFromCamera(this.mouse,this.camera);var e=this.raycaster.intersectObjects(this.objects);if(e.length>0){var t=e[0];this.mouseHelper.position.copy(t.point).add(t.face.normal),this.mouseHelper.position.divideScalar(this.SHAPE_SIZE).floor().multiplyScalar(this.SHAPE_SIZE).addScalar(this.SHAPE_SIZE/2)}this.render()},createObjForOperation:function(e,t){window.deleteObjFlag=!1,this.saveFlag=!1,this.allOperation.length>=5&&this.allOperation.shift();var s={};s["uuid"]=e.uuid,s["position"]=e.position.clone(),s["rotation"]=e.rotation.clone(),s["quaternion"]=e.quaternion.clone(),s["scale"]=e.scale.clone(),s["color"]=e.material.color.clone(),s["operation"]=t,s["mesh"]=e,this.allOperation.push(s)},eachObjSetps:function(e,t){var s,n={};0===t?(this.eachObjectInfo[e.uuid]||(this.eachObjectInfo[e.uuid]=[]),n["uuid"]=e.uuid,n["position"]=e.position.clone(),n["rotation"]=e.rotation.clone(),n["quaternion"]=e.quaternion.clone(),n["scale"]=e.scale.clone(),n["color"]=e.material.color.clone(),n["mesh"]=e,n["time"]=Date.parse(new Date),this.eachObjectInfo[e.uuid].length?n["index"]=this.eachObjectInfo[e.uuid].length:n["index"]=0,s=this.eachObjectInfo[e.uuid],s.push(n)):2===t?(this.eachObjectInfo[e.uuid]||(this.eachObjectInfo[e.uuid]=[]),n["uuid"]=e.uuid,n["position"]=e.position.clone(),n["rotation"]=e.rotation.clone(),n["quaternion"]=e.quaternion.clone(),n["scale"]=e.scale.clone(),n["color"]=e.color.clone(),n["mesh"]=e.mesh,n["time"]=Date.parse(new Date),this.eachObjectInfo[e.uuid].length?n["index"]=this.eachObjectInfo[e.uuid].length:n["index"]=0,s=this.eachObjectInfo[e.uuid],s.push(n)):1===t&&(this.eachRedoObjectInfo[e.uuid]||(this.eachRedoObjectInfo[e.uuid]=[]),n["uuid"]=e.uuid,n["position"]=e.position.clone(),n["rotation"]=e.rotation.clone(),n["quaternion"]=e.quaternion.clone(),n["scale"]=e.scale.clone(),n["color"]=e.color.clone(),n["mesh"]=e.mesh,n["time"]=Date.parse(new Date),s=this.eachRedoObjectInfo[e.uuid],s.push(n))},shapesController:function(){this.showMore&&e(".obj_control").css({width:this.CONTAIN_WIDTH-100}),this.controlBar=!0},addSelectedObject:function(e){this.selectedObjects=[],this.selectedObjects.push(e)},cleanSelectedObject:function(e){e&&this.addSelectedObject(e)},showCurrentColor:function(){if(this.isWhite=!1,this.transformControl.object){var e=this.transformControl.object.material.color.toJSON();switch(this.isWhite="14540253"==e,this.cleanSelectedObject(this.transformControl.object),this.transformControlModeType){case 0:this.statusTxt=this.textSC;break;case 1:this.statusTxt=this.textTR;break;case 2:this.statusTxt=this.textRO;break}this.controlType=!0}else this.controlType=!1},resetSomeThing:function(){e(".active_shape").removeClass("active_shape"),this.currentObjMaterial=new o["C"]({color:14540253})},checkIntersection:function(e){var t,s;e.changedTouches?(t=e.changedTouches[0].pageX,s=e.changedTouches[0].pageY):(t=e.clientX,s=e.clientY),this.mouse.x=t/this.CONTAIN_WIDTH*2-1,this.mouse.y=-s/this.CONTAIN_HEIGHT*2+1;var n=this.showMore;if(n&&(this.mouse.x=t/(this.CONTAIN_WIDTH-100)*2-1,this.mouse.y=-s/this.CONTAIN_HEIGHT*2+1),this.plane){var o;if(this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.intersectObject(this.plane,!1,this.intersectsSelect),this.intersectsSelect.length>0){var i=this.intersectsSelect[0].point;this.intersection.point.copy(i);var a=this.intersectsSelect[0].face.normal.clone();a.transformDirection(this.plane.matrixWorld),a.multiplyScalar(10),a.add(this.intersectsSelect[0].point),this.intersection.normal.copy(this.intersectsSelect[0].face.normal),o=this.raycaster.intersectObjects(this.scene.children),o.length>1&&(!o||"shapes"!=o[0].object.name&&"stl"!=o[0].object.name&&"stlLocal"!=o[0].object.name?"plane"==o[0].object.name&&(this.transformControl.detach(),this.transformControl.attach(o[0].object)):(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(o[0].object)),this.colorControl=!0),this.intersection.intersects=!0,this.intersectsSelect.length=0}else this.intersection.intersects=!1,o=this.raycaster.intersectObjects(this.scene.children),o.length>0&&(!o||"shapes"!=o[0].object.name&&"stl"!=o[0].object.name&&"stlLocal"!=o[0].object.name?"plane"==o[0].object.name&&(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(o[0].object)):(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(o[0].object)));this.render()}},hideSelf:function(){this.$parent.showThreeD()},allOperationAdd:function(){window.focusedTransformObj&&(this.createObjForOperation(this.transformControl.object,"transform"),this.eachObjSetps(this.transformControl.object,0)),this.allOperation.length>0?this.undoActive=!0:this.undoActive=!1},checkScalePosition:function(e){this.tcScale=e.scale.clone(),this.tcScaleYPosition=e.position.clone().y,this.tcScaleY=e.scale.clone().y,"shapes"==e.name?this.tcScaleYPosition==this.SHAPE_SIZE*e.scale.y/2?this.tcScaleYPositionFlag=!0:this.tcScaleYPositionFlag=!1:"stl"==e.name&&(this.tcScaleYPosition==e.geometry.boundingSphere.radius?this.tcScaleYPositionFlag=!0:this.tcScaleYPositionFlag=!1)},onAnimationStep:function(){if(this.transformControl.object){var e=this.SHAPE_SIZE,t=this.LIMIT_SIZE,s=.1,n=this.transformControl.getMode(),o=this.transformControl.object;switch(n){case"scale":"stl"==o.name&&(this.LIMIT_SIZE=2.22),o.scale.clampScalar(s,this.LIMIT_SIZE),this.checkAxis("scale",o);break;case"translate":"X"==this.transformControl.axis?o.position.x>=0&&o.position.x+this.SHAPE_SIZE*o.scale.x/2>=this.WORK_SPACE_SIZE/2?o.position.x=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*o.scale.x/2:o.position.x<0&&o.position.x-this.SHAPE_SIZE*o.scale.x/2<=-this.WORK_SPACE_SIZE/2&&(o.position.x=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*o.scale.x/2):"Z"==this.transformControl.axis?o.position.z>=0&&o.position.z+this.SHAPE_SIZE*o.scale.z/2>=this.WORK_SPACE_SIZE/2?o.position.z=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*o.scale.z/2:o.position.z<0&&o.position.z-this.SHAPE_SIZE*o.scale.z/2<=-this.WORK_SPACE_SIZE/2&&(o.position.z=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*o.scale.z/2):"Y"==this.transformControl.axis&&(o.position.y>=0&&o.position.y+this.SHAPE_SIZE*o.scale.y/2>=this.WORK_SPACE_SIZE?o.position.y=this.WORK_SPACE_SIZE-this.SHAPE_SIZE*o.scale.y/2:"stl"==o.name?o.position.y<o.geometry.boundingSphere.radius*o.scale.y&&(o.position.y=this.SHAPE_SIZE*o.scale.y):"stlLocal"==o.name?o.position.y<0&&(o.position.y=0):o.position.y<this.SHAPE_SIZE*o.scale.y/2&&(o.position.y=this.SHAPE_SIZE*o.scale.y/2));break;case"rotate":break}this.SHAPE_SIZE=e,this.LIMIT_SIZE=t}},checkAxis:function(e,t){"scale"===e?(t.position.x>=0&&t.position.x+this.SHAPE_SIZE*t.scale.x/2>=this.WORK_SPACE_SIZE/2?t.position.x=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*t.scale.x/2:t.position.x<0&&t.position.x-this.SHAPE_SIZE*t.scale.x/2<=-this.WORK_SPACE_SIZE/2&&(t.position.x=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*t.scale.x/2),t.position.z>=0&&t.position.z+this.SHAPE_SIZE*t.scale.z/2>=this.WORK_SPACE_SIZE/2?t.position.z=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*t.scale.z/2:t.position.z<0&&t.position.z-this.SHAPE_SIZE*t.scale.z/2<=-this.WORK_SPACE_SIZE/2&&(t.position.z=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*t.scale.z/2),t.position.y>=0&&t.position.y<=this.SHAPE_SIZE*t.scale.y/2?t.position.y=this.SHAPE_SIZE*t.scale.y/2:t.position.y>=0&&this.tcScaleYPositionFlag?"stl"==t.name?t.geometry.boundingSphere&&(this.tcScaleYPosition==t.geometry.boundingSphere.radius*t.scale.y/2?t.position.y=t.geometry.boundingSphere.radius*t.scale.y:t.position.y=this.SHAPE_SIZE*t.scale.y/2):t.position.y=this.SHAPE_SIZE*t.scale.y/2:t.position.y<0&&(t.position.y=this.SHAPE_SIZE*t.scale.y/2)):"rotate"===e&&console.log("check for retate")},changeControls:function(t){if(!window.deleteObjFlag){this.showColorOption=!1,this.showZoomOption=!1;var s=event.target;switch(e(s).hasClass("control_btn")||(s=e(s).closest(".control_btn")),0==this.transformControlModeType&&0==t||1==this.transformControlModeType&&1==t||2==this.transformControlModeType&&2==t||3==this.transformControlModeType&&3==t?s.toggleClass("active_control"):(e(".active_control").removeClass("active_control"),s.addClass("active_control")),s.hasClass("active_control")?this.transformControl.attach(this.transformControl.object):this.transformControl.detach(this.transformControl.object),t){case 0:this.transformControl.setMode("scale"),this.statusTxt=this.textSC,this.transformControlModeType=0;break;case 1:this.transformControl.setMode("translate"),this.statusTxt=this.textTR,this.transformControlModeType=1;break;case 2:this.transformControl.setMode("rotate"),this.statusTxt=this.textRO,this.transformControlModeType=2;break;default:this.transformControl.setMode("translate"),this.statusTxt=this.textTR,this.transformControlModeType=1}console.log(this.transformControl.object),this.transformControl.object?this.colorControl=!0:this.colorControl=!1}},deletedSelected:function(){this.showColorOption=!1,this.showZoomOption=!1,window.focusedTransformObj&&this.transformControl.object&&(this.createObjForOperation(this.transformControl.object,"delete"),this.eachObjSetps(this.transformControl.object,0),this.scene.remove(this.transformControl.object),this.objects.splice(this.objects.indexOf(this.transformControl.object),1),e(".active_control").removeClass("active_control"),this.colorControl=!1,window.deleteObjFlag=!0),this.transformControl.detach(),this.shapesController(0),this.render(),this.objects.length>1?this.activeSave=!0:(this.activeSave=!1,this.controlBar=!1)},changeCurrentColor:function(e){this.isWhite=!1,this.transformControl.object&&(0==e?(this.transformControl.object.material.color.set("#dddddd"),this.isWhite=!0):(this.transformControl.object.material.color.set("#f2f545"),this.isWhite=!1),this.createObjForOperation(this.transformControl.object,"transform"),this.eachObjSetps(this.transformControl.object,0))},redoUndo:function(e){this.showColorOption=!1,this.showZoomOption=!1;var t=!1,s=!1,n=!1;if(0===e){if(this.allOperation.length>0){var o=this.allOperation[this.allOperation.length-1];if(this.redoOperation.push(o),"transform"===o.operation?t=!0:"delete"===o.operation?s=!0:"add"===o.operation&&(n=!0),n)o.mesh&&(this.eachObjSetps(o,1),this.scene.remove(o.mesh),this.objects.splice(this.objects.indexOf(o.mesh),1));else if(s)o.mesh&&(this.eachObjSetps(o,1),this.scene.add(o.mesh),this.objects.push(o.mesh));else if(t){var i=this.eachObjectInfo[o.uuid];i&&(i.length>1?this.redoProcess(i[i.length-2]):this.redoProcess(i[i.length-1]),this.eachObjSetps(this.eachObjectInfo[o.uuid].pop(),1))}this.allOperation.pop()}}else if(1===e&&this.redoOperation.length>0){var a=this.redoOperation[this.redoOperation.length-1];if(this.allOperation.push(a),"transform"===a.operation?t=!0:"delete"===a.operation?s=!0:"add"===a.operation&&(n=!0),n)a.mesh&&(this.eachObjSetps(a,2),this.scene.add(a.mesh),this.objects.push(a.mesh));else if(s)a.mesh&&(this.eachObjSetps(a,2),this.scene.remove(a.mesh),this.objects.splice(this.objects.indexOf(a.mesh),1));else if(t){var r=this.eachRedoObjectInfo[a.uuid];r&&(r.length>1?this.redoProcess(r[r.length-2]):this.redoProcess(r[r.length-1]),this.eachObjSetps(this.eachRedoObjectInfo[a.uuid].pop(),2))}this.redoOperation.pop()}this.transformControl.detach(),this.colorControl=!1,this.render(),this.allOperation.length>0?this.undoActive=!0:this.undoActive=!1,this.redoOperation.length>0?this.redoActive=!0:this.redoActive=!1,this.objects.length>1?this.activeSave=!0:this.activeSave=!1},redoProcess:function(e){e.mesh.position.copy(e.position),e.mesh.rotation._x=e.rotation._x,e.mesh.rotation._y=e.rotation._y,e.mesh.rotation._z=e.rotation._z,e.mesh.quaternion._x=e.quaternion._x,e.mesh.quaternion._y=e.quaternion._y,e.mesh.quaternion._z=e.quaternion._z,e.mesh.scale.set(e.scale.x,e.scale.y,e.scale.z),e.mesh.material.color.set(e.color)},saveModuleShow:function(e){this.objects.length>1?this.saveNmaeWindow=0==e:this.saveNmaeWindow=!1},getTimeStr:function(){var e=new Date,t=e.getFullYear(),s=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate(),o=e.getHours()<10?"0"+e.getHours():e.getHours(),i=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),a=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),r=t+s+n+o+i+a;return r},exportMoudle:function(t){if(this.objects.length>1){this.scene.remove(this.transformControl),this.clearCache(this.gridHelper),this.scene.remove(this.gridHelper),this.clearCache(this.gradGroundMesh),this.scene.remove(this.gradGroundMesh),this.clearCache(this.gradGroundMesh1),this.scene.remove(this.gradGroundMesh1),this.clearCache(this.plane),this.scene.remove(this.plane),this.camera.position.set(170,145,255),this.camera.lookAt(0,0,0),this.scene.rotation.set(Math.PI/2,0,0),this.scene.updateMatrixWorld();var s=e("#save_name").val();if(s)if(this.saveFlag=!0,0===t){var n=new r["a"],i=n.parse(this.scene);this.saveString(i,s+".stl")}else{var a=this.scene,l=new o["GLTFExporter"],c={trs:!1,onlyVisible:!0,truncateDrawRange:!0,binary:!1,forcePowerOfTwoTextures:!1,maxTextureSize:4096};l.parse(a,(function(e){var t=JSON.stringify(e,null,2);this.saveString(t,s+".gltf")}),c)}this.scene.add(this.transformControl),this.scene.add(this.gridHelper),this.scene.add(this.gradGroundMesh),this.scene.add(this.gradGroundMesh1),this.scene.add(this.plane),this.scene.rotation.set(0,0,0),this.scene.updateMatrixWorld()}},saveString:function(e,t){this.save(new Blob([e],{type:"text/plain"}),t)},save:function(t,s){var n=document.createElement("a");n.style.display="none",n.className="saveFile",document.body.appendChild(n),n.href=URL.createObjectURL(t),n.download=s,n.click(),e(".saveFile").remove(),this.afterSTLImg()},afterSTLImg:function(){for(var e in this.saveModuleShow(1),this.objects)this.clearCache(this.objects[e]),this.scene.remove(this.objects[e]);this.objects=[],this.objects.push(this.plane),this.transformControl.detach(),this.activeSave=!1,this.controlBar=!1,this.goHomeFlag?(this.goHomeFlag=!1,this.saveFlag=!1,this.hideSelf()):(this.goHomeFlag=!1,this.saveFlag=!1)},leaveBuilder:function(){this.objects.length>1?this.saveFlag?this.hideSelf():this.notSaveNote=!0:this.hideSelf()},hideAskWindow:function(){this.notSaveNote=!1},goHomeSaveModule:function(e){this.notSaveNote=!1,0===e?this.hideSelf():(this.saveModuleShow(0),this.goHomeFlag=!0)}},mounted:function(){this.mobile=/Android|webOS|iPhone|iPad|BlackBerry/i.test(navigator.userAgent),this.container=document.getElementById("container"),this.shapesEventL=document.getElementById("childWrapper"),this.shapesMain=document.getElementById("shapes"),this.currentObjMaterial=new o["C"]({color:14540253}),this.fontLoader=new o["r"],this.mouseHelperMaterial=this.currentObjMaterial,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight,this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,window.focusedTransformObj=this.focusedTransformObj,window.deleteObjFlag=this.deleteObjFlag,this.init(),this.listModule();var e=this;window.onresize=function(){e.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,e.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight,e.onWindowResize()}},destroyed:function(){},watch:{CONTAIN_WIDTH:function(e){e&&(this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight)},CONTAIN_HEIGHT:function(e){e&&(this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight)},focusedTransformObj:function(e){e&&(console.log("change the focusedTransformObj"),window.focusedTransformObj=this.focusedTransformObj)},textInput:function(e,t){e&&(console.log("changed textInput"),console.log("oldVal:"+t),console.log("newVal:"+e),this.textInput1=e)}}}}).call(this,s("1157"))},ddb0:function(e,t,s){var n=s("da84"),o=s("fdbc"),i=s("e260"),a=s("9112"),r=s("b622"),l=r("iterator"),c=r("toStringTag"),h=i.values;for(var d in o){var u=n[d],p=u&&u.prototype;if(p){if(p[l]!==h)try{a(p,l,h)}catch(f){p[l]=h}if(p[c]||a(p,c,d),o[d])for(var m in i)if(p[m]!==i[m])try{a(p,m,i[m])}catch(f){p[m]=i[m]}}}},e2f7:function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"builder fixedBuilder"},[s("div",{staticClass:"main_wrapper",attrs:{id:"mainWrapper"}},[s("div",{staticClass:"clearfix",attrs:{id:"container"},on:{click:e.containerListenner,mousedown:e.containerMouseDown,mousemove:e.containerMouseMove,mouseup:e.containerMouseUp}}),s("div",{staticClass:"show_more clearfix",class:e.showMore?"":"show_more_close",on:{click:function(t){return e.showMoreFn()}}},[s("img",{attrs:{src:"/image/3dBuilder/arrow.png",alt:""}})]),e.showMore?s("div",{staticClass:"clearfix",attrs:{id:"shapes"}},[s("div",{staticClass:"shapes_wrapper"},[s("div",{staticClass:"shapes_options normal",on:{click:function(t){return e.showModule(0)}}},[e._v("基础模型 "),s("i",{staticClass:"iconfont arrow arrow_right"},[e._v("")])]),s("div",{staticClass:"shapes_options cartoon",on:{click:function(t){return e.showModule(1)}}},[e._v("卡通模型 "),s("i",{staticClass:"iconfont arrow arrow_right"},[e._v("")])])])]):e._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:e.shapesListShow||e.cartoonStlShow,expression:"shapesListShow || cartoonStlShow"}],attrs:{id:"childWrapper"}},[e.shapesListShow?s("div",{staticClass:"child_wrapper normal_wrapper"},[s("div",{staticClass:"child_title",on:{click:function(t){return e.hideModule()}}},[s("i",{staticClass:"iconfont arrow"},[e._v("")]),e._v("基础模型")]),e._l(e.shapesList,(function(t,n){return s("div",{key:n,staticClass:"module shapes drag",class:t.title,on:{click:function(s){return e.selectModule(0,t.code,n,t.module)}}},["shape"==t.module?s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"0"}}):"stl"==t.module?s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"1"}}):"text"==t.module?s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"2"}}):e._e(),s("input",{staticClass:"this_code",attrs:{type:"hidden"},domProps:{value:t.code}}),s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:"/image/3dBuilder/3dPrinting/sprint_"+t.title+".png",expression:"'/image/3dBuilder/3dPrinting/sprint_'+item.title+'.png'",arg:"background-image"}],staticClass:"drag sprint",class:"sprint_"+t.title}),s("div",{staticClass:"name drag"},[e._v(e._s(t.name))])])}))],2):e._e(),e.cartoonStlShow?s("div",{staticClass:"child_wrapper cartoon_wrapper"},[s("div",{staticClass:"child_title",on:{click:function(t){return e.hideModule()}}},[s("i",{staticClass:"iconfont arrow"},[e._v("")]),e._v("卡通模型")]),e._l(e.cartoonStlList,(function(t,n){return s("div",{key:n,staticClass:"module lego drag",class:t.title,on:{click:function(s){return e.selectModule(1,t.code,n,t.module)}}},[s("input",{staticClass:"this_module",attrs:{type:"hidden",value:"1"}}),s("input",{staticClass:"this_code",attrs:{type:"hidden"},domProps:{value:n}}),s("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:"/image/3dBuilder/3dPrinting/sprint_"+t.title+".png",expression:"'/image/3dBuilder/3dPrinting/sprint_'+item.title+'.png'",arg:"background-image"}],staticClass:"drag sprint sprintY",class:"sprint_"+t.title}),s("div",{staticClass:"name drag"},[e._v(e._s(t.name))])])}))],2):e._e()]),s("div",{staticClass:"module_btns clearfix"},[s("div",{staticClass:"btn_main go_mainPage",on:{click:function(t){return e.hideSelf()}}},[e._m(0),s("div",{staticClass:"module_btn_name"},[e._v("Back")])]),s("div",{staticClass:"btn_main save_module save_stl",class:e.activeSave?"":"noActive_save",on:{click:function(t){return e.saveModuleShow(0)}}},[e._m(1),s("div",{staticClass:"module_btn_name"},[e._v("保存")])])]),s("div",{staticClass:"obj_control has_right_menu"},[e.controlBar?s("div",{staticClass:"obj_control_wrapper clearfix"},[s("div",{staticClass:"control_btn undo_control ",class:e.undoActive?"":"noActive_control",on:{click:function(t){return e.redoUndo(0)}}},[s("i",{staticClass:"iconfont"},[e._v("")]),s("div",{staticClass:"btn_name"},[e._v("撤回")])]),s("div",{staticClass:"control_btn redo_control ",class:e.redoActive?"":"noActive_control",on:{click:function(t){return e.redoUndo(1)}}},[s("i",{staticClass:"iconfont"},[e._v("")]),s("div",{staticClass:"btn_name"},[e._v("恢复")])]),s("div",{staticClass:"control_btn size_control",on:{click:function(t){return e.changeControls(0)}}},[e._m(2),s("div",{staticClass:"btn_name"},[e._v("修改大小")])]),s("div",{staticClass:"control_btn trans_control active_control",on:{click:function(t){return e.changeControls(1)}}},[e._m(3),s("div",{staticClass:"btn_name"},[e._v("移动")])]),s("div",{staticClass:"control_btn rotate_control",on:{click:function(t){return e.changeControls(2)}}},[e._m(4),s("div",{staticClass:"btn_name"},[e._v("旋转")])]),s("div",{staticClass:"control_btn zoomin_control",on:{click:function(t){return e.showChild(0)}}},[s("i",{staticClass:"iconfont"},[e._v("")]),s("div",{staticClass:"btn_name"},[e._v("放大缩小")]),e.showZoomOption?s("div",{staticClass:"zoom_options"},[s("div",{staticClass:"zoom_opt",on:{click:function(t){return e.zoomView(50)}}},[e._v("50%")]),s("div",{staticClass:"zoom_opt",on:{click:function(t){return e.zoomView(100)}}},[e._v("100%")]),s("div",{staticClass:"zoom_opt",on:{click:function(t){return e.zoomView(200)}}},[e._v("200%")])]):e._e()]),s("div",{staticClass:"control_btn delete_control",on:{click:function(t){return e.deletedSelected()}}},[s("i",{staticClass:"iconfont"},[e._v("")]),s("div",{staticClass:"btn_name"},[e._v("删除")])]),e.colorControl?s("div",{staticClass:"control_btn color_control_wrapper",on:{click:function(t){return e.showChild(1)}}},[s("div",{staticClass:"color_circle outside_color",class:e.isWhite?"white_color_circle":""}),s("div",{staticClass:"btn_name"},[e._v("颜色")]),e.showColorOption?s("div",{staticClass:"color_wrapper"},[s("div",{staticClass:"color_control yellow_control",on:{click:function(t){return e.changeCurrentColor(1)}}},[s("div",{staticClass:"color_circle"})]),s("div",{staticClass:"color_control white_control",on:{click:function(t){return e.changeCurrentColor(0)}}},[s("div",{staticClass:"color_circle"})])]):e._e()]):e._e()]):e._e()])]),s("div",{staticClass:"save_name_module_bg"}),s("div",{staticClass:"save_name_module"},[s("div",{staticClass:"save_name_title"},[e._v("命名")]),s("div",{staticClass:"save_name_tip"},[e._v("模型还没有名字，取个名字吧")]),s("input",{attrs:{type:"text",placeholder:"请输入模型名称",maxlength:"14",id:"save_name",oninput:"saveModuleName(this,'oninput')",onblur:"saveModuleName(this,'onblur')",onFocus:"saveModuleName(this,'onFocus')",onkeyup:"this.value=this.value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5]/g ,'')",blur:"saveModuleName(this,'blur')"}}),s("div",{staticClass:"save_name_verify"},[e._v("请输入模型名称")]),s("div",{staticClass:"btn_wrapper clearfix"},[s("img",{staticClass:"save_name_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_yes1.png"},on:{click:function(t){return e.exportMoudle(0)}}}),s("img",{staticClass:"imgBtn save_name_cancle",attrs:{src:"/image/3dBuilder/3dPrinting/btn_close.png"},on:{click:function(t){return e.saveModuleShow(1)}}})])]),s("div",{staticClass:"save_ask"},[s("div",{staticClass:"save_name_title"},[e._v("提示")]),s("div",{staticClass:"save_name_tip"},[e._v(" 模型进度还没有保存哦，此时离开会丢失进度，是否保存？ ")]),s("div",{staticClass:"btn_wrapper clearfix"},[s("img",{staticClass:"go_home_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_no.png"},on:{click:function(t){return e.goHomeSaveModule(0)}}}),s("img",{staticClass:"go_home_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_yes.png"},on:{click:function(t){return e.goHomeSaveModule(1)}}}),s("img",{staticClass:"imgBtn save_name_cancle",attrs:{src:"/image/3dBuilder/3dPrinting/btn_close.png"},on:{click:function(t){return e.hideGoHome()}}})])]),e._m(5),e.showTextWindow?s("div",{staticClass:"text_window"},[s("div",{staticClass:"text_title"},[e._v("生成3D文字")]),s("input",{attrs:{type:"text",placeholder:"请输入文字",maxlength:"10",id:"textContent"},on:{input:e.textInputFn,blur:e.textInputFn}}),s("div",{staticClass:"btn_wrapper clearfix"},[s("div",{staticClass:"btns btn_ok text_ok",class:e.inputCanConfirm?"":"btn_disable",on:{click:function(t){e.inputCanConfirm&&e.insertWord()}}},[e._v("确定")]),s("div",{staticClass:"btns btn_cancle text_cancle",on:{click:function(t){return e.showInput(1)}}},[e._v("取消")])])]):e._e(),e.controlType?s("div",{staticClass:"control_type",domProps:{textContent:e._s(e.statusTxt)}},[e._v("当前状态: 移动")]):e._e(),e.showLoading?s("div",{class:e.showMore?"hideShowMore":"",attrs:{id:"loading_data"}},[s("img",{attrs:{src:"/image/3dBuilder/loading.gif",alt:""}}),s("div",{staticClass:"processingbar"},[s("div",{staticClass:"barwidth",style:{width:e.progressingBar+"%"}})])]):e._e()])},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn_child btn_home"},[s("i",{staticClass:"iconfont"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn_child btn_save_module"},[s("i",{staticClass:"iconfont"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon_wrapper"},[s("i",{staticClass:"iconfont"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon_wrapper"},[s("i",{staticClass:"iconfont"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"icon_wrapper"},[s("i",{staticClass:"iconfont"},[e._v("")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"note"},[s("div",{staticClass:"select_module"},[e._v("选择一个模型，点击 箭头按 "),s("span",{staticClass:"red"},[e._v("X")]),e._v(","),s("span",{staticClass:"green"},[e._v("Y")]),e._v(","),s("span",{staticClass:"blue"},[e._v("Z")]),e._v("单向缩放,点击中心方块或 者双指，进行整体 缩放 ")])])}],i=s("f2f5"),a=i["a"],r=(s("a339"),s("2877")),l=Object(r["a"])(a,n,o,!1,null,"7d1dc056",null);t["a"]=l.exports},e9cf:function(e,t,s){"use strict";var n=s("44e7"),o=s.n(n);o.a},f2f5:function(e,t,s){"use strict";(function(e){s("7db0"),s("c975"),s("a434"),s("b0c0"),s("a9e3"),s("d3b7"),s("ddb0"),s("bf19"),s("96cf");var n=s("1da1"),o=(s("d162"),s("5a89")),i=s("4721"),a=s("518e"),r=s("5b55");t["a"]={name:"ThreeDimensionalBuilder",data:function(){return{mobile:!1,WORK_SPACE_SIZE:200,CONTAIN_WIDTH:null,CONTAIN_HEIGHT:null,SHAPE_SIZE:20,LIMIT_SIZE:4,renderer:null,camera:null,cameraZoom:1,scene:null,plane:null,objects:[],shapesObj:[],gridHelper:null,gradGroundMesh:null,mouseHelper:null,mouseHelperMaterial:null,focusedTransformObj:null,deleteObjFlag:null,gradGroundMesh1:null,composer:null,renderPass:null,outlinePass:null,effectFXAA:null,controls:null,transformControl:null,container:null,orientationContr:null,controlsMoved:!1,shapesEventL:null,shapesMain:null,showMore:!0,showZoomOption:!1,showColorOption:!1,isWhite:!0,colorControl:!0,selectedDragObj:null,selectedDragObjFlag:null,dragObj:null,dragedFlag:null,maxW:null,maxH:null,movedDir:null,shapesList:[],cartoonStlList:[],shapesListShow:!1,cartoonStlShow:!1,controlBar:!1,redoActive:!1,undoActive:!1,stlGeoFlag:null,showTextWindow:!1,currentObj:null,textInput:"",textInput1:"",fontLoader:null,wordFont:null,wordColor:14540253,shootedFlag:!1,currentObjMesh:null,currentObjMaterial:null,currentModule:0,transformDragFlag:!1,twoPointTouchFlag:!1,mouse:null,raycaster:null,isShiftDown:!1,saveFlag:!1,activeSave:!1,allOperation:[],eachObjectInfo:{},eachRedoObjectInfo:{},redoOperation:[],selectedObjects:[],statusTxt:null,controlType:null,textTR:"当前状态:移动",textSC:"当前状态:改变大小",textRO:"当前状态:旋转",transformControlModeType:1,intersectsSelect:[],intersection:{intersects:!1,point:new o["bb"],normal:new o["bb"]},tcScale:null,tcScaleYPosition:null,tcScaleY:null,tcScaleYPositionFlag:null,tcX:null,tcY:null,tcZ:null,showLoading:!1,progressingBar:0,inputCanConfirm:!1}},methods:{init:function(){var e=this;e.container=document.getElementById("container"),e.renderer=new o["cb"]({antialias:!0,alpha:!0}),e.renderer.setPixelRatio(window.devicePixelRatio?window.devicePixelRatio:1),e.renderer.setSize(e.CONTAIN_WIDTH,e.CONTAIN_HEIGHT),e.renderer.shadowMap.enabled=!0,e.renderer.autoClear=!1,e.renderer.setClearColor(0,0),e.container.appendChild(e.renderer.domElement),e.camera=new o["J"](45,e.CONTAIN_WIDTH/e.CONTAIN_HEIGHT,1,1e4),e.camera.position.set(170,145,255),e.camera.lookAt(0,0,0),e.scene=new o["Q"];var t=new o["K"](e.WORK_SPACE_SIZE,e.WORK_SPACE_SIZE);t.rotateX(-Math.PI/2),e.plane=new o["A"](t,new o["B"]({color:15066335,visible:!0})),e.plane.name="plane",e.plane.receiveShadow=!0,e.plane.castShadow=!0,e.scene.add(e.plane),e.objects.push(e.plane),e.raycaster=new o["N"],e.mouse=new o["ab"],e.grads();var s=new o["a"](6316128,1);e.scene.add(s);var n=new o["h"](16777215,1.3);n.position.set(1,.75,.5).normalize(),e.scene.add(n),e.orbitCont(),e.transformCont(),e.animate(),e.onWindowResize()},grads:function(){this.gridHelper=new o["t"](this.WORK_SPACE_SIZE,20,10066329,211392921),this.gridHelper.name="GridHelper",this.scene.add(this.gridHelper),this.gradGroundMesh=new o["A"](new o["b"](this.WORK_SPACE_SIZE,.8,this.WORK_SPACE_SIZE),new o["C"]({color:16777215})),this.gradGroundMesh.position.y=-.8,this.gradGroundMesh.name="GridHelper",this.gradGroundMesh.receiveShadow=!0,this.gradGroundMesh.castShadow=!0,this.scene.add(this.gradGroundMesh),this.gradGroundMesh1=new o["A"](new o["b"](this.WORK_SPACE_SIZE,3,this.WORK_SPACE_SIZE),new o["C"]({color:16762985})),this.gradGroundMesh1.position.y=-2.5,this.gradGroundMesh1.name="GridHelper",this.gradGroundMesh1.receiveShadow=!0,this.gradGroundMesh1.castShadow=!0,this.scene.add(this.gradGroundMesh1)},outline:function(){this.composer=new o["EffectComposer"](this.renderer);var e=new o["RenderPass"](this.scene,this.camera);this.composer.addPass(e),this.outlinePass=new o["OutlinePass"](new o["ab"](this.CONTAIN_WIDTH-100,this.CONTAIN_HEIGHT),this.scene,this.camera),this.outlinePass.edgeStrength=4,this.outlinePass.edgeThickness=1,this.outlinePass.visibleEdgeColor.set("#00ff00"),this.outlinePass.hiddenEdgeColor.set("#00ff00"),this.outlinePass.edgeGlow=1,this.composer.addPass(this.outlinePass),this.effectFXAA=new o["ShaderPass"](o["FXAAShader"]),this.effectFXAA.uniforms["resolution"].value.set(1/this.CONTAIN_WIDTH,1/this.CONTAIN_HEIGHT)},orbitCont:function(){var e=this;e.controls=new i["a"](e.camera,e.renderer.domElement),e.controls.minDistance=10,e.controls.maxDistance=1300,e.controls.enableKeys=!0,e.controls.rotateSpeed=.3,e.controls.keys={LEFT:65,UP:87,RIGHT:68,BOTTOM:83},e.controls.enablePan=!1,e.controls.enableZoom=!1,e.controls.addEventListener("change",(function(){e.controlsMoved=!0,e.objects.length>1&&e.camera.position.y<0?(e.clearCache(e.gridHelper),e.scene.remove(e.gridHelper),e.clearCache(e.gradGroundMesh),e.scene.remove(e.gradGroundMesh),e.clearCache(e.gradGroundMesh1),e.scene.remove(e.gradGroundMesh1)):(e.clearCache(e.gridHelper),e.scene.remove(e.gridHelper),e.clearCache(e.gradGroundMesh),e.scene.remove(e.gradGroundMesh),e.clearCache(e.gradGroundMesh1),e.scene.remove(e.gradGroundMesh1),e.scene.add(e.gridHelper),e.scene.add(e.gradGroundMesh),e.scene.add(e.gradGroundMesh1))}))},transformCont:function(){var e=this;e.transformControl=new r["a"](this.camera,this.renderer.domElement),e.transformControl.name="transformControl",e.transformControl.size=1.5,e.scene.add(e.transformControl),e.transformControl.addEventListener("dragging-changed",(function(t){e.controls&&(e.controls.enabled=!t.value,e.transformDragFlag=!t.value)}),!1),e.transformControl.addEventListener("change",(function(){e.shootedFlag&&e.shapesController(0),e.showCurrentColor(),e.onAnimationStep()}),!1),e.transformControl.addEventListener("mouseDown",(function(){e.transformControlMove=!1,e.checkScalePosition(e.transformControl.object)}),!1),e.transformControl.addEventListener("objectChange",(function(){e.transformControlMove=!0}),!1),e.transformControl.addEventListener("mouseUp",(function(){e.transformControlMove&&e.allOperationAdd(),e.showCurrentColor(),window.focusedTransformObj&&(e.transformControl.object=window.focusedTransformObj)}),!1)},containerListenner:function(){this.showColorOption=!1,this.showZoomOption=!1,this.onDocumentMouseDown(event)},containerMouseDown:function(){var e=this;e.controlsMoved=!1,e.showColorOption=!1,e.showZoomOption=!1,e.controls.enabled=e.transformDragFlag,e.twoPointTouchFlag=!1,e.touchScale=""},containerMouseMove:function(){},containerMouseUp:function(){this.transformControl.object&&(window.focusedTransformObj=this.transformControl.object),this.controlsMoved||this.transformControlMove||setTimeout((function(){this.onDocumentMouseDown(event)}),100),this.tcScaleYPosition="",this.tcScaleYPositionFlag="",this.tcScaleY="",this.tcX="",this.tcY="",this.tcZ="",this.transformControlMove=!1},orientationCont:function(){this.orientationContr=new o["OrientationControls"](50),document.body.appendChild(this.orientationContr.element),this.orientationContr.element.addEventListener("click",(function(e){switch(e.target.id){case"front":this.camera.position.set(0,0,300);break;case"back":this.camera.position.set(0,0,-300);break;case"top":this.camera.position.set(0,300,0);break;case"bottom":this.camera.position.set(0,-300,0);break;case"left":this.camera.position.set(-300,0,0);break;case"right":this.camera.position.set(300,0,0);break}this.camera.lookAt(this.scene.position),this.camera.updateProjectionMatrix()}))},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},onWindowResize:function(){this.showMore?(this.camera.aspect=(this.CONTAIN_WIDTH-100)/this.CONTAIN_HEIGHT,this.renderer.setSize(this.CONTAIN_WIDTH-100,this.CONTAIN_HEIGHT)):(this.camera.aspect=this.CONTAIN_WIDTH/this.CONTAIN_HEIGHT,this.renderer.setSize(this.CONTAIN_WIDTH,this.CONTAIN_HEIGHT)),this.camera.updateProjectionMatrix()},clearCache:function(e){e.geometry.dispose(),e.material.dispose()},render:function(){this.renderer.render(this.scene,this.camera)},listModule:function(){var e="/mock/moduleList.json";this.$ajax.get(e).then(this.listModuleSucc).catch((function(e){console.log("error:"+e)}))},listModuleSucc:function(e){e&&e.data&&(this.shapesList=e.data.data.shapes,this.cartoonStlList=e.data.data.stl)},showModule:function(e){0==e?(this.shapesListShow=!0,this.cartoonStlShow=!1):1==e&&(this.shapesListShow=!1,this.cartoonStlShow=!0)},hideModule:function(){this.shapesListShow=!1,this.cartoonStlShow=!1},showMoreFn:function(){this.showMore?this.showMore=!1:this.showMore=!0,this.onWindowResize()},dropOffListerner:function(){console.log("dropOffListerner");var t=this;t.shapesMain.addEventListener("touchstart",(function(){t.showColorOption=!1,t.showColorOption=!1})),t.shapesEventL.addEventListener("touchstart",(function(s){t.showColorOption=!1,t.showColorOption=!1,t.selectedDragObj=e(s.target),t.selectedDragObj.hasClass("drag")&&(e(".active_shape").removeClass("active_shape"),t.selectedDragObj.hasClass("name")?(t.dragObj=e(t.selectedDragObj).parents(".module").find(".sprint").clone(),e(t.selectedDragObj).parents(".module").addClass("active_shape"),t.selectedDragObjFlag=!0):t.selectedDragObj.hasClass("sprint")?(t.dragObj=t.selectedDragObj.clone(),e(t.selectedDragObj).parents(".module").addClass("active_shape"),t.selectedDragObjFlag=!0):t.selectedDragObj.hasClass("module")&&(t.dragObj=e(t.selectedDragObj).find(".sprint").clone(),e(t.selectedDragObj).addClass("active_shape"),t.selectedDragObjFlag=!1),t.dragObj.addClass("startDrag"),t.maxW=e(".builder .main_wrapper").width()-t.selectedDragObj[0].offsetWidth,t.maxH=e(".builder .main_wrapper").height()-t.selectedDragObj[0].offsetHeight)}),!1),t.shapesEventL.addEventListener("touchmove",(function(s){t.dragedFlag=!0;var n=s||window.event,o=n.targetTouches[0],i=window.innerWidth;if(t.movedDir=i-o.clientX,t.dragObj&&t.movedDir>100){e("body").append(t.dragObj);var a=o.clientX-50,r=o.clientY-50;a<0?a=0:a>=t.maxW&&(a=t.maxW),r<0||r>=t.maxH&&(r=t.maxH),t.dragObj[0].style.left=a+25+"px",t.dragObj[0].style.top=r+"px"}}),!1),t.shapesEventL.addEventListener("touchend",(function(s){var n,o,i;t.dragObj&&t.dragedFlag&&t.movedDir>100?(t.selectedDragObjFlag?(n=Number(e(t.selectedDragObj).parents(".module").find(".this_code").val()),o=Number(e(t.selectedDragObj).parents(".module").find(".this_module").val()),i=Number(e(t.selectedDragObj).parents(".module").find(".this_url").val())):0==t.selectedDragObjFlag&&(n=Number(e(t.selectedDragObj).find(".this_code").val()),o=Number(e(t.selectedDragObj).find(".this_module").val()),i=Number(e(t.selectedDragObj).find(".this_url").val())),0==o?t.changeShapes(n):1==o?t.loadSTL(n):2==o?t.showInput(0):3==o&&t.loadLocalSTL(i),e(t.dragObj).remove(),setTimeout((function(){t.onDocumentMouseDown(s)}),100)):e(t.dragObj).remove();t.dragedFlag=!1,e(".active_shape").removeClass("active_shape")}),!1),t.shapesMain.addEventListener("mousedown",(function(){t.showColorOption=!1,t.showColorOption=!1})),t.shapesEventL.addEventListener("mousedown",(function(s){console.log(123),t.showColorOption=!1,t.showColorOption=!1,t.selectedDragObj=e(s.target),t.selectedDragObj.hasClass("drag")&&(e(".active_shape").removeClass("active_shape"),t.selectedDragObj.hasClass("name")?(t.dragObj=e(t.selectedDragObj).parents(".module").find(".sprint").clone(),e(t.selectedDragObj).parents(".module").addClass("active_shape"),t.selectedDragObjFlag=!0):t.selectedDragObj.hasClass("sprint")?(t.dragObj=t.selectedDragObj.clone(),e(t.selectedDragObj).parents(".module").addClass("active_shape"),t.selectedDragObjFlag=!0):t.selectedDragObj.hasClass("module")&&(t.dragObj=e(t.selectedDragObj).find(".sprint").clone(),e(t.selectedDragObj).addClass("active_shape"),t.selectedDragObjFlag=!1),t.dragObj.addClass("startDrag"),t.maxW=e(".builder .main_wrapper").width()-t.selectedDragObj[0].offsetWidth,t.maxH=e(".builder .main_wrapper").height()-t.selectedDragObj[0].offsetHeight)}),!1),t.shapesEventL.addEventListener("mousemove",(function(s){t.dragedFlag=!0;var n=s||window.event,o=n.targetTouches[0],i=window.innerWidth;if(t.movedDir=i-o.clientX,t.dragObj&&t.movedDir>100){e("body").append(t.dragObj);var a=o.clientX-50,r=o.clientY-50;a<0?a=0:a>=t.maxW&&(a=t.maxW),r<0||r>=t.maxH&&(r=t.maxH),t.dragObj[0].style.left=a+25+"px",t.dragObj[0].style.top=r+"px"}}),!1),t.shapesEventL.addEventListener("mouseup",(function(s){var n,o,i;t.dragObj&&t.dragedFlag&&t.movedDir>100?(t.selectedDragObjFlag?(n=Number(e(t.selectedDragObj).parents(".module").find(".this_code").val()),o=Number(e(t.selectedDragObj).parents(".module").find(".this_module").val()),i=Number(e(t.selectedDragObj).parents(".module").find(".this_url").val())):0==t.selectedDragObjFlag&&(n=Number(e(t.selectedDragObj).find(".this_code").val()),o=Number(e(t.selectedDragObj).find(".this_module").val()),i=Number(e(t.selectedDragObj).find(".this_url").val())),0==o?t.changeShapes(n):1==o?t.loadSTL(n):2==o?t.showInput(0):3==o&&t.loadLocalSTL(i),e(t.dragObj).remove(),setTimeout((function(){t.onDocumentMouseDown(s)}),100)):e(t.dragObj).remove();t.dragedFlag=!1,e(".active_shape").removeClass("active_shape")}),!1)},dragImg:function(t){var s=this;s.showColorOption=!1,s.showColorOption=!1,s.selectedDragObj=e(t.target),s.selectedDragObj.hasClass("drag")&&(e(".active_shape").removeClass("active_shape"),s.selectedDragObj.hasClass("name")?(s.dragObj=e(s.selectedDragObj).parents(".module").find(".sprint").clone(),e(s.selectedDragObj).parents(".module").addClass("active_shape"),s.selectedDragObjFlag=!0):s.selectedDragObj.hasClass("sprint")?(s.dragObj=s.selectedDragObj.clone(),e(s.selectedDragObj).parents(".module").addClass("active_shape"),s.selectedDragObjFlag=!0):s.selectedDragObj.hasClass("module")&&(s.dragObj=e(s.selectedDragObj).find(".sprint").clone(),e(s.selectedDragObj).addClass("active_shape"),s.selectedDragObjFlag=!1),s.dragObj.addClass("startDrag"),s.maxW=e(".builder .main_wrapper").width()-s.selectedDragObj[0].offsetWidth,s.maxH=e(".builder .main_wrapper").height()-s.selectedDragObj[0].offsetHeight,console.log())},moveImg:function(t){var s=this;s.dragedFlag=!0;var n=t||window.event,o=s.CONTAIN_WIDTH;if(s.movedDir=o-n.clientX,console.log("123"),s.dragObj&&s.movedDir<100){e("body").append(s.dragObj);var i=n.clientX-50,a=n.clientY-50;i<0?i=0:i>=s.maxW&&(i=s.maxW),a<0||a>=s.maxH&&(a=s.maxH),s.dragObj[0].style.left=i+25+"px",s.dragObj[0].style.top=a+"px"}},upImg:function(t){var s,n,o,i=this;i.dragObj&&i.dragedFlag&&i.movedDir>100?(i.selectedDragObjFlag?(s=Number(e(i.selectedDragObj).parents(".module").find(".this_code").val()),n=Number(e(i.selectedDragObj).parents(".module").find(".this_module").val()),o=Number(e(i.selectedDragObj).parents(".module").find(".this_url").val())):0==i.selectedDragObjFlag&&(s=Number(e(i.selectedDragObj).find(".this_code").val()),n=Number(e(i.selectedDragObj).find(".this_module").val()),o=Number(e(i.selectedDragObj).find(".this_url").val())),0==n?i.changeShapes(s):1==n?i.loadSTL(s):2==n?i.showInput(0):3==n&&i.loadLocalSTL(o),e(i.dragObj).remove(),setTimeout((function(){i.onDocumentMouseDown(t)}),100)):e(i.dragObj).remove();i.dragedFlag=!1,e(".active_shape").removeClass("active_shape")},selectModule:function(t,s,n,o){var i;console.log("selectModule::"+o),0==t&&"text"==o?t=2:0==t&&"stl"==o&&(t=1),e(".active_shape").removeClass("active_shape"),0==t?(i=e(".normal_wrapper").find(".module:eq("+n+")"),this.stlGeoFlag=0,this.changeShapes(s)):1==t?(i=e(".cartoon_wrapper").find(".module:eq("+n+")"),this.stlGeoFlag=1,this.loadSTL(s,i)):2==t&&(i=e(".normal_wrapper").find(".module:eq("+n+")"),this.stlGeoFlag=1,this.showInput(0)),i.addClass("active_shape")},showChild:function(e){1==e?this.showColorOption=!0:0==e&&(this.showZoomOption=!0)},zoomView:function(e){this.cameraZoom&&(this.cameraZoom=e/100,this.camera.zoom=this.cameraZoom,this.camera.lookAt(this.scene.position),this.camera.updateProjectionMatrix())},changeShapes:function(e){switch(this.stlGeoFlag=0,this.showInput(1),this.currentModule=0,this.shootedFlag=!1,e){case 0:this.currentObj=new o["b"](this.SHAPE_SIZE,this.SHAPE_SIZE,this.SHAPE_SIZE);break;case 1:this.currentObj=new o["g"](this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,32);break;case 2:this.currentObj=new o["f"](this.SHAPE_SIZE/2,this.SHAPE_SIZE,32);break;case 3:this.currentObj=new o["T"](this.SHAPE_SIZE/2,32,32);break;case 4:this.currentObj=new o["Z"](10,2.5,16,100);break;case 5:this.currentObj=new o["g"](this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,5);break;case 6:this.currentObj=new o["f"](this.SHAPE_SIZE/2,this.SHAPE_SIZE,4);break;case 7:var t=this.SHAPE_SIZE/2,s=this.SHAPE_SIZE/3,n=this.SHAPE_SIZE,i=new o["S"];i.moveTo(2*t,t),i.absarc(t,t,t,0,2*Math.PI,!1);var a=new o["I"];a.moveTo(t+s,t),a.absarc(t,t,s,0,2*Math.PI,!0),i.holes.push(a);var r=new o["m"](i,{amount:n,bevelEnabled:!1,steps:1,curveSegments:60});r.center(),r.rotateX(-.5*Math.PI),this.currentObj=r;break;case 8:this.currentObj=new o["g"](this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,3);break;default:this.currentObj=new o["b"](this.SHAPE_SIZE,this.SHAPE_SIZE,this.SHAPE_SIZE)}this.currentObjMesh=new o["A"](this.currentObj,this.currentObjMaterial)},showInput:function(e){0===e?(this.currentObj=null,this.showTextWindow=!0):(this.showTextWindow=!1,this.inputCanConfirm=!1,this.textInput="")},textInputFn:function(t){var s=t.target;this.textInput=e(s).val();var n=e(s).val().length;this.inputCanConfirm=n>0},insertWord:function(){var e=this;e.showLoading=!0,e.showInput(1),this.fontLoader.load("/font/SimHei_Regular.json",(function(t){e.wordFont=t,e.createText(),e.showLoading=!1}),(function(t){e.progressingBar=t.loaded/t.total*100}),(function(e){console.log("An error happened :"+e)}))},createText:function(){var e,t,s,n=this.textInput1,i=this,a=n;switch(a.length){case 3:s=50;break;case 4:s=45;break;case 5:s=40;break;case 6:s=35;break;case 7:s=30;break;default:s=20}var r=new o["W"](a,{font:i.wordFont,size:s,height:10,curveSegments:22,bevelEnabled:!1});r.computeBoundingBox(),r.computeVertexNormals();var l=(new o["d"]).fromGeometry(r);l.computeBoundingBox(),e=-.5*(l.boundingBox.max.x-l.boundingBox.min.x),l.translate(e,-25,0),l.rotateX(-Math.PI/2);var c=new o["D"]({color:i.wordColor,flatShading:!0});t=new o["A"](l,c),t.name="shapes",t.receiveShadow=!0,t.castShadow=!0,i.scene.add(t),i.objects.push(t),i.shapesObj.push(t),this.undoActive=!0,i.activeSave=!0,i.transformControl.object=t,i.focusedTransformObj=i.transformControl.object,console.log(t),i.cleanSelectedObject(t),i.createObjForOperation(t,"add"),i.eachObjSetps(t,0),i.shapesController(),i.transformControl.attach(i.focusedTransformObj),i.resetSomeThing()},loadSTL:function(t,s){var o=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var i,r,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i=o,i.showInput(1),e(".active_shape").removeClass("active_shape"),e(s).addClass("active_shape"),i.currentModule=0,i.showLoading=!0,i.shootedFlag=!1,n.t0=t,n.next=0===n.t0?10:1===n.t0?12:2===n.t0?14:3===n.t0?16:4===n.t0?18:5===n.t0?20:6===n.t0?22:7===n.t0?24:8===n.t0?26:9===n.t0?28:10===n.t0?30:11===n.t0?32:34;break;case 10:return r="/models/stl/ascii/standing.stl",n.abrupt("break",35);case 12:return r="/models/stl/ascii/climbing.stl",n.abrupt("break",35);case 14:return r="/models/stl/ascii/lying.stl",n.abrupt("break",35);case 16:return r="/models/stl/ascii/sitting.stl",n.abrupt("break",35);case 18:return r="/models/stl/ascii/tyrannosaurusRex.stl",n.abrupt("break",35);case 20:return r="/models/stl/ascii/pokemon/bulbasaur_starter_1gen_flowalistik.stl",n.abrupt("break",35);case 22:return r="/models/stl/ascii/pokemon/charmander_starter_1gen_flowalistik.stl",n.abrupt("break",35);case 24:return r="/models/stl/ascii/pokemon/chikorita_starter_2gen_flowalistik.stl",n.abrupt("break",35);case 26:return r="/models/stl/ascii/pokemon/pikachu_1gen_flowalistik.stl",n.abrupt("break",35);case 28:return r="/models/stl/ascii/pokemon/squirtle_starter_1gen_flowalistik.stl",n.abrupt("break",35);case 30:return r="/models/stl/ascii/pokemon/totodile_starter_2gen_flowalistik.stl",n.abrupt("break",35);case 32:return r="/models/stl/ascii/five-point-star.stl",n.abrupt("break",35);case 34:r="/models/stl/ascii/tyrannosaurusRex.stl";case 35:return l=new a["a"],n.next=38,l.load(r,(function(e){i.currentObj=e,i.showLoading=!1}),(function(e){i.progressingBar=e.loaded/e.total*100}));case 38:case"end":return n.stop()}}),n)})))()},onDocumentMouseDown:function(){if(this.shootedFlag)this.checkIntersection(event);else{event.preventDefault();var e=!this.showMore,t=null;e?"touchend"==event.type?(t=event.changedTouches[0],this.mouse.set(t.clientX/this.CONTAIN_WIDTH*2-1,-t.clientY/this.CONTAIN_HEIGHT*2+1)):this.mouse.set(event.clientX/this.CONTAIN_WIDTH*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1):"touchend"==event.type?(t=event.changedTouches[0],this.mouse.set(t.clientX/(this.CONTAIN_WIDTH-100)*2-1,-t.clientY/this.CONTAIN_HEIGHT*2+1)):this.mouse.set(event.clientX/(this.CONTAIN_WIDTH-100)*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1),this.raycaster.setFromCamera(this.mouse,this.camera);var s=this.raycaster.intersectObjects(this.objects);if(s.length>0){var n=s[0];if(this.isShiftDown)n.object!==this.plane&&(this.scene.remove(n.object),this.objects.splice(this.objects.indexOf(n.object),1));else if(this.currentObj){var i=this.currentObjMaterial.clone(),a=new o["A"](this.currentObj,i);a.position.copy(n.point).add(n.face.normal),0==this.stlGeoFlag?(a.position.divideScalar(this.SHAPE_SIZE).floor().multiplyScalar(this.SHAPE_SIZE).addScalar(this.SHAPE_SIZE/2),a.name="shapes"):1==this.stlGeoFlag?(a.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25),a.name="stl"):2==this.stlGeoFlag&&(a.position.divideScalar(50).floor().multiplyScalar(50),a.name="stlLocal",a.rotation.set(-Math.PI/2,0,0)),a.receiveShadow=!0,a.castShadow=!0,this.scene.add(a),this.objects.push(a),this.shapesObj.push(a),this.undoActive=!0,this.activeSave=!0,this.createObjForOperation(a,"add"),this.eachObjSetps(a,0),this.shapesController(),this.transformControl.object=a,this.transformControl.attach(this.transformControl.object),this.cleanSelectedObject(a),this.showCurrentColor(),this.resetSomeThing()}this.shootedFlag=!0,this.render()}}},onDocumentMouseMove:function(){event.preventDefault(),this.mouse.set(event.clientX/this.CONTAIN_WIDTH*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1),this.raycaster.setFromCamera(this.mouse,this.camera);var e=this.raycaster.intersectObjects(this.objects);if(e.length>0){var t=e[0];this.mouseHelper.position.copy(t.point).add(t.face.normal),this.mouseHelper.position.divideScalar(this.SHAPE_SIZE).floor().multiplyScalar(this.SHAPE_SIZE).addScalar(this.SHAPE_SIZE/2)}this.render()},createObjForOperation:function(e,t){window.deleteObjFlag=!1,this.saveFlag=!1,this.allOperation.length>=5&&this.allOperation.shift();var s={};s["uuid"]=e.uuid,s["position"]=e.position.clone(),s["rotation"]=e.rotation.clone(),s["quaternion"]=e.quaternion.clone(),s["scale"]=e.scale.clone(),s["color"]=e.material.color.clone(),s["operation"]=t,s["mesh"]=e,this.allOperation.push(s)},eachObjSetps:function(e,t){var s,n={};0===t?(this.eachObjectInfo[e.uuid]||(this.eachObjectInfo[e.uuid]=[]),n["uuid"]=e.uuid,n["position"]=e.position.clone(),n["rotation"]=e.rotation.clone(),n["quaternion"]=e.quaternion.clone(),n["scale"]=e.scale.clone(),n["color"]=e.material.color.clone(),n["mesh"]=e,n["time"]=Date.parse(new Date),this.eachObjectInfo[e.uuid].length?n["index"]=this.eachObjectInfo[e.uuid].length:n["index"]=0,s=this.eachObjectInfo[e.uuid],s.push(n)):2===t?(this.eachObjectInfo[e.uuid]||(this.eachObjectInfo[e.uuid]=[]),n["uuid"]=e.uuid,n["position"]=e.position.clone(),n["rotation"]=e.rotation.clone(),n["quaternion"]=e.quaternion.clone(),n["scale"]=e.scale.clone(),n["color"]=e.color.clone(),n["mesh"]=e.mesh,n["time"]=Date.parse(new Date),this.eachObjectInfo[e.uuid].length?n["index"]=this.eachObjectInfo[e.uuid].length:n["index"]=0,s=this.eachObjectInfo[e.uuid],s.push(n)):1===t&&(this.eachRedoObjectInfo[e.uuid]||(this.eachRedoObjectInfo[e.uuid]=[]),n["uuid"]=e.uuid,n["position"]=e.position.clone(),n["rotation"]=e.rotation.clone(),n["quaternion"]=e.quaternion.clone(),n["scale"]=e.scale.clone(),n["color"]=e.color.clone(),n["mesh"]=e.mesh,n["time"]=Date.parse(new Date),s=this.eachRedoObjectInfo[e.uuid],s.push(n))},shapesController:function(){this.showMore&&e(".obj_control").css({width:this.CONTAIN_WIDTH-100}),this.controlBar=!0},addSelectedObject:function(e){this.selectedObjects=[],this.selectedObjects.push(e)},cleanSelectedObject:function(e){e&&this.addSelectedObject(e)},showCurrentColor:function(){if(this.isWhite=!1,this.transformControl.object){var e=this.transformControl.object.material.color.toJSON();switch(this.isWhite="14540253"==e,this.cleanSelectedObject(this.transformControl.object),this.transformControlModeType){case 0:this.statusTxt=this.textSC;break;case 1:this.statusTxt=this.textTR;break;case 2:this.statusTxt=this.textRO;break}this.controlType=!0}else this.controlType=!1},resetSomeThing:function(){e(".active_shape").removeClass("active_shape"),this.currentObjMaterial=new o["C"]({color:14540253})},checkIntersection:function(e){var t,s;e.changedTouches?(t=e.changedTouches[0].pageX,s=e.changedTouches[0].pageY):(t=e.clientX,s=e.clientY),this.mouse.x=t/this.CONTAIN_WIDTH*2-1,this.mouse.y=-s/this.CONTAIN_HEIGHT*2+1;var n=this.showMore;if(n&&(this.mouse.x=t/(this.CONTAIN_WIDTH-100)*2-1,this.mouse.y=-s/this.CONTAIN_HEIGHT*2+1),this.plane){var o;if(this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.intersectObject(this.plane,!1,this.intersectsSelect),this.intersectsSelect.length>0){var i=this.intersectsSelect[0].point;this.intersection.point.copy(i);var a=this.intersectsSelect[0].face.normal.clone();a.transformDirection(this.plane.matrixWorld),a.multiplyScalar(10),a.add(this.intersectsSelect[0].point),this.intersection.normal.copy(this.intersectsSelect[0].face.normal),o=this.raycaster.intersectObjects(this.scene.children),o.length>1&&(!o||"shapes"!=o[0].object.name&&"stl"!=o[0].object.name&&"stlLocal"!=o[0].object.name?"plane"==o[0].object.name&&(this.transformControl.detach(),this.transformControl.attach(o[0].object)):(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(o[0].object)),this.colorControl=!0),this.intersection.intersects=!0,this.intersectsSelect.length=0}else this.intersection.intersects=!1,o=this.raycaster.intersectObjects(this.scene.children),o.length>0&&(!o||"shapes"!=o[0].object.name&&"stl"!=o[0].object.name&&"stlLocal"!=o[0].object.name?"plane"==o[0].object.name&&(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(o[0].object)):(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(o[0].object)));this.render()}},hideSelf:function(){this.$parent.showThreeD()},allOperationAdd:function(){window.focusedTransformObj&&(this.createObjForOperation(this.transformControl.object,"transform"),this.eachObjSetps(this.transformControl.object,0)),this.allOperation.length>0?this.undoActive=!0:this.undoActive=!1},checkScalePosition:function(e){this.tcScale=e.scale.clone(),this.tcScaleYPosition=e.position.clone().y,this.tcScaleY=e.scale.clone().y,"shapes"==e.name?this.tcScaleYPosition==this.SHAPE_SIZE*e.scale.y/2?this.tcScaleYPositionFlag=!0:this.tcScaleYPositionFlag=!1:"stl"==e.name&&(this.tcScaleYPosition==e.geometry.boundingSphere.radius?this.tcScaleYPositionFlag=!0:this.tcScaleYPositionFlag=!1)},onAnimationStep:function(){if(this.transformControl.object){var e=this.SHAPE_SIZE,t=this.LIMIT_SIZE,s=.1,n=this.transformControl.getMode(),o=this.transformControl.object;switch(n){case"scale":"stl"==o.name&&(this.LIMIT_SIZE=2.22),o.scale.clampScalar(s,this.LIMIT_SIZE),this.checkAxis("scale",o);break;case"translate":"X"==this.transformControl.axis?o.position.x>=0&&o.position.x+this.SHAPE_SIZE*o.scale.x/2>=this.WORK_SPACE_SIZE/2?o.position.x=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*o.scale.x/2:o.position.x<0&&o.position.x-this.SHAPE_SIZE*o.scale.x/2<=-this.WORK_SPACE_SIZE/2&&(o.position.x=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*o.scale.x/2):"Z"==this.transformControl.axis?o.position.z>=0&&o.position.z+this.SHAPE_SIZE*o.scale.z/2>=this.WORK_SPACE_SIZE/2?o.position.z=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*o.scale.z/2:o.position.z<0&&o.position.z-this.SHAPE_SIZE*o.scale.z/2<=-this.WORK_SPACE_SIZE/2&&(o.position.z=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*o.scale.z/2):"Y"==this.transformControl.axis&&(o.position.y>=0&&o.position.y+this.SHAPE_SIZE*o.scale.y/2>=this.WORK_SPACE_SIZE?o.position.y=this.WORK_SPACE_SIZE-this.SHAPE_SIZE*o.scale.y/2:"stl"==o.name?o.position.y<o.geometry.boundingSphere.radius*o.scale.y&&(o.position.y=this.SHAPE_SIZE*o.scale.y):"stlLocal"==o.name?o.position.y<0&&(o.position.y=0):o.position.y<this.SHAPE_SIZE*o.scale.y/2&&(o.position.y=this.SHAPE_SIZE*o.scale.y/2));break;case"rotate":break}this.SHAPE_SIZE=e,this.LIMIT_SIZE=t}},checkAxis:function(e,t){"scale"===e?(t.position.x>=0&&t.position.x+this.SHAPE_SIZE*t.scale.x/2>=this.WORK_SPACE_SIZE/2?t.position.x=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*t.scale.x/2:t.position.x<0&&t.position.x-this.SHAPE_SIZE*t.scale.x/2<=-this.WORK_SPACE_SIZE/2&&(t.position.x=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*t.scale.x/2),t.position.z>=0&&t.position.z+this.SHAPE_SIZE*t.scale.z/2>=this.WORK_SPACE_SIZE/2?t.position.z=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*t.scale.z/2:t.position.z<0&&t.position.z-this.SHAPE_SIZE*t.scale.z/2<=-this.WORK_SPACE_SIZE/2&&(t.position.z=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*t.scale.z/2),t.position.y>=0&&t.position.y<=this.SHAPE_SIZE*t.scale.y/2?t.position.y=this.SHAPE_SIZE*t.scale.y/2:t.position.y>=0&&this.tcScaleYPositionFlag?"stl"==t.name?t.geometry.boundingSphere&&(this.tcScaleYPosition==t.geometry.boundingSphere.radius*t.scale.y/2?t.position.y=t.geometry.boundingSphere.radius*t.scale.y:t.position.y=this.SHAPE_SIZE*t.scale.y/2):t.position.y=this.SHAPE_SIZE*t.scale.y/2:t.position.y<0&&(t.position.y=this.SHAPE_SIZE*t.scale.y/2)):"rotate"===e&&console.log("check for retate")},changeControls:function(t){if(!window.deleteObjFlag){this.showColorOption=!1,this.showZoomOption=!1;var s=event.target;switch(e(s).hasClass("control_btn")||(s=e(s).closest(".control_btn")),0==this.transformControlModeType&&0==t||1==this.transformControlModeType&&1==t||2==this.transformControlModeType&&2==t||3==this.transformControlModeType&&3==t?s.toggleClass("active_control"):(e(".active_control").removeClass("active_control"),s.addClass("active_control")),s.hasClass("active_control")?this.transformControl.attach(this.transformControl.object):this.transformControl.detach(this.transformControl.object),t){case 0:this.transformControl.setMode("scale"),this.statusTxt=this.textSC,this.transformControlModeType=0;break;case 1:this.transformControl.setMode("translate"),this.statusTxt=this.textTR,this.transformControlModeType=1;break;case 2:this.transformControl.setMode("rotate"),this.statusTxt=this.textRO,this.transformControlModeType=2;break;default:this.transformControl.setMode("translate"),this.statusTxt=this.textTR,this.transformControlModeType=1}console.log(this.transformControl.object),this.transformControl.object?this.colorControl=!0:this.colorControl=!1}},deletedSelected:function(){this.showColorOption=!1,this.showZoomOption=!1,window.focusedTransformObj&&this.transformControl.object&&(this.createObjForOperation(this.transformControl.object,"delete"),this.eachObjSetps(this.transformControl.object,0),this.scene.remove(this.transformControl.object),this.objects.splice(this.objects.indexOf(this.transformControl.object),1),e(".active_control").removeClass("active_control"),this.colorControl=!1,window.deleteObjFlag=!0),this.transformControl.detach(),this.shapesController(0),this.render(),this.objects.length>1?this.activeSave=!0:(this.activeSave=!1,this.controlBar=!1)},changeCurrentColor:function(e){this.isWhite=!1,this.transformControl.object&&(0==e?(this.transformControl.object.material.color.set("#dddddd"),this.isWhite=!0):(this.transformControl.object.material.color.set("#f2f545"),this.isWhite=!1),this.createObjForOperation(this.transformControl.object,"transform"),this.eachObjSetps(this.transformControl.object,0))},redoUndo:function(e){this.showColorOption=!1,this.showZoomOption=!1;var t=!1,s=!1,n=!1;if(0===e){if(this.allOperation.length>0){var o=this.allOperation[this.allOperation.length-1];if(this.redoOperation.push(o),"transform"===o.operation?t=!0:"delete"===o.operation?s=!0:"add"===o.operation&&(n=!0),n)o.mesh&&(this.eachObjSetps(o,1),this.scene.remove(o.mesh),this.objects.splice(this.objects.indexOf(o.mesh),1));else if(s)o.mesh&&(this.eachObjSetps(o,1),this.scene.add(o.mesh),this.objects.push(o.mesh));else if(t){var i=this.eachObjectInfo[o.uuid];i&&(i.length>1?this.redoProcess(i[i.length-2]):this.redoProcess(i[i.length-1]),this.eachObjSetps(this.eachObjectInfo[o.uuid].pop(),1))}this.allOperation.pop()}}else if(1===e&&this.redoOperation.length>0){var a=this.redoOperation[this.redoOperation.length-1];if(this.allOperation.push(a),"transform"===a.operation?t=!0:"delete"===a.operation?s=!0:"add"===a.operation&&(n=!0),n)a.mesh&&(this.eachObjSetps(a,2),this.scene.add(a.mesh),this.objects.push(a.mesh));else if(s)a.mesh&&(this.eachObjSetps(a,2),this.scene.remove(a.mesh),this.objects.splice(this.objects.indexOf(a.mesh),1));else if(t){var r=this.eachRedoObjectInfo[a.uuid];r&&(r.length>1?this.redoProcess(r[r.length-2]):this.redoProcess(r[r.length-1]),this.eachObjSetps(this.eachRedoObjectInfo[a.uuid].pop(),2))}this.redoOperation.pop()}this.transformControl.detach(),this.colorControl=!1,this.render(),this.allOperation.length>0?this.undoActive=!0:this.undoActive=!1,this.redoOperation.length>0?this.redoActive=!0:this.redoActive=!1,this.objects.length>1?this.activeSave=!0:this.activeSave=!1},redoProcess:function(e){e.mesh.position.copy(e.position),e.mesh.rotation._x=e.rotation._x,e.mesh.rotation._y=e.rotation._y,e.mesh.rotation._z=e.rotation._z,e.mesh.quaternion._x=e.quaternion._x,e.mesh.quaternion._y=e.quaternion._y,e.mesh.quaternion._z=e.quaternion._z,e.mesh.scale.set(e.scale.x,e.scale.y,e.scale.z),e.mesh.material.color.set(e.color)}},mounted:function(){this.mobile=/Android|webOS|iPhone|iPad|BlackBerry/i.test(navigator.userAgent),this.container=document.getElementById("container"),this.shapesEventL=document.getElementById("childWrapper"),this.shapesMain=document.getElementById("shapes"),this.currentObjMaterial=new o["C"]({color:14540253}),this.fontLoader=new o["r"],this.mouseHelperMaterial=this.currentObjMaterial,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight,this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,window.focusedTransformObj=this.focusedTransformObj,window.deleteObjFlag=this.deleteObjFlag,this.init(),this.listModule();var e=this;window.onresize=function(){e.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,e.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight,e.onWindowResize()}},destroyed:function(){},watch:{CONTAIN_WIDTH:function(e){e&&(this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight)},CONTAIN_HEIGHT:function(e){e&&(this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight)},focusedTransformObj:function(e){e&&(console.log("change the focusedTransformObj"),window.focusedTransformObj=this.focusedTransformObj)},textInput:function(e,t){e&&(console.log("changed textInput"),console.log("oldVal:"+t),console.log("newVal:"+e),this.textInput1=e)}}}}).call(this,s("1157"))},f49a:function(e,t,s){},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-407640df.73c9be2b.js.map
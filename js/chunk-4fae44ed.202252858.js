(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4fae44ed"],{"3ec3":function(t,e,s){"use strict";s.r(e);var o=s("db12").a,s=(s("97b3"),s("2877")),o=Object(s.a)(o,function(){var o=this,t=o.$createElement,n=o._self._c||t;return n("div",{staticClass:"builder fixedBuilder"},[n("div",{class:"main_wrapper main_wrapper_"+this.$i18n.locale,attrs:{id:"mainWrapper"}},[n("div",{staticClass:"clearfix",attrs:{id:"container"},on:{click:o.containerListenner,mousedown:o.containerMouseDown,mousemove:o.containerMouseMove,mouseup:o.containerMouseUp}}),n("div",{staticClass:"show_more clearfix",class:o.showMore?"":"show_more_close",on:{click:function(t){return o.showMoreFn()}}},[n("img",{attrs:{src:"/image/3dBuilder/arrow.png",alt:""}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.showMore,expression:"showMore"}],staticClass:"clearfix",attrs:{id:"shapes"}},[o.shapesListShow||o.cartoonStlShow?o._e():n("div",{staticClass:"shapes_wrapper"},[n("div",{staticClass:"shapes_options normal",on:{click:function(t){return o.showModule(0)}}},[o._v(o._s(o.$t("REGULAR"))+" "+o._s(o.$t("MODEL"))+" "),n("i",{staticClass:"iconfont arrow arrow_right"},[o._v("")])]),n("div",{staticClass:"shapes_options cartoon",on:{click:function(t){return o.showModule(1)}}},[o._v(o._s(o.$t("CARTOON"))+" "+o._s(o.$t("MODEL"))+" "),n("i",{staticClass:"iconfont arrow arrow_right"},[o._v("")])])]),o.shapesListShow||o.cartoonStlShow?n("div",{attrs:{id:"childWrapper"}},[o.shapesListShow?n("div",{staticClass:"child_wrapper normal_wrapper"},[n("div",{staticClass:"child_title",on:{click:function(t){return o.hideModule()}}},[n("i",{staticClass:"iconfont arrow"},[o._v("")]),o._v(o._s(o.$t("REGULAR"))+" "+o._s(o.$t("MODEL"))+" ")]),o._l(o.shapesList,function(e,s){return n("div",{key:s,staticClass:"module shapes drag",class:e.title,on:{click:function(t){return o.selectModule(0,e.code,s,e.module)}}},["shape"==e.module?n("input",{staticClass:"this_module",attrs:{type:"hidden",value:"0"}}):"stl"==e.module?n("input",{staticClass:"this_module",attrs:{type:"hidden",value:"1"}}):"text"==e.module?n("input",{staticClass:"this_module",attrs:{type:"hidden",value:"2"}}):o._e(),n("input",{staticClass:"this_code",attrs:{type:"hidden"},domProps:{value:e.code}}),n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:"/image/3dBuilder/3dPrinting/sprint_"+e.title+".png",expression:"'/image/3dBuilder/3dPrinting/sprint_'+item.title+'.png'",arg:"background-image"}],staticClass:"drag sprint",class:"sprint_"+e.title}),n("div",{staticClass:"name drag"},[o._v(o._s(o.$t(e.name)))])])})],2):o._e(),o.cartoonStlShow?n("div",{staticClass:"child_wrapper cartoon_wrapper"},[n("div",{staticClass:"child_title",on:{click:function(t){return o.hideModule()}}},[n("i",{staticClass:"iconfont arrow"},[o._v("")]),o._v(o._s(o.$t("CARTOON"))+" "+o._s(o.$t("MODEL"))+" ")]),o._l(o.cartoonStlList,function(e,s){return n("div",{key:s,staticClass:"module lego drag",class:e.title,on:{click:function(t){return o.selectModule(1,e.code,s,e.module)}}},[n("input",{staticClass:"this_module",attrs:{type:"hidden",value:"1"}}),n("input",{staticClass:"this_code",attrs:{type:"hidden"},domProps:{value:s}}),n("div",{directives:[{name:"lazy",rawName:"v-lazy:background-image",value:"/image/3dBuilder/3dPrinting/sprint_"+e.title+".png",expression:"'/image/3dBuilder/3dPrinting/sprint_'+item.title+'.png'",arg:"background-image"}],staticClass:"drag sprint sprintY",class:"sprint_"+e.title}),n("div",{staticClass:"name drag"},[o._v(o._s(o.$t(e.name)))])])})],2):o._e()]):o._e()]),n("div",{staticClass:"module_btns clearfix"},[n("div",{staticClass:"btn_main go_mainPage",on:{click:function(t){return o.leaveBuilder()}}},[o._m(0),n("div",{staticClass:"module_btn_name"},[o._v(o._s(o.$t("BACK")))])]),n("div",{staticClass:"btn_main save_module save_stl",class:o.activeSave?"":"noActive_save",on:{click:function(t){return o.saveModuleShow(0)}}},[o._m(1),n("div",{staticClass:"module_btn_name"},[o._v(o._s(o.$t("SAVE")))])])]),n("div",{staticClass:"obj_control has_right_menu"},[o.controlBar?n("div",{staticClass:"obj_control_wrapper clearfix"},[n("div",{staticClass:"control_btn undo_control ",class:o.undoActive?"":"noActive_control",on:{click:function(t){return o.redoUndo(0)}}},[n("i",{staticClass:"iconfont"},[o._v("")]),n("div",{staticClass:"btn_name"},[o._v(o._s(o.$t("REDO")))])]),n("div",{staticClass:"control_btn redo_control ",class:o.redoActive?"":"noActive_control",on:{click:function(t){return o.redoUndo(1)}}},[n("i",{staticClass:"iconfont"},[o._v("")]),n("div",{staticClass:"btn_name"},[o._v(o._s(o.$t("UNDO")))])]),n("div",{staticClass:"control_btn size_control",on:{click:function(t){return o.changeControls(0)}}},[o._m(2),n("div",{staticClass:"btn_name"},[o._v(o._s(o.$t("CHANGE_SIZE")))])]),n("div",{staticClass:"control_btn trans_control active_control",on:{click:function(t){return o.changeControls(1)}}},[o._m(3),n("div",{staticClass:"btn_name"},[o._v(o._s(o.$t("MOVE")))])]),n("div",{staticClass:"control_btn rotate_control",on:{click:function(t){return o.changeControls(2)}}},[o._m(4),n("div",{staticClass:"btn_name"},[o._v(o._s(o.$t("ROTATE")))])]),n("div",{staticClass:"control_btn zoomin_control",on:{click:function(t){return o.showChild(0)}}},[n("i",{staticClass:"iconfont"},[o._v("")]),n("div",{staticClass:"btn_name"},[o._v(o._s(o.$t("ZOOM")))]),o.showZoomOption?n("div",{staticClass:"zoom_options"},[n("div",{staticClass:"zoom_opt",on:{click:function(t){return o.zoomView(50)}}},[o._v("50%")]),n("div",{staticClass:"zoom_opt",on:{click:function(t){return o.zoomView(100)}}},[o._v("100%")]),n("div",{staticClass:"zoom_opt",on:{click:function(t){return o.zoomView(200)}}},[o._v("200%")])]):o._e()]),n("div",{staticClass:"control_btn delete_control",on:{click:function(t){return o.deletedSelected()}}},[n("i",{staticClass:"iconfont"},[o._v("")]),n("div",{staticClass:"btn_name"},[o._v(o._s(o.$t("DELETE")))])]),o.colorControl?n("div",{staticClass:"control_btn color_control_wrapper",on:{click:function(t){return o.showChild(1)}}},[n("div",{staticClass:"color_circle outside_color",class:o.isWhite?"white_color_circle":""}),n("div",{staticClass:"btn_name"},[o._v(o._s(o.$t("COLOR")))]),o.showColorOption?n("div",{staticClass:"color_wrapper"},[n("div",{staticClass:"color_control yellow_control",on:{click:function(t){return o.changeCurrentColor(1)}}},[n("div",{staticClass:"color_circle"})]),n("div",{staticClass:"color_control white_control",on:{click:function(t){return o.changeCurrentColor(0)}}},[n("div",{staticClass:"color_circle"})])]):o._e()]):o._e()]):o._e()])]),o.saveNmaeWindow?n("div",{staticClass:"save_name_module_bg"}):o._e(),o.saveNmaeWindow?n("div",{staticClass:"save_name_module"},[n("div",{staticClass:"save_name_title"},[o._v(o._s(o.$t("NAME")))]),n("div",{staticClass:"save_name_tip"},[o._v(o._s(o.$t("NAME_MODEL")))]),n("input",{attrs:{type:"text",placeholder:"$t('ENTER_MODEL_NAME')",maxlength:"14",id:"save_name",oninput:"saveModuleName(this,'oninput')",onblur:"saveModuleName(this,'onblur')",onFocus:"saveModuleName(this,'onFocus')",onkeyup:"this.value=this.value.replace(/[^\\a-\\z\\A-\\Z0-9\\u4E00-\\u9FA5]/g ,'')",blur:"saveModuleName(this,'blur')"},domProps:{value:this.getTimeStr()}}),n("div",{staticClass:"save_name_verify"},[o._v(o._s(o.$t("ENTER_MODEL_NAME")))]),n("div",{staticClass:"btn_wrapper clearfix"},[n("img",{staticClass:"save_name_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_yes1.png"},on:{click:function(t){o.activeSave&&o.exportMoudle(0)}}}),n("img",{staticClass:"imgBtn save_name_cancle",attrs:{src:"/image/3dBuilder/3dPrinting/btn_close.png"},on:{click:function(t){return o.saveModuleShow(1)}}})])]):o._e(),o.notSaveNote?n("div",{staticClass:"save_ask_module_bg"}):o._e(),o.notSaveNote?n("div",{staticClass:"save_ask"},[n("div",{staticClass:"save_name_title"},[o._v(o._s(o.$t("NOTE")))]),n("div",{staticClass:"save_name_tip"},[o._v(" "+o._s(o.$t("SAVE_OR_NOT"))+" ")]),n("div",{staticClass:"btn_wrapper clearfix"},[n("img",{staticClass:"go_home_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_no.png"},on:{click:function(t){return o.goHomeSaveModule(0)}}}),n("img",{staticClass:"go_home_ok",attrs:{src:"/image/3dBuilder/3dPrinting/btn_yes.png"},on:{click:function(t){return o.goHomeSaveModule(1)}}}),n("img",{staticClass:"imgBtn save_name_cancle",attrs:{src:"/image/3dBuilder/3dPrinting/btn_close.png"},on:{click:function(t){return o.hideAskWindow()}}})])]):o._e(),o._m(5),o.showTextWindow?n("div",{staticClass:"text_window"},[n("div",{staticClass:"text_title"},[o._v(o._s(o.$t("GENERATE_TEXT")))]),n("input",{attrs:{type:"text",placeholder:"$t{'ENTER_TEXT'}",maxlength:"10",id:"textContent"},on:{input:o.textInputFn,blur:o.textInputFn}}),n("div",{staticClass:"btn_wrapper clearfix"},[n("div",{staticClass:"btns btn_ok text_ok",class:o.inputCanConfirm?"":"btn_disable",on:{click:function(t){o.inputCanConfirm&&o.insertWord()}}},[o._v(o._s(o.$t("CONFIRM"))+" ")]),n("div",{staticClass:"btns btn_cancle text_cancle",on:{click:function(t){return o.showInput(1)}}},[o._v(o._s(o.$t("CANCEL")))])])]):o._e(),o.controlType?n("div",{staticClass:"control_type",domProps:{textContent:o._s(o.statusTxt)}},[o._v(o._s(o.$t("CURRENT_STATUS"))+" "+o._s(o.$t("MOVE")))]):o._e(),o.showLoading?n("div",{class:o.showMore?"hideShowMore":"",attrs:{id:"loading_data"}},[n("img",{attrs:{src:"/image/3dBuilder/loading.gif",alt:""}}),n("div",{staticClass:"processingbar"},[n("div",{staticClass:"barwidth",style:{width:o.progressingBar+"%"}})])]):o._e()])},[function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"btn_child btn_home"},[e("i",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"btn_child btn_save_module"},[e("i",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"icon_wrapper"},[e("i",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"icon_wrapper"},[e("i",{staticClass:"iconfont"},[t._v("")])])},function(){var t=this.$createElement,t=this._self._c||t;return t("div",{staticClass:"icon_wrapper"},[t("i",{staticClass:"iconfont"},[this._v("")])])},function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{staticClass:"note"},[e("div",{staticClass:"select_module"},[t._v("选择一个模型，点击 箭头按 "),e("span",{staticClass:"red"},[t._v("X")]),t._v(","),e("span",{staticClass:"green"},[t._v("Y")]),t._v(","),e("span",{staticClass:"blue"},[t._v("Z")]),t._v("单向缩放,点击中心方块或 者双指，进行整体 缩放 ")])])}],!1,null,"7c8a8f6c",null);e.default=o.exports},"402b":function(t,e,s){"use strict";!function(B){s.d(e,"a",function(){return t}),s("99af"),s("c975"),s("45fc"),s("b0c0"),s("ac1f"),s("841c"),s("1276"),s("4c53");var $=s("5a89"),t=function(t,o){void 0===o&&(o=document),$.D.call(this),this.visible=!1,this.domElement=o;var n=new q;this.add(n);var i=new Q;this.add(i);var a=this;F("camera",t),F("object",void 0),F("enabled",!0),F("axis",null),F("mode","translate"),F("translationSnap",null),F("rotationSnap",null),F("scaleSnap",null),F("space","world"),F("size",1),F("dragging",!1),F("showX",!0),F("showY",!0),F("showZ",!0);var r={type:"change"},s={type:"mouseDown"},e={type:"mouseUp",mode:a.mode},l={type:"objectChange"},c=new $.K;function h(t,e,s){for(var o=e.intersectObject(t,!0),n=0;n<o.length;n++)if(o[n].object.visible||s)return o[n];return!1}var d=new $.W,u=new $.W,p=new $.J,m={X:new $.W(1,0,0),Y:new $.W(0,1,0),Z:new $.W(0,0,1)},v=new $.W,g=new $.W,b=new $.W,f=new $.W,w=new $.W,_=new $.W,C=0,S=new $.W,O=new $.J,E=new $.W,y=new $.W,j=new $.J,I=new $.J,M=new $.W,x=new $.W,T=new $.J,A=new $.W,P=new $.W,D=new $.J,H=new $.J,Z=new $.W,W=new $.W,N=new $.W,k=new $.J,z=new $.W;function F(e,t){var s=t;Object.defineProperty(a,e,{get:function(){return void 0!==s?s:t},set:function(t){s!==t&&(s=t,i[e]=t,n[e]=t,a.dispatchEvent({type:e+"-changed",value:t}),a.dispatchEvent(r))}}),a[e]=t,i[e]=t,n[e]=t}function L(t){if(a.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};var e=t.changedTouches?t.changedTouches[0]:t,s=o.getBoundingClientRect();return{x:(e.clientX-s.left)/s.width*2-1,y:-(e.clientY-s.top)/s.height*2+1,button:t.button}}function Y(t){if(a.enabled)switch(t.pointerType){case"mouse":case"pen":a.pointerHover(L(t))}}function R(t){a.enabled&&(a.domElement.style.touchAction="none",a.domElement.ownerDocument.addEventListener("pointermove",X,!1),a.pointerHover(L(t)),a.pointerDown(L(t)))}function X(t){a.enabled&&a.pointerMove(L(t))}function G(t){a.enabled&&(a.domElement.style.touchAction="",a.domElement.ownerDocument.removeEventListener("pointermove",X,!1),a.pointerUp(L(t)))}F("worldPosition",P),F("worldPositionStart",x),F("worldQuaternion",D),F("worldQuaternionStart",T),F("cameraPosition",S),F("cameraQuaternion",O),F("pointStart",v),F("pointEnd",g),F("rotationAxis",f),F("rotationAngle",C),F("eye",W),o.addEventListener("pointerdown",R,!1),o.addEventListener("pointermove",Y,!1),a.domElement.ownerDocument.addEventListener("pointerup",G,!1),this.dispose=function(){o.removeEventListener("pointerdown",R),o.removeEventListener("pointermove",Y),a.domElement.ownerDocument.removeEventListener("pointermove",X),a.domElement.ownerDocument.removeEventListener("pointerup",G),this.traverse(function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()})},this.attach=function(t){var e=B(".active_control").length;return t&&"plane"!=t.name?(this.object=t,this.visible=!0,window.focusedTransformObj=t,window.deleteObjFlag=!1,B(".color_control_wrapper").show(),B(".active_control").removeClass("active_control"),setTimeout(function(){switch(a.mode){case"scale":B(".size_control").addClass("active_control");break;case"translate":B(".trans_control").addClass("active_control");break;case"rotate":B(".rotate_control").addClass("active_control")}},0)):window.focusedTransformObj&&0<e?(this.object=window.focusedTransformObj,this.visible=!0):B(".color_control_wrapper").hide(),this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent||this.object.parent.matrixWorld.decompose(y,j,M),this.object.matrixWorld.decompose(P,D,Z),I.copy(j).invert(),H.copy(D).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(S,O,E),W.copy(S).sub(P).normalize(),$.D.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(t){void 0!==this.object&&!0!==this.dragging&&(c.setFromCamera(t,this.camera),t=h(n.picker[this.mode],c),this.axis=t?t.object.name:null)},this.pointerDown=function(t){var e;void 0!==this.object&&!0!==this.dragging&&0===t.button&&null!==this.axis&&(c.setFromCamera(t,this.camera),(e=h(i,c,!0))&&(t=this.space,"scale"===this.mode?t="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(t="world"),"local"===t&&"rotate"===this.mode&&(t=this.rotationSnap,"X"===this.axis&&t&&(this.object.rotation.x=Math.round(this.object.rotation.x/t)*t),"Y"===this.axis&&t&&(this.object.rotation.y=Math.round(this.object.rotation.y/t)*t),"Z"===this.axis&&t&&(this.object.rotation.z=Math.round(this.object.rotation.z/t)*t)),this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),N.copy(this.object.position),k.copy(this.object.quaternion),z.copy(this.object.scale),this.object.matrixWorld.decompose(x,T,A),v.copy(e.point).sub(x)),this.dragging=!0,s.mode=this.mode,this.dispatchEvent(s))},this.pointerMove=function(t){var e=this.axis,s=this.mode,o=this.object,n=this.space;"scale"===s?n="local":"E"!==e&&"XYZE"!==e&&"XYZ"!==e||(n="world"),void 0!==o&&null!==e&&!1!==this.dragging&&-1===t.button&&(c.setFromCamera(t,this.camera),(t=h(i,c,!0))&&(g.copy(t.point).sub(x),"translate"===s?(b.copy(g).sub(v),"local"===n&&"XYZ"!==e&&b.applyQuaternion(H),-1===e.indexOf("X")&&(b.x=0),-1===e.indexOf("Y")&&(b.y=0),-1===e.indexOf("Z")&&(b.z=0),("local"===n&&"XYZ"!==e?b.applyQuaternion(k):b.applyQuaternion(I)).divide(M),o.position.copy(b).add(N),this.translationSnap&&("local"===n&&(o.position.applyQuaternion(p.copy(k).invert()),-1!==e.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(k)),"world"===n&&(o.parent&&o.position.add(d.setFromMatrixPosition(o.parent.matrixWorld)),-1!==e.search("X")&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(d.setFromMatrixPosition(o.parent.matrixWorld))))):"scale"===s?(-1!==e.search("XYZ")?(t=g.length()/v.length(),g.dot(v)<0&&(t*=-1),u.set(t,t,t)):(d.copy(v),u.copy(g),d.applyQuaternion(H),u.applyQuaternion(H),u.divide(d),-1===e.search("X")&&(u.x=1),-1===e.search("Y")&&(u.y=1),-1===e.search("Z")&&(u.z=1)),o.scale.copy(z).multiply(u),this.scaleSnap&&(-1!==e.search("X")&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))):"rotate"===s&&(b.copy(g).sub(v),s=20/P.distanceTo(d.setFromMatrixPosition(this.camera.matrixWorld)),"E"===e?(f.copy(W),C=g.angleTo(v),w.copy(v).normalize(),_.copy(g).normalize(),C*=_.cross(w).dot(W)<0?1:-1):"XYZE"===e?(f.copy(b).cross(W).normalize(),C=b.dot(d.copy(f).cross(this.eye))*s):"X"!==e&&"Y"!==e&&"Z"!==e||(f.copy(m[e]),d.copy(m[e]),"local"===n&&d.applyQuaternion(D),C=b.dot(d.cross(W).normalize())*s),this.rotationSnap&&(C=Math.round(C/this.rotationSnap)*this.rotationSnap),this.rotationAngle=C,"local"===n&&"E"!==e&&"XYZE"!==e?(o.quaternion.copy(k),o.quaternion.multiply(p.setFromAxisAngle(f,C)).normalize()):(f.applyQuaternion(I),o.quaternion.copy(p.setFromAxisAngle(f,C)),o.quaternion.multiply(k).normalize())),this.dispatchEvent(r),this.dispatchEvent(l)))},this.pointerUp=function(t){0===t.button&&(this.dragging&&null!==this.axis&&(e.mode=this.mode,this.dispatchEvent(e)),this.dragging=!1,this.axis=null)},this.getMode=function(){return a.mode},this.setMode=function(t){a.mode=t},this.setTranslationSnap=function(t){a.translationSnap=t},this.setRotationSnap=function(t){a.rotationSnap=t},this.setScaleSnap=function(t){a.scaleSnap=t},this.setSize=function(t){a.size=t},this.setSpace=function(t){a.space=t},this.update=function(){}};t.prototype=Object.assign(Object.create($.D.prototype),{constructor:t,isTransformControls:!0});var q=function(){$.D.call(this),this.type="TransformControlsGizmo";var t=new $.A({depthTest:!1,depthWrite:!1,transparent:!0,side:$.i,fog:!1,toneMapped:!1}),e=new $.u({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),s=t.clone();s.opacity=.15;var o=t.clone();o.opacity=.33;var n=t.clone();n.color.set(16711680);var i=t.clone();i.color.set(65280);var a=t.clone();a.color.set(255);var r=t.clone();r.opacity=.25;var l=r.clone();l.color.set(16776960);var c=r.clone();c.color.set(65535);var h=r.clone();h.color.set(16711935),t.clone().color.set(16776960);var d=e.clone();d.color.set(16711680);var u=e.clone();u.color.set(65280);var p=e.clone();p.color.set(255);var m=e.clone();m.color.set(65535);var v=e.clone();v.color.set(16711935);var g=e.clone();g.color.set(16776960);var b=e.clone();b.color.set(7895160);var f=g.clone();f.opacity=.5;var w=new $.g(0,.1,.2,12,1,!1),_=new $.b(.2,.2,.2),t=new $.d;t.setAttribute("position",new $.p([0,0,0,1,0,0],3));var e=function(t,e){for(var s=new $.d,o=[],n=0;n<=64*e;++n)o.push(0,Math.cos(n/32*Math.PI)*t,Math.sin(n/32*Math.PI)*t);return s.setAttribute("position",new $.p(o,3)),s},m={X:[[new $.z(w,n),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new $.z(w,n),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new $.t(t,d)]],Y:[[new $.z(w,i),[0,1,0],null,null,"fwd"],[new $.z(w,i),[0,1,0],[Math.PI,0,0],null,"bwd"],[new $.t(t,u),null,[0,0,Math.PI/2]]],Z:[[new $.z(w,a),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new $.z(w,a),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new $.t(t,p),null,[0,-Math.PI/2,0]]],XYZ:[[new $.z(new $.E(.1,0),r.clone()),[0,0,0],[0,0,0]]],XY:[[new $.z(new $.I(.295,.295),l.clone()),[.15,.15,0]],[new $.t(t,g),[.18,.3,0],null,[.125,1,1]],[new $.t(t,g),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new $.z(new $.I(.295,.295),c.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new $.t(t,m),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new $.t(t,m),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new $.z(new $.I(.295,.295),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new $.t(t,v),[.18,0,.3],null,[.125,1,1]],[new $.t(t,v),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},h={X:[[new $.z(new $.g(.2,0,1,4,1,!1),s),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new $.z(new $.g(.2,0,1,4,1,!1),s),[0,.6,0]]],Z:[[new $.z(new $.g(.2,0,1,4,1,!1),s),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new $.z(new $.E(.2,0),s)]],XY:[[new $.z(new $.I(.4,.4),s),[.2,.2,0]]],YZ:[[new $.z(new $.I(.4,.4),s),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new $.z(new $.I(.4,.4),s),[.2,0,.2],[-Math.PI/2,0,0]]]},v={START:[[new $.z(new $.E(.01,2),o),null,null,null,"helper"]],END:[[new $.z(new $.E(.01,2),o),null,null,null,"helper"]],DELTA:[[new $.t(((v=new $.d).setAttribute("position",new $.p([0,0,0,1,1,1],3)),v),o),null,null,null,"helper"]],X:[[new $.t(t,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new $.t(t,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new $.t(t,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},f={X:[[new $.t(e(1,.5),d)],[new $.z(new $.E(.04,0),n),[0,0,.99],null,[1,3,1]]],Y:[[new $.t(e(1,.5),u),null,[0,0,-Math.PI/2]],[new $.z(new $.E(.04,0),i),[0,0,.99],null,[3,1,1]]],Z:[[new $.t(e(1,.5),p),null,[0,Math.PI/2,0]],[new $.z(new $.E(.04,0),a),[.99,0,0],null,[1,3,1]]],E:[[new $.t(e(1.25,1),f),null,[0,Math.PI/2,0]],[new $.z(new $.g(.03,0,.15,4,1,!1),f),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new $.z(new $.g(.03,0,.15,4,1,!1),f),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new $.z(new $.g(.03,0,.15,4,1,!1),f),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new $.z(new $.g(.03,0,.15,4,1,!1),f),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new $.t(e(1,1),b),null,[0,Math.PI/2,0]]]},e={AXIS:[[new $.t(t,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},b={X:[[new $.z(new $.T(1,.1,4,24),s),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new $.z(new $.T(1,.1,4,24),s),[0,0,0],[Math.PI/2,0,0]]],Z:[[new $.z(new $.T(1,.1,4,24),s),[0,0,0],[0,0,-Math.PI/2]]],E:[[new $.z(new $.T(1.25,.1,2,24),s)]],XYZE:[[new $.z(new $.P(.7,10,8),s)]]},p={X:[[new $.z(_,n),[.8,0,0],[0,0,-Math.PI/2]],[new $.t(t,d),null,null,[.8,1,1]]],Y:[[new $.z(_,i),[0,.8,0]],[new $.t(t,u),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new $.z(_,a),[0,0,.8],[Math.PI/2,0,0]],[new $.t(t,p),null,[0,-Math.PI/2,0],[.8,1,1]]]},s={X:[[new $.z(new $.g(.2,0,.8,4,1,!1),s),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new $.z(new $.g(.2,0,.8,4,1,!1),s),[0,.5,0]]],Z:[[new $.z(new $.g(.2,0,.8,4,1,!1),s),[0,0,.5],[Math.PI/2,0,0]]]},t={X:[[new $.t(t,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new $.t(t,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new $.t(t,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},o=function(t){var e,s=new $.D;for(e in t)for(var o=t[e].length;o--;){var n=t[e][o][0].clone(),i=t[e][o][1],a=t[e][o][2],r=t[e][o][3],l=t[e][o][4];n.name=e,n.tag=l,i&&n.position.set(i[0],i[1],i[2]),a&&n.rotation.set(a[0],a[1],a[2]),r&&n.scale.set(r[0],r[1],r[2]),n.updateMatrix();r=n.geometry.clone();r.applyMatrix4(n.matrix),n.geometry=r,n.renderOrder=1/0,n.position.set(0,0,0),n.rotation.set(0,0,0),n.scale.set(1,1,1),s.add(n)}return s},C=new $.W(0,0,0),S=new $.k,O=new $.W(0,1,0),E=new $.W(0,0,0),y=new $.y,j=new $.J,I=new $.J,M=new $.J,x=new $.W(1,0,0),T=new $.W(0,1,0),A=new $.W(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=o(m)),this.add(this.gizmo.rotate=o(f)),this.add(this.gizmo.scale=o(p)),this.add(this.picker.translate=o(h)),this.add(this.picker.rotate=o(b)),this.add(this.picker.scale=o(s)),this.add(this.helper.translate=o(v)),this.add(this.helper.rotate=o(e)),this.add(this.helper.scale=o(t)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var t=this.space,e="local"===(t="scale"===this.mode?"local":t)?this.worldQuaternion:M;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;for(var s=(s=(s=(s=[]).concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children),o=0;o<s.length;o++){var n,i=s[o];i.visible=!0,i.rotation.set(0,0,0),i.position.copy(this.worldPosition),n=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),i.scale.set(1,1,1).multiplyScalar(n*this.size/7),"helper"!==i.tag?(i.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode?("X"!==i.name&&"XYZX"!==i.name||.99<Math.abs(O.copy(x).applyQuaternion(e).dot(this.eye))&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Y"!==i.name&&"XYZY"!==i.name||.99<Math.abs(O.copy(T).applyQuaternion(e).dot(this.eye))&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Z"!==i.name&&"XYZZ"!==i.name||.99<Math.abs(O.copy(A).applyQuaternion(e).dot(this.eye))&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XY"===i.name&&Math.abs(O.copy(A).applyQuaternion(e).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"YZ"===i.name&&Math.abs(O.copy(x).applyQuaternion(e).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XZ"===i.name&&Math.abs(O.copy(T).applyQuaternion(e).dot(this.eye))<.2&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),-1!==i.name.search("X")&&(O.copy(x).applyQuaternion(e).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.x*=-1:"bwd"===i.tag&&(i.visible=!1)),-1!==i.name.search("Y")&&(O.copy(T).applyQuaternion(e).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.y*=-1:"bwd"===i.tag&&(i.visible=!1)),-1!==i.name.search("Z")&&(O.copy(A).applyQuaternion(e).dot(this.eye)<0?"fwd"===i.tag?i.visible=!1:i.scale.z*=-1:"bwd"===i.tag&&(i.visible=!1))):"rotate"===this.mode&&(I.copy(e),O.copy(this.eye).applyQuaternion(j.copy(e).invert()),-1!==i.name.search("E")&&i.quaternion.setFromRotationMatrix(y.lookAt(this.eye,E,T)),"X"===i.name&&(j.setFromAxisAngle(x,Math.atan2(-O.y,O.z)),j.multiplyQuaternions(I,j),i.quaternion.copy(j)),"Y"===i.name&&(j.setFromAxisAngle(T,Math.atan2(O.x,O.z)),j.multiplyQuaternions(I,j),i.quaternion.copy(j)),"Z"===i.name&&(j.setFromAxisAngle(A,Math.atan2(O.y,O.x)),j.multiplyQuaternions(I,j),i.quaternion.copy(j))),i.visible=i.visible&&(-1===i.name.indexOf("X")||this.showX),i.visible=i.visible&&(-1===i.name.indexOf("Y")||this.showY),i.visible=i.visible&&(-1===i.name.indexOf("Z")||this.showZ),i.visible=i.visible&&(-1===i.name.indexOf("E")||this.showX&&this.showY&&this.showZ),i.material._opacity=i.material._opacity||i.material.opacity,i.material._color=i.material._color||i.material.color.clone(),i.material.color.copy(i.material._color),i.material.opacity=i.material._opacity,this.enabled?this.axis&&(i.name===this.axis||this.axis.split("").some(function(t){return i.name===t})?i.material.opacity=1:i.material.opacity*=.25,i.material.color.lerp(new $.e(1,1,1),.5)):(i.material.opacity*=.5,i.material.color.lerp(new $.e(1,1,1),.5))):(i.visible=!1,"AXIS"===i.name?(i.position.copy(this.worldPositionStart),i.visible=!!this.axis,"X"===this.axis&&(j.setFromEuler(S.set(0,0,0)),i.quaternion.copy(e).multiply(j),.9<Math.abs(O.copy(x).applyQuaternion(e).dot(this.eye))&&(i.visible=!1)),"Y"===this.axis&&(j.setFromEuler(S.set(0,0,Math.PI/2)),i.quaternion.copy(e).multiply(j),.9<Math.abs(O.copy(T).applyQuaternion(e).dot(this.eye))&&(i.visible=!1)),"Z"===this.axis&&(j.setFromEuler(S.set(0,Math.PI/2,0)),i.quaternion.copy(e).multiply(j),.9<Math.abs(O.copy(A).applyQuaternion(e).dot(this.eye))&&(i.visible=!1)),"XYZE"===this.axis&&(j.setFromEuler(S.set(0,Math.PI/2,0)),O.copy(this.rotationAxis),i.quaternion.setFromRotationMatrix(y.lookAt(E,O,T)),i.quaternion.multiply(j),i.visible=this.dragging),"E"===this.axis&&(i.visible=!1)):"START"===i.name?(i.position.copy(this.worldPositionStart),i.visible=this.dragging):"END"===i.name?(i.position.copy(this.worldPosition),i.visible=this.dragging):"DELTA"===i.name?(i.position.copy(this.worldPositionStart),i.quaternion.copy(this.worldQuaternionStart),C.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),C.applyQuaternion(this.worldQuaternionStart.clone().invert()),i.scale.copy(C),i.visible=this.dragging):(i.quaternion.copy(e),this.dragging?i.position.copy(this.worldPositionStart):i.position.copy(this.worldPosition),this.axis&&(i.visible=-1!==this.axis.search(i.name))))}$.D.prototype.updateMatrixWorld.call(this)}};q.prototype=Object.assign(Object.create($.D.prototype),{constructor:q,isTransformControlsGizmo:!0});var Q=function(){$.z.call(this,new $.I(1e5,1e5,2,2),new $.A({visible:!1,wireframe:!0,side:$.i,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane";var e=new $.W(1,0,0),s=new $.W(0,1,0),o=new $.W(0,0,1),n=new $.W,i=new $.W,a=new $.W,r=new $.y,l=new $.J;this.updateMatrixWorld=function(){var t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),e.set(1,0,0).applyQuaternion("local"===t?this.worldQuaternion:l),s.set(0,1,0).applyQuaternion("local"===t?this.worldQuaternion:l),o.set(0,0,1).applyQuaternion("local"===t?this.worldQuaternion:l),a.copy(s),this.mode){case"translate":case"scale":switch(this.axis){case"X":a.copy(this.eye).cross(e),i.copy(e).cross(a);break;case"Y":a.copy(this.eye).cross(s),i.copy(s).cross(a);break;case"Z":a.copy(this.eye).cross(o),i.copy(o).cross(a);break;case"XY":i.copy(o);break;case"YZ":i.copy(e);break;case"XZ":a.copy(o),i.copy(s);break;case"XYZ":case"E":i.set(0,0,0)}break;default:i.set(0,0,0)}0===i.length()?this.quaternion.copy(this.cameraQuaternion):(r.lookAt(n.set(0,0,0),i,a),this.quaternion.setFromRotationMatrix(r)),$.D.prototype.updateMatrixWorld.call(this)}};Q.prototype=Object.assign(Object.create($.z.prototype),{constructor:Q,isTransformControlsPlane:!0})}.call(this,s("1157"))},5888:function(t,e,s){"use strict";s.d(e,"a",function(){return o}),s("ac1f"),s("5319");var p,m,v,s=s("5a89"),o=(p=new s.y,m={front:"rotateY(  0deg) translateZ(%SIZE)",right:"rotateY( 90deg) translateZ(%SIZE)",back:"rotateY(180deg) translateZ(%SIZE)",left:"rotateY(-90deg) translateZ(%SIZE)",top:"rotateX( 90deg) translateZ(%SIZE)",bottom:"rotateX(-90deg) translateZ(%SIZE)"},v={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0]},function t(n,e){var i="px",s=(n=n||80)/2;(e=e||{}).perspective=e.perspective||!1,e.defaultStyle=void 0===e.defaultStyle||e.defaultStyle,e.defaultStyle&&!t.cssElement&&(l=document.head||document.getElementsByTagName("head")[0],(c=document.createElement("style")).id="orientationControls",c.href=void 0,c.appendChild(document.createTextNode("\n        .orientationControls {\n            font-family: sans-serif;\n            position: absolute;\n            z-index: 1;\n            transform: scaleY(-1);\n            -webkit-touch-callout: none;\n            -webkit-user-select: none;\n            -khtml-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n        }\n        \n        .orientationControls > .box {\n            position: relative;\n            transform-style: preserve-3d;\n        }\n        \n        .orientationControls > .box > .face {\n            cursor: grab;\n            background-color: #dadee9;\n            position: absolute;\n            box-shadow: inset 0 0 0 2px #747883;\n            font-weight: bold;\n            color: #747883;\n            text-align: center;\n        }\n        \n        .orientationControls > .box > .face:hover {\n            background-color: #a8acba;\n        }\n        \n        .orientationControls > .box > .ring {\n\t\t\tpointer-events: none;\n            position: absolute;\n            border-radius: 100%;\n            box-shadow: inset 0 0 0 3px #747883, 0 0 0 10px #dadee92e;\n        }\n        .orientationControls > .box > .ring > div {\n            color: #747883;\n            position: absolute;\n            font-weight: bold;\n        }\n    ")),l.insertBefore(c,l.firstChild),t.cssElement=c);var o=document.createElement("div");o.className="orientationControls",o.style.width=n+i,o.style.height=n+i,o.style.left=n/2+i,o.style.top=n/2+i;var a=document.createElement("div");a.className="box",a.style.width=n+i,a.style.height=n+i,a.style.fontSize=n/6+i,o.appendChild(a);var r=document.createElement("div"),l=1.7320508075688772,c=n*l/2,h={n:"translateX("+c+"px) translateY(0px)",e:"translateX("+2*c+"px) translateY("+c+"px)",s:"translateX("+c+"px) translateY("+2*c+"px)",w:"translateX(0px) translateY("+c+"px)"};function d(t){var e=document.createElement("div"),s=t.toLowerCase(),o=n/6;e.id=s,e.textContent=t,e.style.transform=h[s],e.style.fontSize=o+i,e.style.left=-n/2/6-v[s][0]*o+i,e.style.top=-n/2/6-v[s][1]*o+i,r.appendChild(e)}function u(t){var e=document.createElement("div"),s=t.toLowerCase();switch(e.id=s,t){case"Front":e.textContent="前";break;case"Right":e.textContent="右";break;case"Back":e.textContent="后";break;case"Left":e.textContent="左";break;case"Top":e.textContent="上";break;case"Bottom":e.textContent="下"}return e.className=s+" face",e.style.width=n+i,e.style.height=n+i,e.style.transform=m[s].replace("%SIZE",n/2+i),e.style.lineHeight=n+i,a.appendChild(e),e}d("N"),d("E"),d("S"),d("W"),r.className="ring",r.style.transform="rotateX(90deg) translateZ("+-n/5+"px) translateX("+-n/3+"px)",r.style.width=n*l+i,r.style.height=n*l+i,a.appendChild(r),u("Front"),u("Right"),u("Back"),u("Left"),u("Top"),u("Bottom"),this.element=o,this.update=function(){p.copy(window.camera.matrixWorldInverse),p.elements[12]=s,p.elements[13]=s,p.elements[14]=0;var t,t="translate(-50%,-50%)matrix3d("+g((t=p.elements)[0])+","+g(t[1])+","+g(t[2])+","+g(t[3])+","+g(-t[4])+","+g(-t[5])+","+g(-t[6])+","+g(-t[7])+","+g(t[8])+","+g(t[9])+","+g(t[10])+","+g(t[11])+","+g(t[12])+","+g(t[13])+","+g(t[14])+","+g(t[15])+")";a.style.WebkitTransform=t,a.style.transform=t,o.style.perspective=(e.perspective&&window.camera.isPerspectiveCamera?Math.pow(n*n+n*n,.5)/Math.tan(window.camera.fov/2*Math.PI/180):0)+i}});function g(t){return Math.abs(t)<1e-10?0:t}},9451:function(t,e,s){},"97b3":function(t,e,s){"use strict";var o=s("9451");s.n(o).a},d162:function(t,e,s){},db12:function(t,i,c){"use strict";!function(r){c("99af"),c("7db0"),c("c975"),c("a434"),c("b0c0"),c("a9e3"),c("d3b7"),c("3ca3"),c("ddb0"),c("2b3d"),c("bf19"),c("96cf");var t=c("1da1"),a=(c("d162"),c("5a89")),e=c("4721"),l=c("518e"),o=c("8bc1"),s=c("402b"),n=c("5888");i.a={name:"ThreeDimensionalBuilder",data:function(){return{mobile:!1,WORK_SPACE_SIZE:200,CONTAIN_WIDTH:null,CONTAIN_HEIGHT:null,SHAPE_SIZE:20,LIMIT_SIZE:4,renderer:null,camera:null,cameraZoom:1,scene:null,plane:null,objects:[],shapesObj:[],gridHelper:null,gradGroundMesh:null,mouseHelper:null,mouseHelperMaterial:null,focusedTransformObj:null,deleteObjFlag:null,gradGroundMesh1:null,composer:null,renderPass:null,outlinePass:null,effectFXAA:null,controls:null,transformControl:null,container:null,orientationContr:null,controlsMoved:!1,shapesEventL:null,shapesMain:null,showMore:!0,showZoomOption:!1,showColorOption:!1,isWhite:!0,colorControl:!0,selectedDragObj:null,selectedDragObjFlag:null,dragObj:null,dragedFlag:null,maxW:null,maxH:null,movedDir:null,shapesList:[],cartoonStlList:[],shapesListShow:!0,cartoonStlShow:!1,controlBar:!1,redoActive:!1,undoActive:!1,stlGeoFlag:null,showTextWindow:!1,currentObj:null,textInput:"",textInput1:"",fontLoader:null,wordFont:null,wordColor:14540253,shootedFlag:!1,currentObjMesh:null,currentObjMaterial:null,currentModule:0,transformDragFlag:!1,twoPointTouchFlag:!1,mouse:null,raycaster:null,isShiftDown:!1,saveFlag:!1,activeSave:!1,saveNmaeWindow:!1,notSaveNote:!1,goHomeFlag:!1,allOperation:[],eachObjectInfo:{},eachRedoObjectInfo:{},redoOperation:[],selectedObjects:[],statusTxt:null,controlType:null,transformControlModeType:1,intersectsSelect:[],intersection:{intersects:!1,point:new a.W,normal:new a.W},tcScale:null,tcScaleYPosition:null,tcScaleY:null,tcScaleYPositionFlag:null,tcX:null,tcY:null,tcZ:null,showLoading:!1,progressingBar:0,inputCanConfirm:!1}},methods:{init:function(){var t=this;t.container=document.getElementById("container"),t.renderer=new a.X({antialias:!0,alpha:!0}),t.renderer.setPixelRatio(window.devicePixelRatio||1),t.renderer.setSize(t.CONTAIN_WIDTH,t.CONTAIN_HEIGHT),t.renderer.shadowMap.enabled=!0,t.renderer.autoClear=!1,t.renderer.setClearColor(0,0),t.container.appendChild(t.renderer.domElement),t.camera=new a.H(45,t.CONTAIN_WIDTH/t.CONTAIN_HEIGHT,1,1e4),t.camera.position.set(170,145,255),t.camera.lookAt(0,0,0),window.camera=t.camera,t.scene=new a.M;var e=new a.I(t.WORK_SPACE_SIZE,t.WORK_SPACE_SIZE);e.rotateX(-Math.PI/2),t.plane=new a.z(e,new a.A({color:15066335,visible:!0})),t.plane.name="plane",t.plane.receiveShadow=!0,t.plane.castShadow=!0,t.scene.add(t.plane),t.objects.push(t.plane),t.raycaster=new a.K,t.mouse=new a.V,t.grads();e=new a.a(6316128,1);t.scene.add(e);e=new a.h(16777215,1.3);e.position.set(1,.75,.5).normalize(),t.scene.add(e),t.orbitCont(),t.transformCont(),t.animate(),t.onWindowResize()},grads:function(){this.gridHelper=new a.s(this.WORK_SPACE_SIZE,20,10066329,211392921),this.gridHelper.name="GridHelper",this.scene.add(this.gridHelper),this.gradGroundMesh=new a.z(new a.b(this.WORK_SPACE_SIZE,.8,this.WORK_SPACE_SIZE),new a.B({color:16777215})),this.gradGroundMesh.position.y=-.8,this.gradGroundMesh.name="GridHelper",this.gradGroundMesh.receiveShadow=!0,this.gradGroundMesh.castShadow=!0,this.scene.add(this.gradGroundMesh),this.gradGroundMesh1=new a.z(new a.b(this.WORK_SPACE_SIZE,3,this.WORK_SPACE_SIZE),new a.B({color:16762985})),this.gradGroundMesh1.position.y=-2.5,this.gradGroundMesh1.name="GridHelper",this.gradGroundMesh1.receiveShadow=!0,this.gradGroundMesh1.castShadow=!0,this.scene.add(this.gradGroundMesh1)},outline:function(){this.composer=new a.EffectComposer(this.renderer);var t=new a.RenderPass(this.scene,this.camera);this.composer.addPass(t),this.outlinePass=new a.OutlinePass(new a.V(this.CONTAIN_WIDTH-100,this.CONTAIN_HEIGHT),this.scene,this.camera),this.outlinePass.edgeStrength=4,this.outlinePass.edgeThickness=1,this.outlinePass.visibleEdgeColor.set("#00ff00"),this.outlinePass.hiddenEdgeColor.set("#00ff00"),this.outlinePass.edgeGlow=1,this.composer.addPass(this.outlinePass),this.effectFXAA=new a.ShaderPass(a.FXAAShader),this.effectFXAA.uniforms.resolution.value.set(1/this.CONTAIN_WIDTH,1/this.CONTAIN_HEIGHT)},orbitCont:function(){var t=this;t.controls=new e.a(t.camera,t.renderer.domElement),t.controls.minDistance=10,t.controls.maxDistance=1300,t.controls.enableKeys=!0,t.controls.rotateSpeed=.3,t.controls.keys={LEFT:65,UP:87,RIGHT:68,BOTTOM:83},t.controls.enablePan=!1,t.controls.enableZoom=!0,t.controls.addEventListener("change",function(){t.controlsMoved=!0,1<t.objects.length&&t.camera.position.y<0?(t.clearCache(t.gridHelper),t.scene.remove(t.gridHelper),t.clearCache(t.gradGroundMesh),t.scene.remove(t.gradGroundMesh),t.clearCache(t.gradGroundMesh1),t.scene.remove(t.gradGroundMesh1)):(t.clearCache(t.gridHelper),t.scene.remove(t.gridHelper),t.clearCache(t.gradGroundMesh),t.scene.remove(t.gradGroundMesh),t.clearCache(t.gradGroundMesh1),t.scene.remove(t.gradGroundMesh1),t.scene.add(t.gridHelper),t.scene.add(t.gradGroundMesh),t.scene.add(t.gradGroundMesh1))})},transformCont:function(){var e=this;e.transformControl=new s.a(this.camera,this.renderer.domElement),e.transformControl.name="transformControl",e.transformControl.size=1.5,e.scene.add(e.transformControl),e.transformControl.addEventListener("dragging-changed",function(t){e.controls&&(e.controls.enabled=!t.value,e.transformDragFlag=!t.value)},!1),e.transformControl.addEventListener("change",function(){e.shootedFlag&&e.shapesController(0),e.showCurrentColor(),e.onAnimationStep()},!1),e.transformControl.addEventListener("mouseDown",function(){e.transformControlMove=!1,e.checkScalePosition(e.transformControl.object)},!1),e.transformControl.addEventListener("objectChange",function(){e.transformControlMove=!0},!1),e.transformControl.addEventListener("mouseUp",function(){e.transformControlMove&&e.allOperationAdd(),e.showCurrentColor(),window.focusedTransformObj&&(e.transformControl.object=window.focusedTransformObj)},!1)},containerListenner:function(){this.showColorOption=!1,this.showZoomOption=!1,this.onDocumentMouseDown(event)},containerMouseDown:function(){var t=this;t.controlsMoved=!1,t.showColorOption=!1,t.showZoomOption=!1,t.controls.enabled=t.transformDragFlag,t.twoPointTouchFlag=!1,t.touchScale=""},containerMouseMove:function(){},containerMouseUp:function(){this.transformControl.object&&(window.focusedTransformObj=this.transformControl.object),this.controlsMoved||this.transformControlMove||setTimeout(function(){this.onDocumentMouseDown(event)},100),this.tcScaleYPosition="",this.tcScaleYPositionFlag="",this.tcScaleY="",this.tcX="",this.tcY="",this.tcZ="",this.transformControlMove=!1},orientationCont:function(){var e=this;e.orientationContr=new n.a(50),document.body.appendChild(e.orientationContr.element),e.orientationContr.element.addEventListener("click",function(t){switch(t.target.id){case"front":e.camera.position.set(0,0,300);break;case"back":e.camera.position.set(0,0,-300);break;case"top":e.camera.position.set(0,300,0);break;case"bottom":e.camera.position.set(0,-300,0);break;case"left":e.camera.position.set(-300,0,0);break;case"right":e.camera.position.set(300,0,0)}e.camera.lookAt(e.scene.position),e.camera.updateProjectionMatrix()})},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},onWindowResize:function(){this.showMore?(this.camera.aspect=(this.CONTAIN_WIDTH-100)/this.CONTAIN_HEIGHT,this.renderer.setSize(this.CONTAIN_WIDTH-100,this.CONTAIN_HEIGHT)):(this.camera.aspect=this.CONTAIN_WIDTH/this.CONTAIN_HEIGHT,this.renderer.setSize(this.CONTAIN_WIDTH,this.CONTAIN_HEIGHT)),this.camera.updateProjectionMatrix()},clearCache:function(t){t.geometry.dispose(),t.material.dispose()},render:function(){this.renderer.render(this.scene,this.camera)},listModule:function(){this.$ajax.get("/mock/moduleList.json").then(this.listModuleSucc).catch(function(t){})},listModuleSucc:function(t){t&&t.data&&(this.shapesList=t.data.data.shapes,this.cartoonStlList=t.data.data.stl)},showModule:function(t){0==t?(this.shapesListShow=!0,this.cartoonStlShow=!1):1==t&&(this.shapesListShow=!1,this.cartoonStlShow=!0)},hideModule:function(){this.shapesListShow=!1,this.cartoonStlShow=!1},showMoreFn:function(){this.showMore?(this.showMore=!1,r(".orientationControls").addClass("right_menu_hide")):(this.showMore=!0,r(".orientationControls").removeClass("right_menu_hide")),this.onWindowResize()},dropOffListerner:function(){var n=this;n.shapesMain.addEventListener("touchstart",function(){n.showColorOption=!1,n.showColorOption=!1}),n.shapesEventL.addEventListener("touchstart",function(t){n.showColorOption=!1,n.showColorOption=!1,n.selectedDragObj=r(t.target),n.selectedDragObj.hasClass("drag")&&(r(".active_shape").removeClass("active_shape"),n.selectedDragObj.hasClass("name")?(n.dragObj=r(n.selectedDragObj).parents(".module").find(".sprint").clone(),r(n.selectedDragObj).parents(".module").addClass("active_shape"),n.selectedDragObjFlag=!0):n.selectedDragObj.hasClass("sprint")?(n.dragObj=n.selectedDragObj.clone(),r(n.selectedDragObj).parents(".module").addClass("active_shape"),n.selectedDragObjFlag=!0):n.selectedDragObj.hasClass("module")&&(n.dragObj=r(n.selectedDragObj).find(".sprint").clone(),r(n.selectedDragObj).addClass("active_shape"),n.selectedDragObjFlag=!1),n.dragObj.addClass("startDrag"),n.maxW=r(".builder .main_wrapper").width()-n.selectedDragObj[0].offsetWidth,n.maxH=r(".builder .main_wrapper").height()-n.selectedDragObj[0].offsetHeight)},!1),n.shapesEventL.addEventListener("touchmove",function(t){n.dragedFlag=!0;var e=(t||window.event).targetTouches[0],t=window.innerWidth;n.movedDir=t-e.clientX,n.dragObj&&100<n.movedDir&&(r("body").append(n.dragObj),t=e.clientX-50,e=e.clientY-50,t<0?t=0:t>=n.maxW&&(t=n.maxW),e<0||e>=n.maxH&&(e=n.maxH),n.dragObj[0].style.left=t+25+"px",n.dragObj[0].style.top=e+"px")},!1),n.shapesEventL.addEventListener("touchend",function(t){var e,s,o;n.dragObj&&n.dragedFlag&&100<n.movedDir?(n.selectedDragObjFlag?(e=Number(r(n.selectedDragObj).parents(".module").find(".this_code").val()),s=Number(r(n.selectedDragObj).parents(".module").find(".this_module").val()),o=Number(r(n.selectedDragObj).parents(".module").find(".this_url").val())):0==n.selectedDragObjFlag&&(e=Number(r(n.selectedDragObj).find(".this_code").val()),s=Number(r(n.selectedDragObj).find(".this_module").val()),o=Number(r(n.selectedDragObj).find(".this_url").val())),0==s?n.changeShapes(e):1==s?n.loadSTL(e):2==s?n.showInput(0):3==s&&n.loadLocalSTL(o),r(n.dragObj).remove(),setTimeout(function(){n.onDocumentMouseDown(t)},100)):r(n.dragObj).remove(),n.dragedFlag=!1,r(".active_shape").removeClass("active_shape")},!1),n.shapesMain.addEventListener("mousedown",function(){n.showColorOption=!1,n.showColorOption=!1}),n.shapesEventL.addEventListener("mousedown",function(t){n.showColorOption=!1,n.showColorOption=!1,n.selectedDragObj=r(t.target),n.selectedDragObj.hasClass("drag")&&(r(".active_shape").removeClass("active_shape"),n.selectedDragObj.hasClass("name")?(n.dragObj=r(n.selectedDragObj).parents(".module").find(".sprint").clone(),r(n.selectedDragObj).parents(".module").addClass("active_shape"),n.selectedDragObjFlag=!0):n.selectedDragObj.hasClass("sprint")?(n.dragObj=n.selectedDragObj.clone(),r(n.selectedDragObj).parents(".module").addClass("active_shape"),n.selectedDragObjFlag=!0):n.selectedDragObj.hasClass("module")&&(n.dragObj=r(n.selectedDragObj).find(".sprint").clone(),r(n.selectedDragObj).addClass("active_shape"),n.selectedDragObjFlag=!1),n.dragObj.addClass("startDrag"),n.maxW=r(".builder .main_wrapper").width()-n.selectedDragObj[0].offsetWidth,n.maxH=r(".builder .main_wrapper").height()-n.selectedDragObj[0].offsetHeight)},!1),n.shapesEventL.addEventListener("mousemove",function(t){n.dragedFlag=!0;var e=(t||window.event).targetTouches[0],t=window.innerWidth;n.movedDir=t-e.clientX,n.dragObj&&100<n.movedDir&&(r("body").append(n.dragObj),t=e.clientX-50,e=e.clientY-50,t<0?t=0:t>=n.maxW&&(t=n.maxW),e<0||e>=n.maxH&&(e=n.maxH),n.dragObj[0].style.left=t+25+"px",n.dragObj[0].style.top=e+"px")},!1),n.shapesEventL.addEventListener("mouseup",function(t){var e,s,o;n.dragObj&&n.dragedFlag&&100<n.movedDir?(n.selectedDragObjFlag?(e=Number(r(n.selectedDragObj).parents(".module").find(".this_code").val()),s=Number(r(n.selectedDragObj).parents(".module").find(".this_module").val()),o=Number(r(n.selectedDragObj).parents(".module").find(".this_url").val())):0==n.selectedDragObjFlag&&(e=Number(r(n.selectedDragObj).find(".this_code").val()),s=Number(r(n.selectedDragObj).find(".this_module").val()),o=Number(r(n.selectedDragObj).find(".this_url").val())),0==s?n.changeShapes(e):1==s?n.loadSTL(e):2==s?n.showInput(0):3==s&&n.loadLocalSTL(o),r(n.dragObj).remove(),setTimeout(function(){n.onDocumentMouseDown(t)},100)):r(n.dragObj).remove(),n.dragedFlag=!1,r(".active_shape").removeClass("active_shape")},!1)},dragImg:function(t){var e=this;e.showColorOption=!1,e.showColorOption=!1,e.selectedDragObj=r(t.target),e.selectedDragObj.hasClass("drag")&&(r(".active_shape").removeClass("active_shape"),e.selectedDragObj.hasClass("name")?(e.dragObj=r(e.selectedDragObj).parents(".module").find(".sprint").clone(),r(e.selectedDragObj).parents(".module").addClass("active_shape"),e.selectedDragObjFlag=!0):e.selectedDragObj.hasClass("sprint")?(e.dragObj=e.selectedDragObj.clone(),r(e.selectedDragObj).parents(".module").addClass("active_shape"),e.selectedDragObjFlag=!0):e.selectedDragObj.hasClass("module")&&(e.dragObj=r(e.selectedDragObj).find(".sprint").clone(),r(e.selectedDragObj).addClass("active_shape"),e.selectedDragObjFlag=!1),e.dragObj.addClass("startDrag"),e.maxW=r(".builder .main_wrapper").width()-e.selectedDragObj[0].offsetWidth,e.maxH=r(".builder .main_wrapper").height()-e.selectedDragObj[0].offsetHeight)},moveImg:function(t){var e=this;e.dragedFlag=!0;var s=t||window.event,t=e.CONTAIN_WIDTH;e.movedDir=t-s.clientX,e.dragObj&&e.movedDir<100&&(r("body").append(e.dragObj),t=s.clientX-50,s=s.clientY-50,t<0?t=0:t>=e.maxW&&(t=e.maxW),s<0||s>=e.maxH&&(s=e.maxH),e.dragObj[0].style.left=t+25+"px",e.dragObj[0].style.top=s+"px")},upImg:function(t){var e,s,o,n=this;n.dragObj&&n.dragedFlag&&100<n.movedDir?(n.selectedDragObjFlag?(e=Number(r(n.selectedDragObj).parents(".module").find(".this_code").val()),s=Number(r(n.selectedDragObj).parents(".module").find(".this_module").val()),o=Number(r(n.selectedDragObj).parents(".module").find(".this_url").val())):0==n.selectedDragObjFlag&&(e=Number(r(n.selectedDragObj).find(".this_code").val()),s=Number(r(n.selectedDragObj).find(".this_module").val()),o=Number(r(n.selectedDragObj).find(".this_url").val())),0==s?n.changeShapes(e):1==s?n.loadSTL(e):2==s?n.showInput(0):3==s&&n.loadLocalSTL(o),r(n.dragObj).remove(),setTimeout(function(){n.onDocumentMouseDown(t)},100)):r(n.dragObj).remove(),n.dragedFlag=!1,r(".active_shape").removeClass("active_shape")},selectModule:function(t,e,s,o){var n;0==t&&"text"==o?t=2:0==t&&"stl"==o&&(t=1),r(".active_shape").removeClass("active_shape"),0==t?(n=r(".normal_wrapper").find(".module:eq("+s+")"),this.stlGeoFlag=0,this.changeShapes(e)):1==t?(n=r(".cartoon_wrapper").find(".module:eq("+s+")"),this.stlGeoFlag=1,this.loadSTL(e,n)):2==t&&(n=r(".normal_wrapper").find(".module:eq("+s+")"),this.stlGeoFlag=1,this.showInput(0)),n.addClass("active_shape")},showChild:function(t){1==t?this.showColorOption=!0:0==t&&(this.showZoomOption=!0)},zoomView:function(t){this.cameraZoom&&(this.cameraZoom=t/100,this.camera.zoom=this.cameraZoom,this.camera.lookAt(this.scene.position),this.camera.updateProjectionMatrix())},changeShapes:function(t){switch(this.stlGeoFlag=0,this.showInput(1),this.currentModule=0,this.shootedFlag=!1,t){case 0:this.currentObj=new a.b(this.SHAPE_SIZE,this.SHAPE_SIZE,this.SHAPE_SIZE);break;case 1:this.currentObj=new a.g(this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,32);break;case 2:this.currentObj=new a.f(this.SHAPE_SIZE/2,this.SHAPE_SIZE,32);break;case 3:this.currentObj=new a.P(this.SHAPE_SIZE/2,32,32);break;case 4:this.currentObj=new a.U(10,2.5,16,100);break;case 5:this.currentObj=new a.g(this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,5);break;case 6:this.currentObj=new a.f(this.SHAPE_SIZE/2,this.SHAPE_SIZE,4);break;case 7:var e=this.SHAPE_SIZE/2,s=this.SHAPE_SIZE/3,o=this.SHAPE_SIZE,n=new a.O;n.moveTo(2*e,e),n.absarc(e,e,e,0,2*Math.PI,!1);var i=new a.G;i.moveTo(e+s,e),i.absarc(e,e,s,0,2*Math.PI,!0),n.holes.push(i);o=new a.m(n,{amount:o,bevelEnabled:!1,steps:1,curveSegments:60});o.center(),o.rotateX(-.5*Math.PI),this.currentObj=o;break;case 8:this.currentObj=new a.g(this.SHAPE_SIZE/2,this.SHAPE_SIZE/2,this.SHAPE_SIZE,3);break;default:this.currentObj=new a.b(this.SHAPE_SIZE,this.SHAPE_SIZE,this.SHAPE_SIZE)}this.currentObjMesh=new a.z(this.currentObj,this.currentObjMaterial)},showInput:function(t){0===t?(this.currentObj=null,this.showTextWindow=!0):(this.showTextWindow=!1,this.inputCanConfirm=!1,this.textInput="")},textInputFn:function(t){t=t.target;this.textInput=r(t).val();t=r(t).val().length;this.inputCanConfirm=0<t},insertWord:function(){var e=this;e.showLoading=!0,e.showInput(1),this.fontLoader.load("/font/SimHei_Regular.json",function(t){e.wordFont=t,e.createText(),e.showLoading=!1},function(t){e.progressingBar=t.loaded/t.total*100},function(t){})},createText:function(){var t,e=this,s=this.textInput1;switch(s.length){case 3:t=50;break;case 4:t=45;break;case 5:t=40;break;case 6:t=35;break;case 7:t=30;break;default:t=20}var o=new a.S(s,{font:e.wordFont,size:t,height:10,curveSegments:22,bevelEnabled:!1});o.computeBoundingBox(),o.computeVertexNormals();s=(new a.d).fromGeometry(o);s.computeBoundingBox(),o=-.5*(s.boundingBox.max.x-s.boundingBox.min.x),s.translate(o,-25,0),s.rotateX(-Math.PI/2);var o=new a.C({color:e.wordColor,flatShading:!0});(o=new a.z(s,o)).name="shapes",o.receiveShadow=!0,o.castShadow=!0,e.scene.add(o),e.objects.push(o),e.shapesObj.push(o),this.undoActive=!0,e.activeSave=!0,e.transformControl.object=o,e.focusedTransformObj=e.transformControl.object,e.cleanSelectedObject(o),e.createObjForOperation(o,"add"),e.eachObjSetps(o,0),e.shapesController(),e.transformControl.attach(e.focusedTransformObj),e.resetSomeThing()},loadSTL:function(n,i){var a=this;return Object(t.a)(regeneratorRuntime.mark(function t(){var e,s,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(e=a).showInput(1),r(".active_shape").removeClass("active_shape"),r(i).addClass("active_shape"),e.currentModule=0,e.showLoading=!0,e.shootedFlag=!1,t.t0=n,t.next=0===t.t0?10:1===t.t0?12:2===t.t0?14:3===t.t0?16:4===t.t0?18:5===t.t0?20:6===t.t0?22:7===t.t0?24:8===t.t0?26:9===t.t0?28:10===t.t0?30:11===t.t0?32:34;break;case 10:return s="/models/stl/ascii/standing.stl",t.abrupt("break",35);case 12:return s="/models/stl/ascii/climbing.stl",t.abrupt("break",35);case 14:return s="/models/stl/ascii/lying.stl",t.abrupt("break",35);case 16:return s="/models/stl/ascii/sitting.stl",t.abrupt("break",35);case 18:return s="/models/stl/ascii/tyrannosaurusRex.stl",t.abrupt("break",35);case 20:return s="/models/stl/ascii/pokemon/bulbasaur_starter_1gen_flowalistik.stl",t.abrupt("break",35);case 22:return s="/models/stl/ascii/pokemon/charmander_starter_1gen_flowalistik.stl",t.abrupt("break",35);case 24:return s="/models/stl/ascii/pokemon/chikorita_starter_2gen_flowalistik.stl",t.abrupt("break",35);case 26:return s="/models/stl/ascii/pokemon/pikachu_1gen_flowalistik.stl",t.abrupt("break",35);case 28:return s="/models/stl/ascii/pokemon/squirtle_starter_1gen_flowalistik.stl",t.abrupt("break",35);case 30:return s="/models/stl/ascii/pokemon/totodile_starter_2gen_flowalistik.stl",t.abrupt("break",35);case 32:return s="/models/stl/ascii/five-point-star.stl",t.abrupt("break",35);case 34:s="/models/stl/ascii/tyrannosaurusRex.stl";case 35:return o=new l.a,t.next=38,o.load(s,function(t){e.currentObj=t,e.showLoading=!1},function(t){e.progressingBar=t.loaded/t.total*100});case 38:case"end":return t.stop()}},t)}))()},onDocumentMouseDown:function(){var t,e;this.shootedFlag?this.checkIntersection(event):(event.preventDefault(),t=null,this.showMore?"touchend"==event.type?(t=event.changedTouches[0],this.mouse.set(t.clientX/(this.CONTAIN_WIDTH-100)*2-1,-t.clientY/this.CONTAIN_HEIGHT*2+1)):this.mouse.set(event.clientX/(this.CONTAIN_WIDTH-100)*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1):"touchend"==event.type?(t=event.changedTouches[0],this.mouse.set(t.clientX/this.CONTAIN_WIDTH*2-1,-t.clientY/this.CONTAIN_HEIGHT*2+1)):this.mouse.set(event.clientX/this.CONTAIN_WIDTH*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1),this.raycaster.setFromCamera(this.mouse,this.camera),0<(e=this.raycaster.intersectObjects(this.objects)).length&&(t=e[0],this.isShiftDown?t.object!==this.plane&&(this.scene.remove(t.object),this.objects.splice(this.objects.indexOf(t.object),1)):this.currentObj&&(e=this.currentObjMaterial.clone(),(e=new a.z(this.currentObj,e)).position.copy(t.point).add(t.face.normal),0==this.stlGeoFlag?(e.position.divideScalar(this.SHAPE_SIZE).floor().multiplyScalar(this.SHAPE_SIZE).addScalar(this.SHAPE_SIZE/2),e.name="shapes"):1==this.stlGeoFlag?(e.position.divideScalar(50).floor().multiplyScalar(50).addScalar(25),e.name="stl"):2==this.stlGeoFlag&&(e.position.divideScalar(50).floor().multiplyScalar(50),e.name="stlLocal",e.rotation.set(-Math.PI/2,0,0)),e.receiveShadow=!0,e.castShadow=!0,this.scene.add(e),this.objects.push(e),this.shapesObj.push(e),this.undoActive=!0,this.activeSave=!0,this.createObjForOperation(e,"add"),this.eachObjSetps(e,0),this.shapesController(),this.transformControl.object=e,this.transformControl.attach(this.transformControl.object),this.cleanSelectedObject(e),this.showCurrentColor(),this.resetSomeThing()),this.shootedFlag=!0,this.render()))},onDocumentMouseMove:function(){event.preventDefault(),this.mouse.set(event.clientX/this.CONTAIN_WIDTH*2-1,-event.clientY/this.CONTAIN_HEIGHT*2+1),this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.objects);0<t.length&&(t=t[0],this.mouseHelper.position.copy(t.point).add(t.face.normal),this.mouseHelper.position.divideScalar(this.SHAPE_SIZE).floor().multiplyScalar(this.SHAPE_SIZE).addScalar(this.SHAPE_SIZE/2)),this.render()},createObjForOperation:function(t,e){window.deleteObjFlag=!1,this.saveFlag=!1,5<=this.allOperation.length&&this.allOperation.shift();var s={};s.uuid=t.uuid,s.position=t.position.clone(),s.rotation=t.rotation.clone(),s.quaternion=t.quaternion.clone(),s.scale=t.scale.clone(),s.color=t.material.color.clone(),s.operation=e,s.mesh=t,this.allOperation.push(s)},eachObjSetps:function(t,e){var s={};0===e?(this.eachObjectInfo[t.uuid]||(this.eachObjectInfo[t.uuid]=[]),s.uuid=t.uuid,s.position=t.position.clone(),s.rotation=t.rotation.clone(),s.quaternion=t.quaternion.clone(),s.scale=t.scale.clone(),s.color=t.material.color.clone(),s.mesh=t,s.time=Date.parse(new Date),this.eachObjectInfo[t.uuid].length?s.index=this.eachObjectInfo[t.uuid].length:s.index=0,this.eachObjectInfo[t.uuid].push(s)):2===e?(this.eachObjectInfo[t.uuid]||(this.eachObjectInfo[t.uuid]=[]),s.uuid=t.uuid,s.position=t.position.clone(),s.rotation=t.rotation.clone(),s.quaternion=t.quaternion.clone(),s.scale=t.scale.clone(),s.color=t.color.clone(),s.mesh=t.mesh,s.time=Date.parse(new Date),this.eachObjectInfo[t.uuid].length?s.index=this.eachObjectInfo[t.uuid].length:s.index=0,this.eachObjectInfo[t.uuid].push(s)):1===e&&(this.eachRedoObjectInfo[t.uuid]||(this.eachRedoObjectInfo[t.uuid]=[]),s.uuid=t.uuid,s.position=t.position.clone(),s.rotation=t.rotation.clone(),s.quaternion=t.quaternion.clone(),s.scale=t.scale.clone(),s.color=t.color.clone(),s.mesh=t.mesh,s.time=Date.parse(new Date),this.eachRedoObjectInfo[t.uuid].push(s))},shapesController:function(){this.showMore&&r(".obj_control").css({width:this.CONTAIN_WIDTH-100}),this.controlBar=!0},addSelectedObject:function(t){this.selectedObjects=[],this.selectedObjects.push(t)},cleanSelectedObject:function(t){t&&this.addSelectedObject(t)},showCurrentColor:function(){if(this.isWhite=!1,this.transformControl.object){var t=this.transformControl.object.material.color.toJSON();switch(this.isWhite="14540253"==t,this.cleanSelectedObject(this.transformControl.object),this.transformControlModeType){case 0:this.statusTxt=this.textSC;break;case 1:this.statusTxt=this.textTR;break;case 2:this.statusTxt=this.textRO}this.controlType=!0}else this.controlType=!1},resetSomeThing:function(){r(".active_shape").removeClass("active_shape"),this.currentObjMaterial=new a.B({color:14540253})},checkIntersection:function(t){var e,s,t=t.changedTouches?(e=t.changedTouches[0].pageX,t.changedTouches[0].pageY):(e=t.clientX,t.clientY);this.mouse.x=e/this.CONTAIN_WIDTH*2-1,this.mouse.y=-t/this.CONTAIN_HEIGHT*2+1,this.showMore&&(this.mouse.x=e/(this.CONTAIN_WIDTH-100)*2-1,this.mouse.y=-t/this.CONTAIN_HEIGHT*2+1),this.plane&&(this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.intersectObject(this.plane,!1,this.intersectsSelect),0<this.intersectsSelect.length?(s=this.intersectsSelect[0].point,this.intersection.point.copy(s),(s=this.intersectsSelect[0].face.normal.clone()).transformDirection(this.plane.matrixWorld),s.multiplyScalar(10),s.add(this.intersectsSelect[0].point),this.intersection.normal.copy(this.intersectsSelect[0].face.normal),1<(s=this.raycaster.intersectObjects(this.scene.children)).length&&(!s||"shapes"!=s[0].object.name&&"stl"!=s[0].object.name&&"stlLocal"!=s[0].object.name?"plane"==s[0].object.name&&(this.transformControl.detach(),this.transformControl.attach(s[0].object)):(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(s[0].object)),this.colorControl=!0),this.intersection.intersects=!0,this.intersectsSelect.length=0):(this.intersection.intersects=!1,0<(s=this.raycaster.intersectObjects(this.scene.children)).length&&(s&&("shapes"==s[0].object.name||"stl"==s[0].object.name||"stlLocal"==s[0].object.name)||"plane"==s[0].object.name)&&(this.transformControl.detach(this.transformControl.object),this.transformControl.attach(s[0].object))),this.render())},hideSelf:function(){r(".orientationControls").remove(),this.$router.push({path:"/projects",query:{jump:"MagicBox-AppforChildren"}})},allOperationAdd:function(){window.focusedTransformObj&&(this.createObjForOperation(this.transformControl.object,"transform"),this.eachObjSetps(this.transformControl.object,0)),0<this.allOperation.length?this.undoActive=!0:this.undoActive=!1},checkScalePosition:function(t){this.tcScale=t.scale.clone(),this.tcScaleYPosition=t.position.clone().y,this.tcScaleY=t.scale.clone().y,"shapes"==t.name?this.tcScaleYPosition==this.SHAPE_SIZE*t.scale.y/2?this.tcScaleYPositionFlag=!0:this.tcScaleYPositionFlag=!1:"stl"==t.name&&(this.tcScaleYPosition==t.geometry.boundingSphere.radius?this.tcScaleYPositionFlag=!0:this.tcScaleYPositionFlag=!1)},onAnimationStep:function(){if(this.transformControl.object){var t=this.SHAPE_SIZE,e=this.LIMIT_SIZE,s=this.transformControl.getMode(),o=this.transformControl.object;switch(s){case"scale":"stl"==o.name&&(this.LIMIT_SIZE=2.22),o.scale.clampScalar(.1,this.LIMIT_SIZE),this.checkAxis("scale",o);break;case"translate":"X"==this.transformControl.axis?0<=o.position.x&&o.position.x+this.SHAPE_SIZE*o.scale.x/2>=this.WORK_SPACE_SIZE/2?o.position.x=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*o.scale.x/2:o.position.x<0&&o.position.x-this.SHAPE_SIZE*o.scale.x/2<=-this.WORK_SPACE_SIZE/2&&(o.position.x=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*o.scale.x/2):"Z"==this.transformControl.axis?0<=o.position.z&&o.position.z+this.SHAPE_SIZE*o.scale.z/2>=this.WORK_SPACE_SIZE/2?o.position.z=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*o.scale.z/2:o.position.z<0&&o.position.z-this.SHAPE_SIZE*o.scale.z/2<=-this.WORK_SPACE_SIZE/2&&(o.position.z=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*o.scale.z/2):"Y"==this.transformControl.axis&&(0<=o.position.y&&o.position.y+this.SHAPE_SIZE*o.scale.y/2>=this.WORK_SPACE_SIZE?o.position.y=this.WORK_SPACE_SIZE-this.SHAPE_SIZE*o.scale.y/2:"stl"==o.name?o.position.y<o.geometry.boundingSphere.radius*o.scale.y&&(o.position.y=this.SHAPE_SIZE*o.scale.y):"stlLocal"==o.name?o.position.y<0&&(o.position.y=0):o.position.y<this.SHAPE_SIZE*o.scale.y/2&&(o.position.y=this.SHAPE_SIZE*o.scale.y/2))}this.SHAPE_SIZE=t,this.LIMIT_SIZE=e}},checkAxis:function(t,e){"scale"===t&&(0<=e.position.x&&e.position.x+this.SHAPE_SIZE*e.scale.x/2>=this.WORK_SPACE_SIZE/2?e.position.x=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*e.scale.x/2:e.position.x<0&&e.position.x-this.SHAPE_SIZE*e.scale.x/2<=-this.WORK_SPACE_SIZE/2&&(e.position.x=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*e.scale.x/2),0<=e.position.z&&e.position.z+this.SHAPE_SIZE*e.scale.z/2>=this.WORK_SPACE_SIZE/2?e.position.z=this.WORK_SPACE_SIZE/2-this.SHAPE_SIZE*e.scale.z/2:e.position.z<0&&e.position.z-this.SHAPE_SIZE*e.scale.z/2<=-this.WORK_SPACE_SIZE/2&&(e.position.z=-this.WORK_SPACE_SIZE/2+this.SHAPE_SIZE*e.scale.z/2),0<=e.position.y&&e.position.y<=this.SHAPE_SIZE*e.scale.y/2?e.position.y=this.SHAPE_SIZE*e.scale.y/2:0<=e.position.y&&this.tcScaleYPositionFlag?"stl"==e.name?e.geometry.boundingSphere&&(this.tcScaleYPosition==e.geometry.boundingSphere.radius*e.scale.y/2?e.position.y=e.geometry.boundingSphere.radius*e.scale.y:e.position.y=this.SHAPE_SIZE*e.scale.y/2):e.position.y=this.SHAPE_SIZE*e.scale.y/2:e.position.y<0&&(e.position.y=this.SHAPE_SIZE*e.scale.y/2))},changeControls:function(t){if(!window.deleteObjFlag){this.showColorOption=!1,this.showZoomOption=!1;var e=event.target;switch(r(e).hasClass("control_btn")||(e=r(e).closest(".control_btn")),0==this.transformControlModeType&&0==t||1==this.transformControlModeType&&1==t||2==this.transformControlModeType&&2==t||3==this.transformControlModeType&&3==t?e.toggleClass("active_control"):(r(".active_control").removeClass("active_control"),e.addClass("active_control")),e.hasClass("active_control")?this.transformControl.attach(this.transformControl.object):this.transformControl.detach(this.transformControl.object),t){case 0:this.transformControl.setMode("scale"),this.statusTxt=this.textSC,this.transformControlModeType=0;break;case 1:this.transformControl.setMode("translate"),this.statusTxt=this.textTR,this.transformControlModeType=1;break;case 2:this.transformControl.setMode("rotate"),this.statusTxt=this.textRO,this.transformControlModeType=2;break;default:this.transformControl.setMode("translate"),this.statusTxt=this.textTR,this.transformControlModeType=1}this.transformControl.object?this.colorControl=!0:this.colorControl=!1}},deletedSelected:function(){this.showColorOption=!1,this.showZoomOption=!1,window.focusedTransformObj&&this.transformControl.object&&(this.createObjForOperation(this.transformControl.object,"delete"),this.eachObjSetps(this.transformControl.object,0),this.scene.remove(this.transformControl.object),this.objects.splice(this.objects.indexOf(this.transformControl.object),1),r(".active_control").removeClass("active_control"),this.colorControl=!1,window.deleteObjFlag=!0),this.transformControl.detach(),this.shapesController(0),this.render(),1<this.objects.length?this.activeSave=!0:(this.activeSave=!1,this.controlBar=!1)},changeCurrentColor:function(t){this.isWhite=!1,this.transformControl.object&&(0==t?(this.transformControl.object.material.color.set("#dddddd"),this.isWhite=!0):(this.transformControl.object.material.color.set("#f2f545"),this.isWhite=!1),this.createObjForOperation(this.transformControl.object,"transform"),this.eachObjSetps(this.transformControl.object,0))},redoUndo:function(t){this.showColorOption=!1;var e,s,o=this.showZoomOption=!1,n=!1,i=!1;0===t?0<this.allOperation.length&&(e=this.allOperation[this.allOperation.length-1],this.redoOperation.push(e),"transform"===e.operation?o=!0:"delete"===e.operation?n=!0:"add"===e.operation&&(i=!0),i?e.mesh&&(this.eachObjSetps(e,1),this.scene.remove(e.mesh),this.objects.splice(this.objects.indexOf(e.mesh),1)):n?e.mesh&&(this.eachObjSetps(e,1),this.scene.add(e.mesh),this.objects.push(e.mesh)):!o||(s=this.eachObjectInfo[e.uuid])&&(1<s.length?this.redoProcess(s[s.length-2]):this.redoProcess(s[s.length-1]),this.eachObjSetps(this.eachObjectInfo[e.uuid].pop(),1)),this.allOperation.pop()):1===t&&0<this.redoOperation.length&&(t=this.redoOperation[this.redoOperation.length-1],this.allOperation.push(t),"transform"===t.operation?o=!0:"delete"===t.operation?n=!0:"add"===t.operation&&(i=!0),i?t.mesh&&(this.eachObjSetps(t,2),this.scene.add(t.mesh),this.objects.push(t.mesh)):n?t.mesh&&(this.eachObjSetps(t,2),this.scene.remove(t.mesh),this.objects.splice(this.objects.indexOf(t.mesh),1)):!o||(o=this.eachRedoObjectInfo[t.uuid])&&(1<o.length?this.redoProcess(o[o.length-2]):this.redoProcess(o[o.length-1]),this.eachObjSetps(this.eachRedoObjectInfo[t.uuid].pop(),2)),this.redoOperation.pop()),this.transformControl.detach(),this.colorControl=!1,this.render(),0<this.allOperation.length?this.undoActive=!0:this.undoActive=!1,0<this.redoOperation.length?this.redoActive=!0:this.redoActive=!1,1<this.objects.length?this.activeSave=!0:this.activeSave=!1},redoProcess:function(t){t.mesh.position.copy(t.position),t.mesh.rotation._x=t.rotation._x,t.mesh.rotation._y=t.rotation._y,t.mesh.rotation._z=t.rotation._z,t.mesh.quaternion._x=t.quaternion._x,t.mesh.quaternion._y=t.quaternion._y,t.mesh.quaternion._z=t.quaternion._z,t.mesh.scale.set(t.scale.x,t.scale.y,t.scale.z),t.mesh.material.color.set(t.color)},saveModuleShow:function(t){1<this.objects.length?this.saveNmaeWindow=0==t:this.saveNmaeWindow=!1},getTimeStr:function(){var t=new Date;return t.getFullYear()+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+(t.getDate()<10?"0"+t.getDate():t.getDate())+(t.getHours()<10?"0"+t.getHours():t.getHours())+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},exportMoudle:function(t){var e,s;1<this.objects.length&&(this.scene.remove(this.transformControl),this.clearCache(this.gridHelper),this.scene.remove(this.gridHelper),this.clearCache(this.gradGroundMesh),this.scene.remove(this.gradGroundMesh),this.clearCache(this.gradGroundMesh1),this.scene.remove(this.gradGroundMesh1),this.clearCache(this.plane),this.scene.remove(this.plane),this.camera.position.set(170,145,255),this.camera.lookAt(0,0,0),this.scene.rotation.set(Math.PI/2,0,0),this.scene.updateMatrixWorld(),(e=r("#save_name").val())&&(this.saveFlag=!0,0===t?(s=(new o.a).parse(this.scene),this.saveString(s,e+".stl")):(s=this.scene,(new a.GLTFExporter).parse(s,function(t){t=JSON.stringify(t,null,2);this.saveString(t,e+".gltf")},{trs:!1,onlyVisible:!0,truncateDrawRange:!0,binary:!1,forcePowerOfTwoTextures:!1,maxTextureSize:4096}))),this.scene.add(this.transformControl),this.scene.add(this.gridHelper),this.scene.add(this.gradGroundMesh),this.scene.add(this.gradGroundMesh1),this.scene.add(this.plane),this.scene.rotation.set(0,0,0),this.scene.updateMatrixWorld())},saveString:function(t,e){this.save(new Blob([t],{type:"text/plain"}),e)},save:function(t,e){var s=document.createElement("a");s.style.display="none",s.className="saveFile",document.body.appendChild(s),s.href=URL.createObjectURL(t),s.download=e,s.click(),r(".saveFile").remove(),this.afterSTLImg()},afterSTLImg:function(){for(var t in this.saveModuleShow(1),this.objects)this.clearCache(this.objects[t]),this.scene.remove(this.objects[t]);this.objects=[],this.objects.push(this.plane),this.transformControl.detach(),this.activeSave=!1,this.controlBar=!1,this.goHomeFlag?(this.goHomeFlag=!1,this.saveFlag=!1,this.hideSelf()):(this.goHomeFlag=!1,this.saveFlag=!1)},leaveBuilder:function(){!(1<this.objects.length)||this.saveFlag?this.hideSelf():this.notSaveNote=!0},hideAskWindow:function(){this.notSaveNote=!1},goHomeSaveModule:function(t){this.notSaveNote=!1,0===t?this.hideSelf():(this.saveModuleShow(0),this.goHomeFlag=!0)},windowReisze:function(){this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight,this.onWindowResize()}},mounted:function(){var t=this;this.showLoading=!0,this.mobile=/Android|webOS|iPhone|iPad|BlackBerry/i.test(navigator.userAgent),this.container=document.getElementById("container"),this.shapesEventL=document.getElementById("childWrapper"),this.shapesMain=document.getElementById("shapes"),this.currentObjMaterial=new a.B({color:14540253}),this.fontLoader=new a.q,this.mouseHelperMaterial=this.currentObjMaterial,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight,this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,window.focusedTransformObj=this.focusedTransformObj,window.deleteObjFlag=this.deleteObjFlag,this.init(),this.listModule(),window.addEventListener("resize",this.windowReisze),this.progressingBar=0;var e=setInterval(function(){t.progressingBar+=10},100);setTimeout(function(){clearInterval(e),t.showLoading=!1},1e3)},computed:{textTR:function(){return"".concat(this.$t("CURRENT_STATUS")," ").concat(this.$t("MOVE"))},textSC:function(){return"".concat(this.$t("CURRENT_STATUS")," ").concat(this.$t("CHANGE_SIZE"))},textRO:function(){return"".concat(this.$t("CURRENT_STATUS")," ").concat(this.$t("ROTATE"))}},destroyed:function(){var t=this;window.removeEventListener("resize",this.windowReisze),t.controls.removeEventListener("change"),t.transformControl.removeEventListener("dragging-changed"),t.transformControl.removeEventListener("change"),t.transformControl.removeEventListener("mouseDown"),t.transformControl.removeEventListener("objectChange"),t.transformControl.removeEventListener("mouseUp"),r(".orientationControls").remove()},deactivated:function(){var t=this;window.removeEventListener("resize",this.windowReisze),t.controls.removeEventListener("change"),t.transformControl.removeEventListener("dragging-changed"),t.transformControl.removeEventListener("change"),t.transformControl.removeEventListener("mouseDown"),t.transformControl.removeEventListener("objectChange"),t.transformControl.removeEventListener("mouseUp"),r(".orientationControls").remove()},watch:{CONTAIN_WIDTH:function(t){t&&(this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight)},CONTAIN_HEIGHT:function(t){t&&(this.CONTAIN_WIDTH=document.getElementById("mainWrapper").offsetWidth,this.CONTAIN_HEIGHT=document.getElementById("mainWrapper").offsetHeight)},focusedTransformObj:function(t){t&&(window.focusedTransformObj=this.focusedTransformObj)},textInput:function(t,e){t&&(this.textInput1=t)}}}}.call(this,c("1157"))}}]);